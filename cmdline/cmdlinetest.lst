GAS LISTING /var/tmp//ccskXpcw.s 			page 1


   1               		.file	"cmdlinetest.c"
   2               		.arch atmega32
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/opt/local/avr/avrlib/freedomflies/cmdline/",100,0,2,.Ltext0
  11               		.stabs	"cmdlinetest.c",100,0,2,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  16               		.stabs	"char:t(0,2)=r(0,2);0;127;",128,0,0,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"void:t(0,15)=(0,15)",128,0,0,0
  30               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/io.h",130,0,0,0
  31               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/sfr_defs.h",130,0,0,0
  32               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/inttypes.h",130,0,0,0
  33               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/stdint.h",130,0,0,0
  34               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,116,0
  35               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,117,0
  36               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,118,0
  37               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,119,0
  38               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,120,0
  39               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,121,0
  40               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,122,0
  41               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,123,0
  42               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,135,0
  43               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,140,0
  44               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,152,0
  45               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,157,0
  46               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,162,0
  47               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,167,0
  48               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,172,0
  49               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,177,0
  50               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,182,0
  51               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,187,0
  52               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,200,0
  53               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,205,0
  54               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,210,0
  55               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,215,0
  56               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,220,0
  57               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,225,0
GAS LISTING /var/tmp//ccskXpcw.s 			page 2


  58               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,230,0
  59               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,235,0
  60               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,249,0
  61               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,254,0
  62               		.stabn	162,0,0,0
  63               		.stabs	"int_farptr_t:t(3,1)=(4,5)",128,0,76,0
  64               		.stabs	"uint_farptr_t:t(3,2)=(4,6)",128,0,80,0
  65               		.stabn	162,0,0,0
  66               		.stabn	162,0,0,0
  67               		.stabn	162,0,0,0
  68               		.stabs	"global.h",130,0,0,0
  69               		.stabs	"/opt/local/avr/sixcode/avrlibtypes.h",130,0,0,0
  70               		.stabs	"u08:t(6,1)=(0,11)",128,0,32,0
  71               		.stabs	"s08:t(6,2)=(0,10)",128,0,33,0
  72               		.stabs	"u16:t(6,3)=(0,9)",128,0,34,0
  73               		.stabs	"s16:t(6,4)=(0,8)",128,0,35,0
  74               		.stabs	"u32:t(6,5)=(0,5)",128,0,36,0
  75               		.stabs	"s32:t(6,6)=(0,3)",128,0,37,0
  76               		.stabs	"u64:t(6,7)=(0,7)",128,0,38,0
  77               		.stabs	"s64:t(6,8)=(0,6)",128,0,39,0
  78               		.stabs	"BOOL:t(6,9)=(0,11)",128,0,69,0
  79               		.stabs	"BYTE:t(6,10)=(0,11)",128,0,70,0
  80               		.stabs	"WORD:t(6,11)=(0,4)",128,0,71,0
  81               		.stabs	"DWORD:t(6,12)=(0,5)",128,0,72,0
  82               		.stabs	"UCHAR:t(6,13)=(0,11)",128,0,74,0
  83               		.stabs	"UINT:t(6,14)=(0,4)",128,0,75,0
  84               		.stabs	"USHORT:t(6,15)=(0,9)",128,0,76,0
  85               		.stabs	"ULONG:t(6,16)=(0,5)",128,0,77,0
  86               		.stabs	"CHAR:t(6,17)=(0,2)",128,0,79,0
  87               		.stabs	"INT:t(6,18)=(0,1)",128,0,80,0
  88               		.stabs	"LONG:t(6,19)=(0,3)",128,0,81,0
  89               		.stabn	162,0,0,0
  90               		.stabn	162,0,0,0
  91               		.stabs	"/opt/local/avr/sixcode/uart.h",130,0,0,0
  92               		.stabs	"/opt/local/avr/sixcode/buffer.h",130,0,0,0
  93               		.stabs	"struct_cBuffer:T(8,1)=s8dataptr:(8,2)=*(0,11),0,16;size:(0,9),16,16;datalength:(0,9),32,16
  94               		.stabs	"cBuffer:t(8,3)=(8,1)",128,0,47,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"/opt/local/avr/sixcode/rprintf.h",130,0,0,0
  98               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/pgmspace.h",130,0,0,0
  99               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/include/stddef.h",130,0,0,0
 100               		.stabs	"size_t:t(11,1)=(0,4)",128,0,214,0
 101               		.stabn	162,0,0,0
 102               		.stabs	"prog_void:t(10,1)=(10,2)=(10,2)",128,0,203,0
 103               		.stabs	"prog_char:t(10,3)=(10,4)=@s8;r(10,4);-128;127;",128,0,204,0
 104               		.stabs	"prog_uchar:t(10,5)=(10,6)=@s8;r(10,6);0;255;",128,0,205,0
 105               		.stabs	"prog_int8_t:t(10,7)=(10,4)",128,0,207,0
 106               		.stabs	"prog_uint8_t:t(10,8)=(10,6)",128,0,208,0
 107               		.stabs	"prog_int16_t:t(10,9)=(10,10)=(0,1)",128,0,209,0
 108               		.stabs	"prog_uint16_t:t(10,11)=(10,12)=(0,4)",128,0,210,0
 109               		.stabs	"prog_int32_t:t(10,13)=(10,14)=(0,3)",128,0,211,0
 110               		.stabs	"prog_uint32_t:t(10,15)=(10,16)=(0,5)",128,0,212,0
 111               		.stabs	"prog_int64_t:t(10,17)=(10,18)=(0,6)",128,0,213,0
 112               		.stabs	"prog_uint64_t:t(10,19)=(10,20)=(0,7)",128,0,214,0
 113               		.stabn	162,0,0,0
 114               		.stabn	162,0,0,0
GAS LISTING /var/tmp//ccskXpcw.s 			page 3


 115               		.stabs	"/opt/local/avr/sixcode/cmdline.h",130,0,0,0
 116               		.stabs	"CmdlineFuncPtrType:t(12,1)=(12,2)=*(12,3)=f(0,15)",128,0,85,0
 117               		.stabn	162,0,0,0
 118               		.stabs	"/opt/local/avr/sixcode/servo.h",130,0,0,0
 119               		.stabs	"struct_ServoChannel:T(13,1)=s4port:(13,2)=B(6,1),0,8;pin:(13,2),8,8;duty:(13,3)=B(6,3),16,
 120               		.stabs	"ServoChannelType:t(13,4)=(13,1)",128,0,78,0
 121               		.stabn	162,0,0,0
 122               		.stabs	"/opt/local/avr/sixcode/i2c.h",130,0,0,0
 123               		.stabs	" :T(14,1)=eI2C_IDLE:0,I2C_BUSY:1,I2C_MASTER_TX:2,I2C_MASTER_RX:3,I2C_SLAVE_TX:4,I2C_SLAVE_
 124               		.stabs	"eI2cStateType:t(14,2)=(14,1)",128,0,124,0
 125               		.stabn	162,0,0,0
 126               	.global	numTimesThrough
 127               	.global	numTimesThrough
 128               		.section .bss
 129               		.type	numTimesThrough, @object
 130               		.size	numTimesThrough, 4
 131               	numTimesThrough:
 132 0000 0000 0000 		.skip 4,0
 133               	.global	leftServoPos
 134               		.data
 135               		.type	leftServoPos, @object
 136               		.size	leftServoPos, 1
 137               	leftServoPos:
 138 0000 32        		.byte	50
 139               	.global	masterBufferLength
 140               		.type	masterBufferLength, @object
 141               		.size	masterBufferLength, 1
 142               	masterBufferLength:
 143 0001 20        		.byte	32
 144               	.global	masterBuffer
 145               		.type	masterBuffer, @object
 146               		.size	masterBuffer, 29
 147               	masterBuffer:
 148 0002 5468 6973 		.string	"This one is the Master board"
 148      206F 6E65 
 148      2069 7320 
 148      7468 6520 
 148      4D61 7374 
 149               	.global	slaveBufferLength
 150               		.type	slaveBufferLength, @object
 151               		.size	slaveBufferLength, 1
 152               	slaveBufferLength:
 153 001f 20        		.byte	32
 154               	.global	slaveBuffer
 155               		.type	slaveBuffer, @object
 156               		.size	slaveBuffer, 33
 157               	slaveBuffer:
 158 0020 5061 7363 		.string	"Pascal is cool!!Pascal is Cool!!"
 158      616C 2069 
 158      7320 636F 
 158      6F6C 2121 
 158      5061 7363 
 159               		.section	.progmem.data,"a",@progbits
 160               		.type	__c.1665, @object
 161               		.size	__c.1665, 18
 162               	__c.1665:
 163 0000 4578 6974 		.string	"Exited program!\r\n"
GAS LISTING /var/tmp//ccskXpcw.s 			page 4


 163      6564 2070 
 163      726F 6772 
 163      616D 210D 
 163      0A00 
 164               		.type	__c.1660, @object
 165               		.size	__c.1660, 17
 166               	__c.1660:
 167 0012 7469 6D65 		.string	"times through!\r\n"
 167      7320 7468 
 167      726F 7567 
 167      6821 0D0A 
 167      00
 168               		.type	__c.1655, @object
 169               		.size	__c.1655, 44
 170               	__c.1655:
 171 0023 0D0A 5765 		.string	"\r\nWelcome to the Command Line Test Suite!\r\n"
 171      6C63 6F6D 
 171      6520 746F 
 171      2074 6865 
 171      2043 6F6D 
 172               		.data
 173               	.LC0:
 174 0041 6C00      		.string	"l"
 175               	.LC1:
 176 0043 7200      		.string	"r"
 177               	.LC2:
 178 0045 7400      		.string	"t"
 179               	.LC3:
 180 0047 7000      		.string	"p"
 181               	.LC4:
 182 0049 6900      		.string	"i"
 183               	.LC5:
 184 004b 6600      		.string	"f"
 185               	.LC6:
 186 004d 3200      		.string	"2"
 187               	.LC7:
 188 004f 3300      		.string	"3"
 189               	.LC8:
 190 0051 6461 7300 		.string	"das"
 191               	.LC9:
 192 0055 6461 6900 		.string	"dai"
 193               		.text
 194               		.stabs	"goCmdline:F(0,15)",36,0,139,goCmdline
 195               	.global	goCmdline
 196               		.type	goCmdline, @function
 197               	goCmdline:
 198               		.stabd	46,0,0
   1:cmdlinetest.c **** //*****************************************************************************
   2:cmdlinetest.c **** // File Name	: cmdlinetest.c
   3:cmdlinetest.c **** // 
   4:cmdlinetest.c **** // Title		: example usage of cmdline (command line) functions
   5:cmdlinetest.c **** // Revision		: 1.0
   6:cmdlinetest.c **** // Notes		:	
   7:cmdlinetest.c **** // Target MCU	: Atmel AVR series
   8:cmdlinetest.c **** // Editor Tabs	: 4
   9:cmdlinetest.c **** // 
  10:cmdlinetest.c **** // Revision History:
GAS LISTING /var/tmp//ccskXpcw.s 			page 5


  11:cmdlinetest.c **** // When			Who			Description of change
  12:cmdlinetest.c **** // -----------	-----------	-----------------------
  13:cmdlinetest.c **** // 21-Jul-2003	pstang		Created the program
  14:cmdlinetest.c **** //*****************************************************************************
  15:cmdlinetest.c **** 
  16:cmdlinetest.c **** 
  17:cmdlinetest.c **** //----- Include Files ---------------------------------------------------------
  18:cmdlinetest.c **** #include <avr/io.h>			// include I/O definitions (port names, pin names, etc)
  19:cmdlinetest.c **** #include <avr/interrupt.h>	// include interrupt support
  20:cmdlinetest.c **** 
  21:cmdlinetest.c **** #include "global.h"		// include our global settings
  22:cmdlinetest.c **** #include "uart.h"		// include uart function library
  23:cmdlinetest.c **** #include "rprintf.h"	// include printf function library
  24:cmdlinetest.c **** #include "a2d.h"		// include A/D converter function library
  25:cmdlinetest.c **** #include "timer.h"		// include timer function library (timing, PWM, etc)
  26:cmdlinetest.c **** #include "vt100.h"		// include vt100 terminal support
  27:cmdlinetest.c **** #include "cmdline.h"	// include cmdline function library
  28:cmdlinetest.c **** #include "servo.h"
  29:cmdlinetest.c **** #include "i2c.h"
  30:cmdlinetest.c **** #include "string.h"
  31:cmdlinetest.c **** #include "servoconf.h"
  32:cmdlinetest.c **** //I2C address definitions
  33:cmdlinetest.c **** #define LOCAL_ADDR	0xA0
  34:cmdlinetest.c **** #define TARGET_ADDR	0xA0
  35:cmdlinetest.c **** 
  36:cmdlinetest.c **** // Peripheral initialization
  37:cmdlinetest.c **** 
  38:cmdlinetest.c **** #define TCNT0_INIT (0xFF-CPUCLK/256/TICKRATE)
  39:cmdlinetest.c **** #define LEFT_SERVO_CHAN 	4
  40:cmdlinetest.c **** #define RIGHT_SERVO_CHAN 	3
  41:cmdlinetest.c **** #define THROTTLE_SERVO_CHAN 0
  42:cmdlinetest.c **** #define CAM_PAN_SERVO_CHAN  1
  43:cmdlinetest.c **** #define CAM_TILT_SERVO_CHAN 2
  44:cmdlinetest.c **** 
  45:cmdlinetest.c **** #define SPEED_SERVO	1
  46:cmdlinetest.c **** #undef DEBUG
  47:cmdlinetest.c **** 
  48:cmdlinetest.c **** void setLeftServo(void);
  49:cmdlinetest.c **** void setRightServo(void);
  50:cmdlinetest.c **** void setThrottleServo(void);
  51:cmdlinetest.c **** void setCamPanServo(void);
  52:cmdlinetest.c **** void setCamTiltServo(void);
  53:cmdlinetest.c **** void setFeedbackInterval(void);
  54:cmdlinetest.c **** 
  55:cmdlinetest.c **** void 	i2cSetup(void);
  56:cmdlinetest.c **** void  	i2cSlaveReceiveService(u08 receiveDataLength, u08* receiveData);
  57:cmdlinetest.c **** u08 	i2cSlaveTransmitService(u08 receiveDataLength, u08* receiveData);
  58:cmdlinetest.c **** void 	i2cMasterSendDiag(u08 deviceAddr, u08 length, u08* data);
  59:cmdlinetest.c **** 
  60:cmdlinetest.c **** void 	i2cMaster_Receive();
  61:cmdlinetest.c **** void 	i2cMaster_Send();
  62:cmdlinetest.c **** void 	i2cMaster_Auto_Send(u08 message);
  63:cmdlinetest.c **** void 	i2cMaster_Auto_Receive(u08 command);
  64:cmdlinetest.c **** 
  65:cmdlinetest.c **** // I2C buffers
  66:cmdlinetest.c **** u08 slaveBuffer[] = "Pascal is cool!!Pascal is Cool!!";
  67:cmdlinetest.c **** u08 slaveBufferLength = 0x20;
GAS LISTING /var/tmp//ccskXpcw.s 			page 6


  68:cmdlinetest.c **** 
  69:cmdlinetest.c **** unsigned char masterBuffer[] = "This one is the Master board";
  70:cmdlinetest.c **** unsigned char masterBufferLength = 0x20;
  71:cmdlinetest.c **** // global variables
  72:cmdlinetest.c **** u08 Run;
  73:cmdlinetest.c **** 
  74:cmdlinetest.c **** // functions
  75:cmdlinetest.c **** void goCmdline(void);
  76:cmdlinetest.c **** void dumpArgsStr(void);
  77:cmdlinetest.c **** void dumpArgsInt(void);
  78:cmdlinetest.c **** void dumpArgsHex(void);
  79:cmdlinetest.c **** 
  80:cmdlinetest.c **** u08 leftServoPos = 50;		//0 seems to be beyond its reach
  81:cmdlinetest.c **** u08 rightServoPos;
  82:cmdlinetest.c **** u08 throttleServoPos;
  83:cmdlinetest.c **** u08 camPanServoPos;
  84:cmdlinetest.c **** u08 camTiltServoPos;
  85:cmdlinetest.c **** 
  86:cmdlinetest.c **** long numTimesThrough = 0;  // number of times through mainloop to send feedback
  87:cmdlinetest.c **** 
  88:cmdlinetest.c **** //----- Begin Code ------------------------------------------------------------
  89:cmdlinetest.c **** int main(void)
  90:cmdlinetest.c **** {
  91:cmdlinetest.c **** 	// initialize our libraries
  92:cmdlinetest.c **** 	// initialize the UART (serial port)
  93:cmdlinetest.c **** 	uartInit();
  94:cmdlinetest.c **** 	uartSetBaudRate(57600);
  95:cmdlinetest.c **** 	// make all rprintf statements use uart for output
  96:cmdlinetest.c **** 	rprintfInit(uartSendByte);
  97:cmdlinetest.c **** 	// turn on and initialize A/D converter
  98:cmdlinetest.c **** 	a2dInit();
  99:cmdlinetest.c **** 	// initialize the timer system
 100:cmdlinetest.c **** 	timerInit();
 101:cmdlinetest.c **** 	// initialize vt100 terminal
 102:cmdlinetest.c **** 	vt100Init();
 103:cmdlinetest.c **** 
 104:cmdlinetest.c **** 
 105:cmdlinetest.c **** 	// wait for hardware to power up
 106:cmdlinetest.c **** 	timerPause(100);
 107:cmdlinetest.c **** 
 108:cmdlinetest.c **** 	//////////////////////////////////////////////////I2C/////////////////////////////
 109:cmdlinetest.c **** 	i2cSetup();
 110:cmdlinetest.c **** 	
 111:cmdlinetest.c **** 	
 112:cmdlinetest.c **** 	//////////////////////////////////////////////////Servos//////////////////////////
 113:cmdlinetest.c **** 	servoInit();
 114:cmdlinetest.c **** 	// setup servo output channel-to-I/Opin mapping
 115:cmdlinetest.c **** 	// format is servoSetChannelIO( CHANNEL#, PORT, PIN );
 116:cmdlinetest.c **** 	servoSetChannelIO(0, _SFR_IO_ADDR(PORTC), PC2);
 117:cmdlinetest.c **** 	servoSetChannelIO(1, _SFR_IO_ADDR(PORTC), PC3);
 118:cmdlinetest.c **** 	servoSetChannelIO(2, _SFR_IO_ADDR(PORTC), PC4);
 119:cmdlinetest.c **** 	servoSetChannelIO(3, _SFR_IO_ADDR(PORTC), PC5);
 120:cmdlinetest.c **** 	servoSetChannelIO(4, _SFR_IO_ADDR(PORTC), PC6);
 121:cmdlinetest.c **** 	servoSetChannelIO(5, _SFR_IO_ADDR(PORTC), PC7);
 122:cmdlinetest.c **** 	// set port pins to output
 123:cmdlinetest.c **** 	outb(DDRC, 0xFC);
 124:cmdlinetest.c **** 	
GAS LISTING /var/tmp//ccskXpcw.s 			page 7


 125:cmdlinetest.c **** 
 126:cmdlinetest.c **** 
 127:cmdlinetest.c **** 
 128:cmdlinetest.c **** 	//////////////////////////////////////////////////////////////////////////////////
 129:cmdlinetest.c **** 	rprintf("**********************powerup*************************");
 130:cmdlinetest.c **** 	
 131:cmdlinetest.c **** 
 132:cmdlinetest.c **** 	// start command line
 133:cmdlinetest.c **** 	goCmdline();
 134:cmdlinetest.c **** 
 135:cmdlinetest.c **** 	return 0;
 136:cmdlinetest.c **** }
 137:cmdlinetest.c **** 
 138:cmdlinetest.c **** void goCmdline(void)
 139:cmdlinetest.c **** {
 199               		.stabn	68,0,139,.LM0-goCmdline
 200               	.LM0:
 201               	/* prologue: frame size=1 */
 202 0000 EF92      		push r14
 203 0002 FF92      		push r15
 204 0004 0F93      		push r16
 205 0006 1F93      		push r17
 206 0008 CF93      		push r28
 207 000a DF93      		push r29
 208 000c CDB7      		in r28,__SP_L__
 209 000e DEB7      		in r29,__SP_H__
 210 0010 2197      		sbiw r28,1
 211 0012 0FB6      		in __tmp_reg__,__SREG__
 212 0014 F894      		cli
 213 0016 DEBF      		out __SP_H__,r29
 214 0018 0FBE      		out __SREG__,__tmp_reg__
 215 001a CDBF      		out __SP_L__,r28
 216               	/* prologue end (size=14) */
 140:cmdlinetest.c **** 	u08 c;
 141:cmdlinetest.c **** 	long timesThrough =0;
 142:cmdlinetest.c **** 	// print welcome message
 143:cmdlinetest.c **** 	vt100ClearScreen();
 217               		.stabn	68,0,143,.LM1-goCmdline
 218               	.LM1:
 219 001c 0E94 0000 		call vt100ClearScreen
 144:cmdlinetest.c **** 	vt100SetCursorPos(1,0);
 220               		.stabn	68,0,144,.LM2-goCmdline
 221               	.LM2:
 222 0020 60E0      		ldi r22,lo8(0)
 223 0022 81E0      		ldi r24,lo8(1)
 224 0024 0E94 0000 		call vt100SetCursorPos
 145:cmdlinetest.c **** 	rprintfProgStrM("\r\nWelcome to the Command Line Test Suite!\r\n");
 225               		.stabn	68,0,145,.LM3-goCmdline
 226               	.LM3:
 227 0028 80E0      		ldi r24,lo8(__c.1655)
 228 002a 90E0      		ldi r25,hi8(__c.1655)
 229 002c 0E94 0000 		call rprintfProgStr
 146:cmdlinetest.c **** 
 147:cmdlinetest.c **** 	// initialize cmdline system
 148:cmdlinetest.c **** 	cmdlineInit();
 230               		.stabn	68,0,148,.LM4-goCmdline
 231               	.LM4:
GAS LISTING /var/tmp//ccskXpcw.s 			page 8


 232 0030 0E94 0000 		call cmdlineInit
 149:cmdlinetest.c **** 
 150:cmdlinetest.c **** 	// direct cmdline output to uart (serial port)
 151:cmdlinetest.c **** 	cmdlineSetOutputFunc(uartSendByte);
 233               		.stabn	68,0,151,.LM5-goCmdline
 234               	.LM5:
 235 0034 80E0      		ldi r24,lo8(pm(uartSendByte))
 236 0036 90E0      		ldi r25,hi8(pm(uartSendByte))
 237 0038 0E94 0000 		call cmdlineSetOutputFunc
 152:cmdlinetest.c **** 
 153:cmdlinetest.c **** 	// add commands to the command database
 154:cmdlinetest.c **** 
 155:cmdlinetest.c **** 
 156:cmdlinetest.c **** 	cmdlineAddCommand("l",		setLeftServo);
 238               		.stabn	68,0,156,.LM6-goCmdline
 239               	.LM6:
 240 003c 60E0      		ldi r22,lo8(pm(setLeftServo))
 241 003e 70E0      		ldi r23,hi8(pm(setLeftServo))
 242 0040 80E0      		ldi r24,lo8(.LC0)
 243 0042 90E0      		ldi r25,hi8(.LC0)
 244 0044 0E94 0000 		call cmdlineAddCommand
 157:cmdlinetest.c **** 	cmdlineAddCommand("r",		setRightServo);
 245               		.stabn	68,0,157,.LM7-goCmdline
 246               	.LM7:
 247 0048 60E0      		ldi r22,lo8(pm(setRightServo))
 248 004a 70E0      		ldi r23,hi8(pm(setRightServo))
 249 004c 80E0      		ldi r24,lo8(.LC1)
 250 004e 90E0      		ldi r25,hi8(.LC1)
 251 0050 0E94 0000 		call cmdlineAddCommand
 158:cmdlinetest.c ****     cmdlineAddCommand("t", 		setThrottleServo);
 252               		.stabn	68,0,158,.LM8-goCmdline
 253               	.LM8:
 254 0054 60E0      		ldi r22,lo8(pm(setThrottleServo))
 255 0056 70E0      		ldi r23,hi8(pm(setThrottleServo))
 256 0058 80E0      		ldi r24,lo8(.LC2)
 257 005a 90E0      		ldi r25,hi8(.LC2)
 258 005c 0E94 0000 		call cmdlineAddCommand
 159:cmdlinetest.c **** 	cmdlineAddCommand("p", 		setCamPanServo);
 259               		.stabn	68,0,159,.LM9-goCmdline
 260               	.LM9:
 261 0060 60E0      		ldi r22,lo8(pm(setCamPanServo))
 262 0062 70E0      		ldi r23,hi8(pm(setCamPanServo))
 263 0064 80E0      		ldi r24,lo8(.LC3)
 264 0066 90E0      		ldi r25,hi8(.LC3)
 265 0068 0E94 0000 		call cmdlineAddCommand
 160:cmdlinetest.c **** 	cmdlineAddCommand("i", 		setCamTiltServo);
 266               		.stabn	68,0,160,.LM10-goCmdline
 267               	.LM10:
 268 006c 60E0      		ldi r22,lo8(pm(setCamTiltServo))
 269 006e 70E0      		ldi r23,hi8(pm(setCamTiltServo))
 270 0070 80E0      		ldi r24,lo8(.LC4)
 271 0072 90E0      		ldi r25,hi8(.LC4)
 272 0074 0E94 0000 		call cmdlineAddCommand
 161:cmdlinetest.c **** 	cmdlineAddCommand("f", 		setFeedbackInterval);
 273               		.stabn	68,0,161,.LM11-goCmdline
 274               	.LM11:
 275 0078 60E0      		ldi r22,lo8(pm(setFeedbackInterval))
GAS LISTING /var/tmp//ccskXpcw.s 			page 9


 276 007a 70E0      		ldi r23,hi8(pm(setFeedbackInterval))
 277 007c 80E0      		ldi r24,lo8(.LC5)
 278 007e 90E0      		ldi r25,hi8(.LC5)
 279 0080 0E94 0000 		call cmdlineAddCommand
 162:cmdlinetest.c **** 	
 163:cmdlinetest.c **** 	cmdlineAddCommand("2", 		i2cMaster_Send);
 280               		.stabn	68,0,163,.LM12-goCmdline
 281               	.LM12:
 282 0084 60E0      		ldi r22,lo8(pm(i2cMaster_Send))
 283 0086 70E0      		ldi r23,hi8(pm(i2cMaster_Send))
 284 0088 80E0      		ldi r24,lo8(.LC6)
 285 008a 90E0      		ldi r25,hi8(.LC6)
 286 008c 0E94 0000 		call cmdlineAddCommand
 164:cmdlinetest.c **** 	cmdlineAddCommand("3", 		i2cMaster_Receive);
 287               		.stabn	68,0,164,.LM13-goCmdline
 288               	.LM13:
 289 0090 60E0      		ldi r22,lo8(pm(i2cMaster_Receive))
 290 0092 70E0      		ldi r23,hi8(pm(i2cMaster_Receive))
 291 0094 80E0      		ldi r24,lo8(.LC7)
 292 0096 90E0      		ldi r25,hi8(.LC7)
 293 0098 0E94 0000 		call cmdlineAddCommand
 165:cmdlinetest.c **** 	cmdlineAddCommand("das",	dumpArgsStr);
 294               		.stabn	68,0,165,.LM14-goCmdline
 295               	.LM14:
 296 009c 60E0      		ldi r22,lo8(pm(dumpArgsStr))
 297 009e 70E0      		ldi r23,hi8(pm(dumpArgsStr))
 298 00a0 80E0      		ldi r24,lo8(.LC8)
 299 00a2 90E0      		ldi r25,hi8(.LC8)
 300 00a4 0E94 0000 		call cmdlineAddCommand
 166:cmdlinetest.c **** 	cmdlineAddCommand("dai",	dumpArgsInt);
 301               		.stabn	68,0,166,.LM15-goCmdline
 302               	.LM15:
 303 00a8 60E0      		ldi r22,lo8(pm(dumpArgsInt))
 304 00aa 70E0      		ldi r23,hi8(pm(dumpArgsInt))
 305 00ac 80E0      		ldi r24,lo8(.LC9)
 306 00ae 90E0      		ldi r25,hi8(.LC9)
 307 00b0 0E94 0000 		call cmdlineAddCommand
 167:cmdlinetest.c **** 	// send a CR to cmdline input to stimulate a prompt
 168:cmdlinetest.c **** 	cmdlineInputFunc('\r');
 308               		.stabn	68,0,168,.LM16-goCmdline
 309               	.LM16:
 310 00b4 8DE0      		ldi r24,lo8(13)
 311 00b6 0E94 0000 		call cmdlineInputFunc
 169:cmdlinetest.c **** 
 170:cmdlinetest.c **** 	// set state to run
 171:cmdlinetest.c **** 	Run = TRUE;
 312               		.stabn	68,0,171,.LM17-goCmdline
 313               	.LM17:
 314 00ba 8FEF      		ldi r24,lo8(-1)
 315 00bc 8093 0000 		sts Run,r24
 316 00c0 EE24      		clr r14
 317 00c2 FF24      		clr r15
 318 00c4 8701      		movw r16,r14
 319 00c6 2FC0      		rjmp .L16
 320               	.L3:
 172:cmdlinetest.c **** 
 173:cmdlinetest.c **** 	// main loop
GAS LISTING /var/tmp//ccskXpcw.s 			page 10


 174:cmdlinetest.c **** 	while(Run)
 175:cmdlinetest.c **** 	{
 176:cmdlinetest.c **** 		// pass characters received on the uart (serial port)
 177:cmdlinetest.c **** 		// into the cmdline processor
 178:cmdlinetest.c **** 		while(uartReceiveByte(&c)) cmdlineInputFunc(c);
 321               		.stabn	68,0,178,.LM18-goCmdline
 322               	.LM18:
 323 00c8 8981      		ldd r24,Y+1
 324 00ca 0E94 0000 		call cmdlineInputFunc
 325               	.L14:
 326 00ce CE01      		movw r24,r28
 327 00d0 0196      		adiw r24,1
 328 00d2 0E94 0000 		call uartReceiveByte
 329 00d6 8823      		tst r24
 330 00d8 B9F7      		brne .L3
 179:cmdlinetest.c **** 
 180:cmdlinetest.c **** 		// run the cmdline execution functions
 181:cmdlinetest.c **** 		cmdlineMainLoop();
 331               		.stabn	68,0,181,.LM19-goCmdline
 332               	.LM19:
 333 00da 0E94 0000 		call cmdlineMainLoop
 182:cmdlinetest.c **** 		timesThrough++;
 334               		.stabn	68,0,182,.LM20-goCmdline
 335               	.LM20:
 336 00de 0894      		sec
 337 00e0 E11C      		adc r14,__zero_reg__
 338 00e2 F11C      		adc r15,__zero_reg__
 339 00e4 011D      		adc r16,__zero_reg__
 340 00e6 111D      		adc r17,__zero_reg__
 183:cmdlinetest.c **** 		if(numTimesThrough != 0)
 341               		.stabn	68,0,183,.LM21-goCmdline
 342               	.LM21:
 343 00e8 8091 0000 		lds r24,numTimesThrough
 344 00ec 9091 0000 		lds r25,(numTimesThrough)+1
 345 00f0 A091 0000 		lds r26,(numTimesThrough)+2
 346 00f4 B091 0000 		lds r27,(numTimesThrough)+3
 347 00f8 0097      		sbiw r24,0
 348 00fa A105      		cpc r26,__zero_reg__
 349 00fc B105      		cpc r27,__zero_reg__
 350 00fe 99F0      		breq .L16
 184:cmdlinetest.c **** 		{
 185:cmdlinetest.c **** 			if((timesThrough >= numTimesThrough)) 
 351               		.stabn	68,0,185,.LM22-goCmdline
 352               	.LM22:
 353 0100 E816      		cp r14,r24
 354 0102 F906      		cpc r15,r25
 355 0104 0A07      		cpc r16,r26
 356 0106 1B07      		cpc r17,r27
 357 0108 74F0      		brlt .L16
 186:cmdlinetest.c **** 			{
 187:cmdlinetest.c **** 				rprintf("times through!\r\n");
 358               		.stabn	68,0,187,.LM23-goCmdline
 359               	.LM23:
 360 010a 80E0      		ldi r24,lo8(__c.1660)
 361 010c 90E0      		ldi r25,hi8(__c.1660)
 362 010e 9F93      		push r25
 363 0110 8F93      		push r24
GAS LISTING /var/tmp//ccskXpcw.s 			page 11


 364 0112 81E0      		ldi r24,lo8(1)
 365 0114 8F93      		push r24
 366 0116 0E94 0000 		call rprintf1RamRom
 367 011a EE24      		clr r14
 368 011c FF24      		clr r15
 369 011e 8701      		movw r16,r14
 370 0120 0F90      		pop __tmp_reg__
 371 0122 0F90      		pop __tmp_reg__
 372 0124 0F90      	 	pop __tmp_reg__
 373               	.L16:
 374               		.stabn	68,0,174,.LM24-goCmdline
 375               	.LM24:
 376 0126 8091 0000 		lds r24,Run
 377 012a 8823      		tst r24
 378 012c 81F6      		brne .L14
 188:cmdlinetest.c **** 				timesThrough = 0;
 189:cmdlinetest.c **** 			}
 190:cmdlinetest.c **** 		}
 191:cmdlinetest.c **** 	}
 192:cmdlinetest.c **** 
 193:cmdlinetest.c **** 	rprintfCRLF();
 379               		.stabn	68,0,193,.LM25-goCmdline
 380               	.LM25:
 381 012e 0E94 0000 		call rprintfCRLF
 194:cmdlinetest.c **** 	rprintf("Exited program!\r\n");
 382               		.stabn	68,0,194,.LM26-goCmdline
 383               	.LM26:
 384 0132 80E0      		ldi r24,lo8(__c.1665)
 385 0134 90E0      		ldi r25,hi8(__c.1665)
 386 0136 9F93      		push r25
 387 0138 8F93      		push r24
 388 013a 81E0      		ldi r24,lo8(1)
 389 013c 8F93      		push r24
 390 013e 0E94 0000 		call rprintf1RamRom
 391 0142 0F90      		pop __tmp_reg__
 392 0144 0F90      		pop __tmp_reg__
 393 0146 0F90      	 	pop __tmp_reg__
 394               	/* epilogue: frame size=1 */
 395 0148 2196      		adiw r28,1
 396 014a 0FB6      		in __tmp_reg__,__SREG__
 397 014c F894      		cli
 398 014e DEBF      		out __SP_H__,r29
 399 0150 0FBE      		out __SREG__,__tmp_reg__
 400 0152 CDBF      		out __SP_L__,r28
 401 0154 DF91      		pop r29
 402 0156 CF91      		pop r28
 403 0158 1F91      		pop r17
 404 015a 0F91      		pop r16
 405 015c FF90      		pop r15
 406 015e EF90      		pop r14
 407 0160 0895      		ret
 408               	/* epilogue end (size=13) */
 409               	/* function goCmdline size 177 (150) */
 410               		.size	goCmdline, .-goCmdline
 411               		.stabs	"c:(6,1)",128,0,140,1
 412               		.stabs	"timesThrough:r(0,3)",64,0,141,14
 413               		.stabn	192,0,0,goCmdline-goCmdline
GAS LISTING /var/tmp//ccskXpcw.s 			page 12


 414               		.stabn	224,0,0,.Lscope0-goCmdline
 415               	.Lscope0:
 416               		.stabs	"",36,0,0,.Lscope0-goCmdline
 417               		.stabd	78,0,0
 418               		.stabs	"exitFunction:F(0,15)",36,0,198,exitFunction
 419               	.global	exitFunction
 420               		.type	exitFunction, @function
 421               	exitFunction:
 422               		.stabd	46,0,0
 195:cmdlinetest.c **** }
 196:cmdlinetest.c **** 
 197:cmdlinetest.c **** void exitFunction(void)
 198:cmdlinetest.c **** {
 423               		.stabn	68,0,198,.LM27-exitFunction
 424               	.LM27:
 425               	/* prologue: frame size=0 */
 426               	/* prologue end (size=0) */
 199:cmdlinetest.c **** 	// to exit, we set Run to FALSE
 200:cmdlinetest.c **** 	Run = FALSE;
 427               		.stabn	68,0,200,.LM28-exitFunction
 428               	.LM28:
 429 0162 1092 0000 		sts Run,__zero_reg__
 430               	/* epilogue: frame size=0 */
 431 0166 0895      		ret
 432               	/* epilogue end (size=1) */
 433               	/* function exitFunction size 3 (2) */
 434               		.size	exitFunction, .-exitFunction
 435               	.Lscope1:
 436               		.stabs	"",36,0,0,.Lscope1-exitFunction
 437               		.stabd	78,0,0
 438               		.section	.progmem.data
 439               		.type	__c.1685, @object
 440               		.size	__c.1685, 54
 441               	__c.1685:
 442 004f 6475 6D70 		.string	"dumpargs3 - dumps command arguments as hex integers\r\n"
 442      6172 6773 
 442      3320 2D20 
 442      6475 6D70 
 442      7320 636F 
 443               		.type	__c.1683, @object
 444               		.size	__c.1683, 58
 445               	__c.1683:
 446 0085 6475 6D70 		.string	"dumpargs2 - dumps command arguments as decimal integers\r\n"
 446      6172 6773 
 446      3220 2D20 
 446      6475 6D70 
 446      7320 636F 
 447               		.type	__c.1681, @object
 448               		.size	__c.1681, 49
 449               	__c.1681:
 450 00bf 6475 6D70 		.string	"dumpargs1 - dumps command arguments as strings\r\n"
 450      6172 6773 
 450      3120 2D20 
 450      6475 6D70 
 450      7320 636F 
 451               		.type	__c.1679, @object
 452               		.size	__c.1679, 42
GAS LISTING /var/tmp//ccskXpcw.s 			page 13


 453               	__c.1679:
 454 00f0 6865 6C70 		.string	"help      - displays available commands\r\n"
 454      2020 2020 
 454      2020 2D20 
 454      6469 7370 
 454      6C61 7973 
 455               		.type	__c.1677, @object
 456               		.size	__c.1677, 26
 457               	__c.1677:
 458 011a 4176 6169 		.string	"Available commands are:\r\n"
 458      6C61 626C 
 458      6520 636F 
 458      6D6D 616E 
 458      6473 2061 
 459               		.text
 460               		.stabs	"helpFunction:F(0,15)",36,0,204,helpFunction
 461               	.global	helpFunction
 462               		.type	helpFunction, @function
 463               	helpFunction:
 464               		.stabd	46,0,0
 201:cmdlinetest.c **** }
 202:cmdlinetest.c **** 
 203:cmdlinetest.c **** void helpFunction(void)
 204:cmdlinetest.c **** {
 465               		.stabn	68,0,204,.LM29-helpFunction
 466               	.LM29:
 467               	/* prologue: frame size=0 */
 468 0168 1F93      		push r17
 469               	/* prologue end (size=1) */
 205:cmdlinetest.c **** 	rprintfCRLF();
 470               		.stabn	68,0,205,.LM30-helpFunction
 471               	.LM30:
 472 016a 0E94 0000 		call rprintfCRLF
 206:cmdlinetest.c **** 
 207:cmdlinetest.c **** 	rprintf("Available commands are:\r\n");
 473               		.stabn	68,0,207,.LM31-helpFunction
 474               	.LM31:
 475 016e 80E0      		ldi r24,lo8(__c.1677)
 476 0170 90E0      		ldi r25,hi8(__c.1677)
 477 0172 9F93      		push r25
 478 0174 8F93      		push r24
 479 0176 11E0      		ldi r17,lo8(1)
 480 0178 1F93      		push r17
 481 017a 0E94 0000 		call rprintf1RamRom
 208:cmdlinetest.c **** 	rprintf("help      - displays available commands\r\n");
 482               		.stabn	68,0,208,.LM32-helpFunction
 483               	.LM32:
 484 017e 80E0      		ldi r24,lo8(__c.1679)
 485 0180 90E0      		ldi r25,hi8(__c.1679)
 486 0182 9F93      		push r25
 487 0184 8F93      		push r24
 488 0186 1F93      		push r17
 489 0188 0E94 0000 		call rprintf1RamRom
 209:cmdlinetest.c **** 	rprintf("dumpargs1 - dumps command arguments as strings\r\n");
 490               		.stabn	68,0,209,.LM33-helpFunction
 491               	.LM33:
 492 018c 80E0      		ldi r24,lo8(__c.1681)
GAS LISTING /var/tmp//ccskXpcw.s 			page 14


 493 018e 90E0      		ldi r25,hi8(__c.1681)
 494 0190 9F93      		push r25
 495 0192 8F93      		push r24
 496 0194 1F93      		push r17
 497 0196 0E94 0000 		call rprintf1RamRom
 210:cmdlinetest.c **** 	rprintf("dumpargs2 - dumps command arguments as decimal integers\r\n");
 498               		.stabn	68,0,210,.LM34-helpFunction
 499               	.LM34:
 500 019a 80E0      		ldi r24,lo8(__c.1683)
 501 019c 90E0      		ldi r25,hi8(__c.1683)
 502 019e 9F93      		push r25
 503 01a0 8F93      		push r24
 504 01a2 1F93      		push r17
 505 01a4 0E94 0000 		call rprintf1RamRom
 211:cmdlinetest.c **** 	rprintf("dumpargs3 - dumps command arguments as hex integers\r\n");
 506               		.stabn	68,0,211,.LM35-helpFunction
 507               	.LM35:
 508 01a8 80E0      		ldi r24,lo8(__c.1685)
 509 01aa 90E0      		ldi r25,hi8(__c.1685)
 510 01ac 9F93      		push r25
 511 01ae 8F93      		push r24
 512 01b0 1F93      		push r17
 513 01b2 0E94 0000 		call rprintf1RamRom
 212:cmdlinetest.c **** 
 213:cmdlinetest.c **** 	rprintfCRLF();
 514               		.stabn	68,0,213,.LM36-helpFunction
 515               	.LM36:
 516 01b6 0E94 0000 		call rprintfCRLF
 517 01ba 8DB7      		in r24,__SP_L__
 518 01bc 9EB7      		in r25,__SP_H__
 519 01be 0F96      		adiw r24,15
 520 01c0 0FB6      		in __tmp_reg__,__SREG__
 521 01c2 F894      		cli
 522 01c4 9EBF      		out __SP_H__,r25
 523 01c6 0FBE      		out __SREG__,__tmp_reg__
 524 01c8 8DBF      		out __SP_L__,r24
 525               	/* epilogue: frame size=0 */
 526 01ca 1F91      		pop r17
 527 01cc 0895      		ret
 528               	/* epilogue end (size=2) */
 529               	/* function helpFunction size 51 (48) */
 530               		.size	helpFunction, .-helpFunction
 531               	.Lscope2:
 532               		.stabs	"",36,0,0,.Lscope2-helpFunction
 533               		.stabd	78,0,0
 534               		.section	.progmem.data
 535               		.type	__c.1698, @object
 536               		.size	__c.1698, 7
 537               	__c.1698:
 538 0134 4172 6733 		.string	"Arg3: "
 538      3A20 00
 539               		.type	__c.1696, @object
 540               		.size	__c.1696, 7
 541               	__c.1696:
 542 013b 4172 6732 		.string	"Arg2: "
 542      3A20 00
 543               		.type	__c.1694, @object
GAS LISTING /var/tmp//ccskXpcw.s 			page 15


 544               		.size	__c.1694, 7
 545               	__c.1694:
 546 0142 4172 6731 		.string	"Arg1: "
 546      3A20 00
 547               		.type	__c.1692, @object
 548               		.size	__c.1692, 7
 549               	__c.1692:
 550 0149 4172 6730 		.string	"Arg0: "
 550      3A20 00
 551               		.type	__c.1690, @object
 552               		.size	__c.1690, 28
 553               	__c.1690:
 554 0150 4475 6D70 		.string	"Dump arguments as strings\r\n"
 554      2061 7267 
 554      756D 656E 
 554      7473 2061 
 554      7320 7374 
 555               		.text
 556               		.stabs	"dumpArgsStr:F(0,15)",36,0,217,dumpArgsStr
 557               	.global	dumpArgsStr
 558               		.type	dumpArgsStr, @function
 559               	dumpArgsStr:
 560               		.stabd	46,0,0
 214:cmdlinetest.c **** }
 215:cmdlinetest.c **** 
 216:cmdlinetest.c **** void dumpArgsStr(void)
 217:cmdlinetest.c **** {
 561               		.stabn	68,0,217,.LM37-dumpArgsStr
 562               	.LM37:
 563               	/* prologue: frame size=0 */
 564               	/* prologue end (size=0) */
 218:cmdlinetest.c **** 	rprintfCRLF();
 565               		.stabn	68,0,218,.LM38-dumpArgsStr
 566               	.LM38:
 567 01ce 0E94 0000 		call rprintfCRLF
 219:cmdlinetest.c **** 	rprintf("Dump arguments as strings\r\n");
 568               		.stabn	68,0,219,.LM39-dumpArgsStr
 569               	.LM39:
 570 01d2 80E0      		ldi r24,lo8(__c.1690)
 571 01d4 90E0      		ldi r25,hi8(__c.1690)
 572 01d6 9F93      		push r25
 573 01d8 8F93      		push r24
 574 01da 81E0      		ldi r24,lo8(1)
 575 01dc 8F93      		push r24
 576 01de 0E94 0000 		call rprintf1RamRom
 220:cmdlinetest.c **** 
 221:cmdlinetest.c **** 	rprintfProgStrM("Arg0: "); rprintfStr(cmdlineGetArgStr(0)); rprintfCRLF();
 577               		.stabn	68,0,221,.LM40-dumpArgsStr
 578               	.LM40:
 579 01e2 80E0      		ldi r24,lo8(__c.1692)
 580 01e4 90E0      		ldi r25,hi8(__c.1692)
 581 01e6 0E94 0000 		call rprintfProgStr
 582 01ea 80E0      		ldi r24,lo8(0)
 583 01ec 0E94 0000 		call cmdlineGetArgStr
 584 01f0 0E94 0000 		call rprintfStr
 585 01f4 0E94 0000 		call rprintfCRLF
 222:cmdlinetest.c **** 	rprintfProgStrM("Arg1: "); rprintfStr(cmdlineGetArgStr(1)); rprintfCRLF();
GAS LISTING /var/tmp//ccskXpcw.s 			page 16


 586               		.stabn	68,0,222,.LM41-dumpArgsStr
 587               	.LM41:
 588 01f8 80E0      		ldi r24,lo8(__c.1694)
 589 01fa 90E0      		ldi r25,hi8(__c.1694)
 590 01fc 0E94 0000 		call rprintfProgStr
 591 0200 81E0      		ldi r24,lo8(1)
 592 0202 0E94 0000 		call cmdlineGetArgStr
 593 0206 0E94 0000 		call rprintfStr
 594 020a 0E94 0000 		call rprintfCRLF
 223:cmdlinetest.c **** 	rprintfProgStrM("Arg2: "); rprintfStr(cmdlineGetArgStr(2)); rprintfCRLF();
 595               		.stabn	68,0,223,.LM42-dumpArgsStr
 596               	.LM42:
 597 020e 80E0      		ldi r24,lo8(__c.1696)
 598 0210 90E0      		ldi r25,hi8(__c.1696)
 599 0212 0E94 0000 		call rprintfProgStr
 600 0216 82E0      		ldi r24,lo8(2)
 601 0218 0E94 0000 		call cmdlineGetArgStr
 602 021c 0E94 0000 		call rprintfStr
 603 0220 0E94 0000 		call rprintfCRLF
 224:cmdlinetest.c **** 	rprintfProgStrM("Arg3: "); rprintfStr(cmdlineGetArgStr(3)); rprintfCRLF();
 604               		.stabn	68,0,224,.LM43-dumpArgsStr
 605               	.LM43:
 606 0224 80E0      		ldi r24,lo8(__c.1698)
 607 0226 90E0      		ldi r25,hi8(__c.1698)
 608 0228 0E94 0000 		call rprintfProgStr
 609 022c 83E0      		ldi r24,lo8(3)
 610 022e 0E94 0000 		call cmdlineGetArgStr
 611 0232 0E94 0000 		call rprintfStr
 612 0236 0E94 0000 		call rprintfCRLF
 225:cmdlinetest.c **** 	rprintfCRLF();
 613               		.stabn	68,0,225,.LM44-dumpArgsStr
 614               	.LM44:
 615 023a 0E94 0000 		call rprintfCRLF
 616 023e 0F90      		pop __tmp_reg__
 617 0240 0F90      		pop __tmp_reg__
 618 0242 0F90      	 	pop __tmp_reg__
 619               	/* epilogue: frame size=0 */
 620 0244 0895      		ret
 621               	/* epilogue end (size=1) */
 622               	/* function dumpArgsStr size 60 (59) */
 623               		.size	dumpArgsStr, .-dumpArgsStr
 624               	.Lscope3:
 625               		.stabs	"",36,0,0,.Lscope3-dumpArgsStr
 626               		.stabd	78,0,0
 627               		.section	.progmem.data
 628               		.type	__c.1717, @object
 629               		.size	__c.1717, 14
 630               	__c.1717:
 631 016c 4172 6733 		.string	"Arg3 as int: "
 631      2061 7320 
 631      696E 743A 
 631      2000 
 632               		.type	__c.1715, @object
 633               		.size	__c.1715, 14
 634               	__c.1715:
 635 017a 4172 6732 		.string	"Arg2 as int: "
 635      2061 7320 
GAS LISTING /var/tmp//ccskXpcw.s 			page 17


 635      696E 743A 
 635      2000 
 636               		.type	__c.1713, @object
 637               		.size	__c.1713, 14
 638               	__c.1713:
 639 0188 4172 6731 		.string	"Arg1 as int: "
 639      2061 7320 
 639      696E 743A 
 639      2000 
 640               		.type	__c.1711, @object
 641               		.size	__c.1711, 29
 642               	__c.1711:
 643 0196 4475 6D70 		.string	"Dump arguments as integers\r\n"
 643      2061 7267 
 643      756D 656E 
 643      7473 2061 
 643      7320 696E 
 644               		.text
 645               		.stabs	"dumpArgsInt:F(0,15)",36,0,229,dumpArgsInt
 646               	.global	dumpArgsInt
 647               		.type	dumpArgsInt, @function
 648               	dumpArgsInt:
 649               		.stabd	46,0,0
 226:cmdlinetest.c **** }
 227:cmdlinetest.c **** 
 228:cmdlinetest.c **** void dumpArgsInt(void)
 229:cmdlinetest.c **** {
 650               		.stabn	68,0,229,.LM45-dumpArgsInt
 651               	.LM45:
 652               	/* prologue: frame size=0 */
 653 0246 DF92      		push r13
 654 0248 EF92      		push r14
 655 024a FF92      		push r15
 656 024c 0F93      		push r16
 657 024e 1F93      		push r17
 658               	/* prologue end (size=5) */
 230:cmdlinetest.c **** 	rprintfCRLF();
 659               		.stabn	68,0,230,.LM46-dumpArgsInt
 660               	.LM46:
 661 0250 0E94 0000 		call rprintfCRLF
 231:cmdlinetest.c **** 	rprintf("Dump arguments as integers\r\n");
 662               		.stabn	68,0,231,.LM47-dumpArgsInt
 663               	.LM47:
 664 0254 80E0      		ldi r24,lo8(__c.1711)
 665 0256 90E0      		ldi r25,hi8(__c.1711)
 666 0258 9F93      		push r25
 667 025a 8F93      		push r24
 668 025c 81E0      		ldi r24,lo8(1)
 669 025e D82E      		mov r13,r24
 670 0260 DF92      		push r13
 671 0262 0E94 0000 		call rprintf1RamRom
 232:cmdlinetest.c **** 
 233:cmdlinetest.c **** 	// printf %d will work but only if your numbers are less than 16-bit values
 234:cmdlinetest.c **** 	//rprintf("Arg1 as int: %d\r\n", cmdlineGetArgInt(1));
 235:cmdlinetest.c **** 	//rprintf("Arg2 as int: %d\r\n", cmdlineGetArgInt(2));
 236:cmdlinetest.c **** 	//rprintf("Arg3 as int: %d\r\n", cmdlineGetArgInt(3));
 237:cmdlinetest.c **** 
GAS LISTING /var/tmp//ccskXpcw.s 			page 18


 238:cmdlinetest.c **** 	// printfNum is good for longs too
 239:cmdlinetest.c **** 	rprintf("Arg1 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(1)); rprintfCRLF();
 672               		.stabn	68,0,239,.LM48-dumpArgsInt
 673               	.LM48:
 674 0266 80E0      		ldi r24,lo8(__c.1713)
 675 0268 90E0      		ldi r25,hi8(__c.1713)
 676 026a 9F93      		push r25
 677 026c 8F93      		push r24
 678 026e DF92      		push r13
 679 0270 0E94 0000 		call rprintf1RamRom
 680 0274 81E0      		ldi r24,lo8(1)
 681 0276 0E94 0000 		call cmdlineGetArgInt
 682 027a 7B01      		movw r14,r22
 683 027c 8C01      		movw r16,r24
 684 027e 20E2      		ldi r18,lo8(32)
 685 0280 4FEF      		ldi r20,lo8(-1)
 686 0282 6AE0      		ldi r22,lo8(10)
 687 0284 8AE0      		ldi r24,lo8(10)
 688 0286 0E94 0000 		call rprintfNum
 689 028a 0E94 0000 		call rprintfCRLF
 240:cmdlinetest.c **** 	rprintf("Arg2 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(2)); rprintfCRLF();
 690               		.stabn	68,0,240,.LM49-dumpArgsInt
 691               	.LM49:
 692 028e 80E0      		ldi r24,lo8(__c.1715)
 693 0290 90E0      		ldi r25,hi8(__c.1715)
 694 0292 9F93      		push r25
 695 0294 8F93      		push r24
 696 0296 DF92      		push r13
 697 0298 0E94 0000 		call rprintf1RamRom
 698 029c 82E0      		ldi r24,lo8(2)
 699 029e 0E94 0000 		call cmdlineGetArgInt
 700 02a2 7B01      		movw r14,r22
 701 02a4 8C01      		movw r16,r24
 702 02a6 20E2      		ldi r18,lo8(32)
 703 02a8 4FEF      		ldi r20,lo8(-1)
 704 02aa 6AE0      		ldi r22,lo8(10)
 705 02ac 8AE0      		ldi r24,lo8(10)
 706 02ae 0E94 0000 		call rprintfNum
 707 02b2 0E94 0000 		call rprintfCRLF
 241:cmdlinetest.c **** 	rprintf("Arg3 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(3)); rprintfCRLF();
 708               		.stabn	68,0,241,.LM50-dumpArgsInt
 709               	.LM50:
 710 02b6 80E0      		ldi r24,lo8(__c.1717)
 711 02b8 90E0      		ldi r25,hi8(__c.1717)
 712 02ba 9F93      		push r25
 713 02bc 8F93      		push r24
 714 02be DF92      		push r13
 715 02c0 0E94 0000 		call rprintf1RamRom
 716 02c4 83E0      		ldi r24,lo8(3)
 717 02c6 0E94 0000 		call cmdlineGetArgInt
 718 02ca 7B01      		movw r14,r22
 719 02cc 8C01      		movw r16,r24
 720 02ce 20E2      		ldi r18,lo8(32)
 721 02d0 4FEF      		ldi r20,lo8(-1)
 722 02d2 6AE0      		ldi r22,lo8(10)
 723 02d4 8AE0      		ldi r24,lo8(10)
 724 02d6 0E94 0000 		call rprintfNum
GAS LISTING /var/tmp//ccskXpcw.s 			page 19


 725 02da 0E94 0000 		call rprintfCRLF
 242:cmdlinetest.c **** 	rprintfCRLF();
 726               		.stabn	68,0,242,.LM51-dumpArgsInt
 727               	.LM51:
 728 02de 0E94 0000 		call rprintfCRLF
 729 02e2 8DB7      		in r24,__SP_L__
 730 02e4 9EB7      		in r25,__SP_H__
 731 02e6 0C96      		adiw r24,12
 732 02e8 0FB6      		in __tmp_reg__,__SREG__
 733 02ea F894      		cli
 734 02ec 9EBF      		out __SP_H__,r25
 735 02ee 0FBE      		out __SREG__,__tmp_reg__
 736 02f0 8DBF      		out __SP_L__,r24
 737               	/* epilogue: frame size=0 */
 738 02f2 1F91      		pop r17
 739 02f4 0F91      		pop r16
 740 02f6 FF90      		pop r15
 741 02f8 EF90      		pop r14
 742 02fa DF90      		pop r13
 743 02fc 0895      		ret
 744               	/* epilogue end (size=6) */
 745               	/* function dumpArgsInt size 92 (81) */
 746               		.size	dumpArgsInt, .-dumpArgsInt
 747               	.Lscope4:
 748               		.stabs	"",36,0,0,.Lscope4-dumpArgsInt
 749               		.stabd	78,0,0
 750               		.section	.progmem.data
 751               		.type	__c.1731, @object
 752               		.size	__c.1731, 14
 753               	__c.1731:
 754 01b3 4172 6733 		.string	"Arg3 as hex: "
 754      2061 7320 
 754      6865 783A 
 754      2000 
 755               		.type	__c.1729, @object
 756               		.size	__c.1729, 14
 757               	__c.1729:
 758 01c1 4172 6732 		.string	"Arg2 as hex: "
 758      2061 7320 
 758      6865 783A 
 758      2000 
 759               		.type	__c.1727, @object
 760               		.size	__c.1727, 14
 761               	__c.1727:
 762 01cf 4172 6731 		.string	"Arg1 as hex: "
 762      2061 7320 
 762      6865 783A 
 762      2000 
 763               		.type	__c.1725, @object
 764               		.size	__c.1725, 33
 765               	__c.1725:
 766 01dd 4475 6D70 		.string	"Dump arguments as hex integers\r\n"
 766      2061 7267 
 766      756D 656E 
 766      7473 2061 
 766      7320 6865 
 767               		.text
GAS LISTING /var/tmp//ccskXpcw.s 			page 20


 768               		.stabs	"dumpArgsHex:F(0,15)",36,0,246,dumpArgsHex
 769               	.global	dumpArgsHex
 770               		.type	dumpArgsHex, @function
 771               	dumpArgsHex:
 772               		.stabd	46,0,0
 243:cmdlinetest.c **** }
 244:cmdlinetest.c **** 
 245:cmdlinetest.c **** void dumpArgsHex(void)
 246:cmdlinetest.c **** {
 773               		.stabn	68,0,246,.LM52-dumpArgsHex
 774               	.LM52:
 775               	/* prologue: frame size=0 */
 776 02fe DF92      		push r13
 777 0300 EF92      		push r14
 778 0302 FF92      		push r15
 779 0304 0F93      		push r16
 780 0306 1F93      		push r17
 781               	/* prologue end (size=5) */
 247:cmdlinetest.c **** 	rprintfCRLF();
 782               		.stabn	68,0,247,.LM53-dumpArgsHex
 783               	.LM53:
 784 0308 0E94 0000 		call rprintfCRLF
 248:cmdlinetest.c **** 	rprintf("Dump arguments as hex integers\r\n");
 785               		.stabn	68,0,248,.LM54-dumpArgsHex
 786               	.LM54:
 787 030c 80E0      		ldi r24,lo8(__c.1725)
 788 030e 90E0      		ldi r25,hi8(__c.1725)
 789 0310 9F93      		push r25
 790 0312 8F93      		push r24
 791 0314 91E0      		ldi r25,lo8(1)
 792 0316 D92E      		mov r13,r25
 793 0318 DF92      		push r13
 794 031a 0E94 0000 		call rprintf1RamRom
 249:cmdlinetest.c **** 
 250:cmdlinetest.c **** 	rprintf("Arg1 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(1)); rprintfCRLF();
 795               		.stabn	68,0,250,.LM55-dumpArgsHex
 796               	.LM55:
 797 031e 80E0      		ldi r24,lo8(__c.1727)
 798 0320 90E0      		ldi r25,hi8(__c.1727)
 799 0322 9F93      		push r25
 800 0324 8F93      		push r24
 801 0326 DF92      		push r13
 802 0328 0E94 0000 		call rprintf1RamRom
 803 032c 81E0      		ldi r24,lo8(1)
 804 032e 0E94 0000 		call cmdlineGetArgHex
 805 0332 7B01      		movw r14,r22
 806 0334 8C01      		movw r16,r24
 807 0336 20E2      		ldi r18,lo8(32)
 808 0338 40E0      		ldi r20,lo8(0)
 809 033a 68E0      		ldi r22,lo8(8)
 810 033c 80E1      		ldi r24,lo8(16)
 811 033e 0E94 0000 		call rprintfNum
 812 0342 0E94 0000 		call rprintfCRLF
 251:cmdlinetest.c **** 	rprintf("Arg2 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(2)); rprintfCRLF();
 813               		.stabn	68,0,251,.LM56-dumpArgsHex
 814               	.LM56:
 815 0346 80E0      		ldi r24,lo8(__c.1729)
GAS LISTING /var/tmp//ccskXpcw.s 			page 21


 816 0348 90E0      		ldi r25,hi8(__c.1729)
 817 034a 9F93      		push r25
 818 034c 8F93      		push r24
 819 034e DF92      		push r13
 820 0350 0E94 0000 		call rprintf1RamRom
 821 0354 82E0      		ldi r24,lo8(2)
 822 0356 0E94 0000 		call cmdlineGetArgHex
 823 035a 7B01      		movw r14,r22
 824 035c 8C01      		movw r16,r24
 825 035e 20E2      		ldi r18,lo8(32)
 826 0360 40E0      		ldi r20,lo8(0)
 827 0362 68E0      		ldi r22,lo8(8)
 828 0364 80E1      		ldi r24,lo8(16)
 829 0366 0E94 0000 		call rprintfNum
 830 036a 0E94 0000 		call rprintfCRLF
 252:cmdlinetest.c **** 	rprintf("Arg3 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(3)); rprintfCRLF();
 831               		.stabn	68,0,252,.LM57-dumpArgsHex
 832               	.LM57:
 833 036e 80E0      		ldi r24,lo8(__c.1731)
 834 0370 90E0      		ldi r25,hi8(__c.1731)
 835 0372 9F93      		push r25
 836 0374 8F93      		push r24
 837 0376 DF92      		push r13
 838 0378 0E94 0000 		call rprintf1RamRom
 839 037c 83E0      		ldi r24,lo8(3)
 840 037e 0E94 0000 		call cmdlineGetArgHex
 841 0382 7B01      		movw r14,r22
 842 0384 8C01      		movw r16,r24
 843 0386 20E2      		ldi r18,lo8(32)
 844 0388 40E0      		ldi r20,lo8(0)
 845 038a 68E0      		ldi r22,lo8(8)
 846 038c 80E1      		ldi r24,lo8(16)
 847 038e 0E94 0000 		call rprintfNum
 848 0392 0E94 0000 		call rprintfCRLF
 253:cmdlinetest.c **** 	rprintfCRLF();
 849               		.stabn	68,0,253,.LM58-dumpArgsHex
 850               	.LM58:
 851 0396 0E94 0000 		call rprintfCRLF
 852 039a 8DB7      		in r24,__SP_L__
 853 039c 9EB7      		in r25,__SP_H__
 854 039e 0C96      		adiw r24,12
 855 03a0 0FB6      		in __tmp_reg__,__SREG__
 856 03a2 F894      		cli
 857 03a4 9EBF      		out __SP_H__,r25
 858 03a6 0FBE      		out __SREG__,__tmp_reg__
 859 03a8 8DBF      		out __SP_L__,r24
 860               	/* epilogue: frame size=0 */
 861 03aa 1F91      		pop r17
 862 03ac 0F91      		pop r16
 863 03ae FF90      		pop r15
 864 03b0 EF90      		pop r14
 865 03b2 DF90      		pop r13
 866 03b4 0895      		ret
 867               	/* epilogue end (size=6) */
 868               	/* function dumpArgsHex size 92 (81) */
 869               		.size	dumpArgsHex, .-dumpArgsHex
 870               	.Lscope5:
GAS LISTING /var/tmp//ccskXpcw.s 			page 22


 871               		.stabs	"",36,0,0,.Lscope5-dumpArgsHex
 872               		.stabd	78,0,0
 873               		.stabs	"i2cSetup:F(0,15)",36,0,257,i2cSetup
 874               	.global	i2cSetup
 875               		.type	i2cSetup, @function
 876               	i2cSetup:
 877               		.stabd	46,0,0
 254:cmdlinetest.c **** }
 255:cmdlinetest.c **** 
 256:cmdlinetest.c **** void i2cSetup(void)
 257:cmdlinetest.c **** {
 878               		.stabn	68,0,257,.LM59-i2cSetup
 879               	.LM59:
 880               	/* prologue: frame size=0 */
 881               	/* prologue end (size=0) */
 258:cmdlinetest.c **** 	// initialize i2c function library
 259:cmdlinetest.c **** 	i2cInit();
 882               		.stabn	68,0,259,.LM60-i2cSetup
 883               	.LM60:
 884 03b6 0E94 0000 		call i2cInit
 260:cmdlinetest.c **** 	// set local device address and allow response to general call
 261:cmdlinetest.c **** 	i2cSetLocalDeviceAddr(LOCAL_ADDR, TRUE);
 885               		.stabn	68,0,261,.LM61-i2cSetup
 886               	.LM61:
 887 03ba 6FEF      		ldi r22,lo8(-1)
 888 03bc 80EA      		ldi r24,lo8(-96)
 889 03be 0E94 0000 		call i2cSetLocalDeviceAddr
 262:cmdlinetest.c **** 	// set the Slave Receive Handler function
 263:cmdlinetest.c **** 	// (this function will run whenever a master somewhere else on the bus
 264:cmdlinetest.c **** 	//  writes data to us as a slave)
 265:cmdlinetest.c **** 	i2cSetSlaveReceiveHandler( i2cSlaveReceiveService );
 890               		.stabn	68,0,265,.LM62-i2cSetup
 891               	.LM62:
 892 03c2 80E0      		ldi r24,lo8(pm(i2cSlaveReceiveService))
 893 03c4 90E0      		ldi r25,hi8(pm(i2cSlaveReceiveService))
 894 03c6 0E94 0000 		call i2cSetSlaveReceiveHandler
 266:cmdlinetest.c **** 	// set the Slave Transmit Handler function
 267:cmdlinetest.c **** 	// (this function will run whenever a master somewhere else on the bus
 268:cmdlinetest.c **** 	//  attempts to read data from us as a slave)
 269:cmdlinetest.c **** 	i2cSetSlaveTransmitHandler( i2cSlaveTransmitService );
 895               		.stabn	68,0,269,.LM63-i2cSetup
 896               	.LM63:
 897 03ca 80E0      		ldi r24,lo8(pm(i2cSlaveTransmitService))
 898 03cc 90E0      		ldi r25,hi8(pm(i2cSlaveTransmitService))
 899 03ce 0E94 0000 		call i2cSetSlaveTransmitHandler
 900               	/* epilogue: frame size=0 */
 901 03d2 0895      		ret
 902               	/* epilogue end (size=1) */
 903               	/* function i2cSetup size 15 (14) */
 904               		.size	i2cSetup, .-i2cSetup
 905               	.Lscope6:
 906               		.stabs	"",36,0,0,.Lscope6-i2cSetup
 907               		.stabd	78,0,0
 908               		.section	.progmem.data
 909               		.type	__c.1646, @object
 910               		.size	__c.1646, 55
 911               	__c.1646:
GAS LISTING /var/tmp//ccskXpcw.s 			page 23


 912 01fe 2A2A 2A2A 		.string	"**********************powerup*************************"
 912      2A2A 2A2A 
 912      2A2A 2A2A 
 912      2A2A 2A2A 
 912      2A2A 2A2A 
 913               		.text
 914               		.stabs	"main:F(0,1)",36,0,90,main
 915               	.global	main
 916               		.type	main, @function
 917               	main:
 918               		.stabd	46,0,0
 919               		.stabn	68,0,90,.LM64-main
 920               	.LM64:
 921               	/* prologue: frame size=0 */
 922 03d4 C0E0      		ldi r28,lo8(__stack - 0)
 923 03d6 D0E0      		ldi r29,hi8(__stack - 0)
 924 03d8 DEBF      		out __SP_H__,r29
 925 03da CDBF      		out __SP_L__,r28
 926               	/* prologue end (size=4) */
 927               		.stabn	68,0,93,.LM65-main
 928               	.LM65:
 929 03dc 0E94 0000 		call uartInit
 930               		.stabn	68,0,94,.LM66-main
 931               	.LM66:
 932 03e0 60E0      		ldi r22,lo8(57600)
 933 03e2 71EE      		ldi r23,hi8(57600)
 934 03e4 80E0      		ldi r24,hlo8(57600)
 935 03e6 90E0      		ldi r25,hhi8(57600)
 936 03e8 0E94 0000 		call uartSetBaudRate
 937               		.stabn	68,0,96,.LM67-main
 938               	.LM67:
 939 03ec 80E0      		ldi r24,lo8(pm(uartSendByte))
 940 03ee 90E0      		ldi r25,hi8(pm(uartSendByte))
 941 03f0 0E94 0000 		call rprintfInit
 942               		.stabn	68,0,98,.LM68-main
 943               	.LM68:
 944 03f4 0E94 0000 		call a2dInit
 945               		.stabn	68,0,100,.LM69-main
 946               	.LM69:
 947 03f8 0E94 0000 		call timerInit
 948               		.stabn	68,0,102,.LM70-main
 949               	.LM70:
 950 03fc 0E94 0000 		call vt100Init
 951               		.stabn	68,0,106,.LM71-main
 952               	.LM71:
 953 0400 84E6      		ldi r24,lo8(100)
 954 0402 90E0      		ldi r25,hi8(100)
 955 0404 0E94 0000 		call timerPause
 956               		.stabn	68,0,109,.LM72-main
 957               	.LM72:
 958 0408 0E94 0000 		call i2cSetup
 959               		.stabn	68,0,113,.LM73-main
 960               	.LM73:
 961 040c 0E94 0000 		call servoInit
 962               		.stabn	68,0,116,.LM74-main
 963               	.LM74:
 964 0410 42E0      		ldi r20,lo8(2)
GAS LISTING /var/tmp//ccskXpcw.s 			page 24


 965 0412 65E1      		ldi r22,lo8(21)
 966 0414 80E0      		ldi r24,lo8(0)
 967 0416 0E94 0000 		call servoSetChannelIO
 968               		.stabn	68,0,117,.LM75-main
 969               	.LM75:
 970 041a 43E0      		ldi r20,lo8(3)
 971 041c 65E1      		ldi r22,lo8(21)
 972 041e 81E0      		ldi r24,lo8(1)
 973 0420 0E94 0000 		call servoSetChannelIO
 974               		.stabn	68,0,118,.LM76-main
 975               	.LM76:
 976 0424 44E0      		ldi r20,lo8(4)
 977 0426 65E1      		ldi r22,lo8(21)
 978 0428 82E0      		ldi r24,lo8(2)
 979 042a 0E94 0000 		call servoSetChannelIO
 980               		.stabn	68,0,119,.LM77-main
 981               	.LM77:
 982 042e 45E0      		ldi r20,lo8(5)
 983 0430 65E1      		ldi r22,lo8(21)
 984 0432 83E0      		ldi r24,lo8(3)
 985 0434 0E94 0000 		call servoSetChannelIO
 986               		.stabn	68,0,120,.LM78-main
 987               	.LM78:
 988 0438 46E0      		ldi r20,lo8(6)
 989 043a 65E1      		ldi r22,lo8(21)
 990 043c 84E0      		ldi r24,lo8(4)
 991 043e 0E94 0000 		call servoSetChannelIO
 992               		.stabn	68,0,121,.LM79-main
 993               	.LM79:
 994 0442 47E0      		ldi r20,lo8(7)
 995 0444 65E1      		ldi r22,lo8(21)
 996 0446 85E0      		ldi r24,lo8(5)
 997 0448 0E94 0000 		call servoSetChannelIO
 998               		.stabn	68,0,123,.LM80-main
 999               	.LM80:
 1000 044c 8CEF      		ldi r24,lo8(-4)
 1001 044e 84BB      		out 52-0x20,r24
 1002               		.stabn	68,0,129,.LM81-main
 1003               	.LM81:
 1004 0450 80E0      		ldi r24,lo8(__c.1646)
 1005 0452 90E0      		ldi r25,hi8(__c.1646)
 1006 0454 9F93      		push r25
 1007 0456 8F93      		push r24
 1008 0458 81E0      		ldi r24,lo8(1)
 1009 045a 8F93      		push r24
 1010 045c 0E94 0000 		call rprintf1RamRom
 1011               		.stabn	68,0,133,.LM82-main
 1012               	.LM82:
 1013 0460 0E94 0000 		call goCmdline
 1014 0464 0F90      		pop __tmp_reg__
 1015 0466 0F90      		pop __tmp_reg__
 1016 0468 0F90      	 	pop __tmp_reg__
 1017               		.stabn	68,0,136,.LM83-main
 1018               	.LM83:
 1019 046a 80E0      		ldi r24,lo8(0)
 1020 046c 90E0      		ldi r25,hi8(0)
 1021               	/* epilogue: frame size=0 */
GAS LISTING /var/tmp//ccskXpcw.s 			page 25


 1022 046e 0C94 0000 		jmp exit
 1023               	/* epilogue end (size=2) */
 1024               	/* function main size 79 (73) */
 1025               		.size	main, .-main
 1026               	.Lscope7:
 1027               		.stabs	"",36,0,0,.Lscope7-main
 1028               		.stabd	78,0,0
 1029               		.stabs	"i2cSlaveReceiveService:F(0,15)",36,0,273,i2cSlaveReceiveService
 1030               		.stabs	"receiveDataLength:P(6,1)",64,0,272,25
 1031               		.stabs	"receiveData:P(0,16)=*(6,1)",64,0,272,26
 1032               	.global	i2cSlaveReceiveService
 1033               		.type	i2cSlaveReceiveService, @function
 1034               	i2cSlaveReceiveService:
 1035               		.stabd	46,0,0
 270:cmdlinetest.c **** }
 271:cmdlinetest.c **** // slave operations
 272:cmdlinetest.c **** void i2cSlaveReceiveService(u08 receiveDataLength, u08* receiveData)
 273:cmdlinetest.c **** {
 1036               		.stabn	68,0,273,.LM84-i2cSlaveReceiveService
 1037               	.LM84:
 1038               	/* prologue: frame size=0 */
 1039               	/* prologue end (size=0) */
 1040 0472 982F      		mov r25,r24
 1041 0474 DB01      		movw r26,r22
 1042 0476 20E0      		ldi r18,lo8(0)
 1043 0478 30E0      		ldi r19,hi8(0)
 1044 047a 07C0      		rjmp .L32
 1045               	.L33:
 274:cmdlinetest.c **** 	u08 i;
 275:cmdlinetest.c **** 
 276:cmdlinetest.c **** 	// this function will run when a master somewhere else on the bus
 277:cmdlinetest.c **** 	// addresses us and wishes to write data to us
 278:cmdlinetest.c **** 
 279:cmdlinetest.c **** 	// copy the received data to a local buffer
 280:cmdlinetest.c **** 	for(i=0; i<receiveDataLength; i++)
 281:cmdlinetest.c **** 	{
 282:cmdlinetest.c **** 		slaveBuffer[i] = *receiveData++;
 1046               		.stabn	68,0,282,.LM85-i2cSlaveReceiveService
 1047               	.LM85:
 1048 047c FF27      		clr r31
 1049 047e E050      		subi r30,lo8(-(slaveBuffer))
 1050 0480 F040      		sbci r31,hi8(-(slaveBuffer))
 1051 0482 8D91      		ld r24,X+
 1052 0484 8083      		st Z,r24
 1053 0486 2F5F      		subi r18,lo8(-(1))
 1054 0488 3F4F      		sbci r19,hi8(-(1))
 1055               	.L32:
 1056 048a E22F      		mov r30,r18
 1057               		.stabn	68,0,280,.LM86-i2cSlaveReceiveService
 1058               	.LM86:
 1059 048c 2917      		cp r18,r25
 1060 048e B0F3      		brlo .L33
 283:cmdlinetest.c **** 	}
 284:cmdlinetest.c **** 	slaveBufferLength = receiveDataLength;
 1061               		.stabn	68,0,284,.LM87-i2cSlaveReceiveService
 1062               	.LM87:
 1063 0490 9093 0000 		sts slaveBufferLength,r25
GAS LISTING /var/tmp//ccskXpcw.s 			page 26


 1064               	/* epilogue: frame size=0 */
 1065 0494 0895      		ret
 1066               	/* epilogue end (size=1) */
 1067               	/* function i2cSlaveReceiveService size 18 (17) */
 1068               		.size	i2cSlaveReceiveService, .-i2cSlaveReceiveService
 1069               		.stabs	"i:r(6,1)",64,0,274,30
 1070               		.stabn	192,0,0,i2cSlaveReceiveService-i2cSlaveReceiveService
 1071               		.stabn	224,0,0,.Lscope8-i2cSlaveReceiveService
 1072               	.Lscope8:
 1073               		.stabs	"",36,0,0,.Lscope8-i2cSlaveReceiveService
 1074               		.stabd	78,0,0
 1075               		.stabs	"i2cSlaveTransmitService:F(6,1)",36,0,293,i2cSlaveTransmitService
 1076               		.stabs	"transmitDataLengthMax:P(6,1)",64,0,292,24
 1077               		.stabs	"transmitData:P(0,16)",64,0,292,22
 1078               	.global	i2cSlaveTransmitService
 1079               		.type	i2cSlaveTransmitService, @function
 1080               	i2cSlaveTransmitService:
 1081               		.stabd	46,0,0
 285:cmdlinetest.c **** 	// print the buffer
 286:cmdlinetest.c **** //	for(i=0;i<slaveBufferLength;i++)
 287:cmdlinetest.c **** //	{
 288:cmdlinetest.c **** //		putchar(slaveBuffer[i]);
 289:cmdlinetest.c **** //	}
 290:cmdlinetest.c **** }
 291:cmdlinetest.c **** 
 292:cmdlinetest.c **** u08 i2cSlaveTransmitService(u08 transmitDataLengthMax, u08* transmitData)
 293:cmdlinetest.c **** {
 1082               		.stabn	68,0,293,.LM88-i2cSlaveTransmitService
 1083               	.LM88:
 1084               	/* prologue: frame size=0 */
 1085               	/* prologue end (size=0) */
 294:cmdlinetest.c **** 	u08 i;
 295:cmdlinetest.c **** 
 296:cmdlinetest.c **** 	// this function will run when a master somewhere else on the bus
 297:cmdlinetest.c **** 	// addresses us and wishes to read data from us
 298:cmdlinetest.c **** 
 299:cmdlinetest.c **** 	cbi(PORTB, PB7);
 1086               		.stabn	68,0,299,.LM89-i2cSlaveTransmitService
 1087               	.LM89:
 1088 0496 C798      		cbi 56-0x20,7
 1089 0498 DB01      		movw r26,r22
 1090 049a 05C0      		rjmp .L37
 1091               	.L38:
 300:cmdlinetest.c **** 
 301:cmdlinetest.c **** 	// copy the local buffer to the transmit buffer
 302:cmdlinetest.c **** 	for(i=0; i<slaveBufferLength; i++)
 303:cmdlinetest.c **** 	{
 304:cmdlinetest.c **** 		*transmitData++ = slaveBuffer[i];
 1092               		.stabn	68,0,304,.LM90-i2cSlaveTransmitService
 1093               	.LM90:
 1094 049c FF27      		clr r31
 1095 049e E050      		subi r30,lo8(-(slaveBuffer))
 1096 04a0 F040      		sbci r31,hi8(-(slaveBuffer))
 1097 04a2 8081      		ld r24,Z
 1098 04a4 8D93      		st X+,r24
 1099               	.L37:
 1100 04a6 EA2F      		mov r30,r26
GAS LISTING /var/tmp//ccskXpcw.s 			page 27


 1101 04a8 E61B      		sub r30,r22
 1102               		.stabn	68,0,302,.LM91-i2cSlaveTransmitService
 1103               	.LM91:
 1104 04aa 9091 0000 		lds r25,slaveBufferLength
 1105 04ae E917      		cp r30,r25
 1106 04b0 A8F3      		brlo .L38
 305:cmdlinetest.c **** 	}
 306:cmdlinetest.c **** 
 307:cmdlinetest.c **** 	slaveBuffer[0]++;
 1107               		.stabn	68,0,307,.LM92-i2cSlaveTransmitService
 1108               	.LM92:
 1109 04b2 8091 0000 		lds r24,slaveBuffer
 1110 04b6 8F5F      		subi r24,lo8(-(1))
 1111 04b8 8093 0000 		sts slaveBuffer,r24
 308:cmdlinetest.c **** 
 309:cmdlinetest.c **** 	return slaveBufferLength;
 310:cmdlinetest.c **** }
 1112               		.stabn	68,0,310,.LM93-i2cSlaveTransmitService
 1113               	.LM93:
 1114 04bc 892F      		mov r24,r25
 1115 04be 9927      		clr r25
 1116               	/* epilogue: frame size=0 */
 1117 04c0 0895      		ret
 1118               	/* epilogue end (size=1) */
 1119               	/* function i2cSlaveTransmitService size 22 (21) */
 1120               		.size	i2cSlaveTransmitService, .-i2cSlaveTransmitService
 1121               		.stabs	"i:r(6,1)",64,0,294,30
 1122               		.stabn	192,0,0,i2cSlaveTransmitService-i2cSlaveTransmitService
 1123               		.stabn	224,0,0,.Lscope9-i2cSlaveTransmitService
 1124               	.Lscope9:
 1125               		.stabs	"",36,0,0,.Lscope9-i2cSlaveTransmitService
 1126               		.stabd	78,0,0
 1127               		.stabs	"i2cMasterSendDiag:F(0,15)",36,0,313,i2cMasterSendDiag
 1128               		.stabs	"deviceAddr:P(6,1)",64,0,312,17
 1129               		.stabs	"length:P(6,1)",64,0,312,16
 1130               		.stabs	"data:P(0,16)",64,0,312,28
 1131               	.global	i2cMasterSendDiag
 1132               		.type	i2cMasterSendDiag, @function
 1133               	i2cMasterSendDiag:
 1134               		.stabd	46,0,0
 311:cmdlinetest.c **** 
 312:cmdlinetest.c **** void i2cMasterSendDiag(u08 deviceAddr, u08 length, u08* data)
 313:cmdlinetest.c **** {
 1135               		.stabn	68,0,313,.LM94-i2cMasterSendDiag
 1136               	.LM94:
 1137               	/* prologue: frame size=0 */
 1138 04c2 0F93      		push r16
 1139 04c4 1F93      		push r17
 1140 04c6 CF93      		push r28
 1141 04c8 DF93      		push r29
 1142               	/* prologue end (size=4) */
 1143 04ca 182F      		mov r17,r24
 1144 04cc 062F      		mov r16,r22
 1145 04ce EA01      		movw r28,r20
 314:cmdlinetest.c **** 	// this function is equivalent to the i2cMasterSendNI() in the I2C library
 315:cmdlinetest.c **** 	// except it will print information about transmission progress to the terminal
 316:cmdlinetest.c **** 
GAS LISTING /var/tmp//ccskXpcw.s 			page 28


 317:cmdlinetest.c **** 	// disable TWI interrupt
 318:cmdlinetest.c **** 	cbi(TWCR, TWIE);
 1146               		.stabn	68,0,318,.LM95-i2cMasterSendDiag
 1147               	.LM95:
 1148 04d0 86B7      		in r24,86-0x20
 1149 04d2 8E7F      		andi r24,lo8(-2)
 1150 04d4 86BF      		out 86-0x20,r24
 319:cmdlinetest.c **** 
 320:cmdlinetest.c **** 	// send start condition
 321:cmdlinetest.c **** 	i2cSendStart();
 1151               		.stabn	68,0,321,.LM96-i2cMasterSendDiag
 1152               	.LM96:
 1153 04d6 0E94 0000 		call i2cSendStart
 322:cmdlinetest.c **** 	i2cWaitForComplete();
 1154               		.stabn	68,0,322,.LM97-i2cMasterSendDiag
 1155               	.LM97:
 1156 04da 0E94 0000 		call i2cWaitForComplete
 323:cmdlinetest.c **** 	//rprintf(("STA-")));
 324:cmdlinetest.c **** 
 325:cmdlinetest.c **** 	// send device address with write
 326:cmdlinetest.c **** 	i2cSendByte( deviceAddr&0xFE );
 1157               		.stabn	68,0,326,.LM98-i2cMasterSendDiag
 1158               	.LM98:
 1159 04de 812F      		mov r24,r17
 1160 04e0 8E7F      		andi r24,lo8(-2)
 1161 04e2 0E94 0000 		call i2cSendByte
 327:cmdlinetest.c **** 	i2cWaitForComplete();
 1162               		.stabn	68,0,327,.LM99-i2cMasterSendDiag
 1163               	.LM99:
 1164 04e6 0E94 0000 		call i2cWaitForComplete
 1165 04ea 10E0      		ldi r17,lo8(0)
 1166 04ec 06C0      		rjmp .L42
 1167               	.L43:
 328:cmdlinetest.c **** 	//rprintf(("SLA+W-")));
 329:cmdlinetest.c **** 	
 330:cmdlinetest.c **** 	// send data
 331:cmdlinetest.c **** 	while(length)
 332:cmdlinetest.c **** 	{
 333:cmdlinetest.c **** 		i2cSendByte( *data++ );
 1168               		.stabn	68,0,333,.LM100-i2cMasterSendDiag
 1169               	.LM100:
 1170 04ee 8991      		ld r24,Y+
 1171 04f0 0E94 0000 		call i2cSendByte
 334:cmdlinetest.c **** 		i2cWaitForComplete();
 1172               		.stabn	68,0,334,.LM101-i2cMasterSendDiag
 1173               	.LM101:
 1174 04f4 0E94 0000 		call i2cWaitForComplete
 1175 04f8 1150      		subi r17,lo8(-(-1))
 1176               	.L42:
 1177               		.stabn	68,0,331,.LM102-i2cMasterSendDiag
 1178               	.LM102:
 1179 04fa 802F      		mov r24,r16
 1180 04fc 8195      		neg r24
 1181 04fe 1817      		cp r17,r24
 1182 0500 B1F7      		brne .L43
 335:cmdlinetest.c **** 		//rprintf(("DATA-")));
 336:cmdlinetest.c **** 		length--;
GAS LISTING /var/tmp//ccskXpcw.s 			page 29


 337:cmdlinetest.c **** 	}
 338:cmdlinetest.c **** 	
 339:cmdlinetest.c **** 	// transmit stop condition
 340:cmdlinetest.c **** 	// leave with TWEA on for slave receiving
 341:cmdlinetest.c **** 	i2cSendStop();
 1183               		.stabn	68,0,341,.LM103-i2cMasterSendDiag
 1184               	.LM103:
 1185 0502 0E94 0000 		call i2cSendStop
 1186               	.L45:
 342:cmdlinetest.c **** 	while( !(inb(TWCR) & BV(TWSTO)) );
 1187               		.stabn	68,0,342,.LM104-i2cMasterSendDiag
 1188               	.LM104:
 1189 0506 06B6      		in __tmp_reg__,86-0x20
 1190 0508 04FE      		sbrs __tmp_reg__,4
 1191 050a FDCF      		rjmp .L45
 343:cmdlinetest.c **** 	//rprintf(("STO")));
 344:cmdlinetest.c **** 
 345:cmdlinetest.c **** 	// enable TWI interrupt
 346:cmdlinetest.c **** 	sbi(TWCR, TWIE);
 1192               		.stabn	68,0,346,.LM105-i2cMasterSendDiag
 1193               	.LM105:
 1194 050c 86B7      		in r24,86-0x20
 1195 050e 8160      		ori r24,lo8(1)
 1196 0510 86BF      		out 86-0x20,r24
 1197               	/* epilogue: frame size=0 */
 1198 0512 DF91      		pop r29
 1199 0514 CF91      		pop r28
 1200 0516 1F91      		pop r17
 1201 0518 0F91      		pop r16
 1202 051a 0895      		ret
 1203               	/* epilogue end (size=5) */
 1204               	/* function i2cMasterSendDiag size 45 (36) */
 1205               		.size	i2cMasterSendDiag, .-i2cMasterSendDiag
 1206               	.Lscope10:
 1207               		.stabs	"",36,0,0,.Lscope10-i2cMasterSendDiag
 1208               		.stabd	78,0,0
 1209               		.stabs	"i2cMaster_Send:F(0,15)",36,0,350,i2cMaster_Send
 1210               	.global	i2cMaster_Send
 1211               		.type	i2cMaster_Send, @function
 1212               	i2cMaster_Send:
 1213               		.stabd	46,0,0
 347:cmdlinetest.c **** }
 348:cmdlinetest.c **** 
 349:cmdlinetest.c **** void i2cMaster_Send(void)
 350:cmdlinetest.c **** {
 1214               		.stabn	68,0,350,.LM106-i2cMaster_Send
 1215               	.LM106:
 1216               	/* prologue: frame size=20 */
 1217 051c 0F93      		push r16
 1218 051e 1F93      		push r17
 1219 0520 CF93      		push r28
 1220 0522 DF93      		push r29
 1221 0524 CDB7      		in r28,__SP_L__
 1222 0526 DEB7      		in r29,__SP_H__
 1223 0528 6497      		sbiw r28,20
 1224 052a 0FB6      		in __tmp_reg__,__SREG__
 1225 052c F894      		cli
GAS LISTING /var/tmp//ccskXpcw.s 			page 30


 1226 052e DEBF      		out __SP_H__,r29
 1227 0530 0FBE      		out __SREG__,__tmp_reg__
 1228 0532 CDBF      		out __SP_L__,r28
 1229               	/* prologue end (size=12) */
 351:cmdlinetest.c **** 	u08 sendData[20];
 352:cmdlinetest.c **** 	strcpy(sendData, cmdlineGetArgStr(1));
 1230               		.stabn	68,0,352,.LM107-i2cMaster_Send
 1231               	.LM107:
 1232 0534 81E0      		ldi r24,lo8(1)
 1233 0536 0E94 0000 		call cmdlineGetArgStr
 1234 053a 8E01      		movw r16,r28
 1235 053c 0F5F      		subi r16,lo8(-(1))
 1236 053e 1F4F      		sbci r17,hi8(-(1))
 1237 0540 BC01      		movw r22,r24
 1238 0542 C801      		movw r24,r16
 1239 0544 0E94 0000 		call strcpy
 353:cmdlinetest.c **** 	i2cMasterSend(TARGET_ADDR, 0x02, sendData);
 1240               		.stabn	68,0,353,.LM108-i2cMaster_Send
 1241               	.LM108:
 1242 0548 A801      		movw r20,r16
 1243 054a 62E0      		ldi r22,lo8(2)
 1244 054c 80EA      		ldi r24,lo8(-96)
 1245 054e 0E94 0000 		call i2cMasterSend
 1246               	/* epilogue: frame size=20 */
 1247 0552 6496      		adiw r28,20
 1248 0554 0FB6      		in __tmp_reg__,__SREG__
 1249 0556 F894      		cli
 1250 0558 DEBF      		out __SP_H__,r29
 1251 055a 0FBE      		out __SREG__,__tmp_reg__
 1252 055c CDBF      		out __SP_L__,r28
 1253 055e DF91      		pop r29
 1254 0560 CF91      		pop r28
 1255 0562 1F91      		pop r17
 1256 0564 0F91      		pop r16
 1257 0566 0895      		ret
 1258               	/* epilogue end (size=11) */
 1259               	/* function i2cMaster_Send size 38 (15) */
 1260               		.size	i2cMaster_Send, .-i2cMaster_Send
 1261               		.stabs	"sendData:(0,17)=ar(0,18)=r(0,18);0;0177777;;0;19;(6,1)",128,0,351,1
 1262               		.stabn	192,0,0,i2cMaster_Send-i2cMaster_Send
 1263               		.stabn	224,0,0,.Lscope11-i2cMaster_Send
 1264               	.Lscope11:
 1265               		.stabs	"",36,0,0,.Lscope11-i2cMaster_Send
 1266               		.stabd	78,0,0
 1267               		.stabs	"i2cMaster_Auto_Send:F(0,15)",36,0,357,i2cMaster_Auto_Send
 1268               		.stabs	"message:P(6,1)",64,0,356,24
 1269               	.global	i2cMaster_Auto_Send
 1270               		.type	i2cMaster_Auto_Send, @function
 1271               	i2cMaster_Auto_Send:
 1272               		.stabd	46,0,0
 354:cmdlinetest.c **** //	putchar(sendData[0]);
 355:cmdlinetest.c **** }
 356:cmdlinetest.c **** void i2cMaster_Auto_Send(u08 message)
 357:cmdlinetest.c **** {
 1273               		.stabn	68,0,357,.LM109-i2cMaster_Auto_Send
 1274               	.LM109:
 1275               	/* prologue: frame size=2 */
GAS LISTING /var/tmp//ccskXpcw.s 			page 31


 1276 0568 CF93      		push r28
 1277 056a DF93      		push r29
 1278 056c CDB7      		in r28,__SP_L__
 1279 056e DEB7      		in r29,__SP_H__
 1280 0570 2297      		sbiw r28,2
 1281 0572 0FB6      		in __tmp_reg__,__SREG__
 1282 0574 F894      		cli
 1283 0576 DEBF      		out __SP_H__,r29
 1284 0578 0FBE      		out __SREG__,__tmp_reg__
 1285 057a CDBF      		out __SP_L__,r28
 1286               	/* prologue end (size=10) */
 358:cmdlinetest.c **** 	u08 sendData[2];
 359:cmdlinetest.c **** 	sendData[0] = message;
 1287               		.stabn	68,0,359,.LM110-i2cMaster_Auto_Send
 1288               	.LM110:
 1289 057c 8983      		std Y+1,r24
 360:cmdlinetest.c **** 	sendData[1] = '\0';
 1290               		.stabn	68,0,360,.LM111-i2cMaster_Auto_Send
 1291               	.LM111:
 1292 057e 1A82      		std Y+2,__zero_reg__
 361:cmdlinetest.c **** 	i2cMasterSend(TARGET_ADDR, 0x02, sendData);
 1293               		.stabn	68,0,361,.LM112-i2cMaster_Auto_Send
 1294               	.LM112:
 1295 0580 AE01      		movw r20,r28
 1296 0582 4F5F      		subi r20,lo8(-(1))
 1297 0584 5F4F      		sbci r21,hi8(-(1))
 1298 0586 62E0      		ldi r22,lo8(2)
 1299 0588 80EA      		ldi r24,lo8(-96)
 1300 058a 0E94 0000 		call i2cMasterSend
 1301               	/* epilogue: frame size=2 */
 1302 058e 2296      		adiw r28,2
 1303 0590 0FB6      		in __tmp_reg__,__SREG__
 1304 0592 F894      		cli
 1305 0594 DEBF      		out __SP_H__,r29
 1306 0596 0FBE      		out __SREG__,__tmp_reg__
 1307 0598 CDBF      		out __SP_L__,r28
 1308 059a DF91      		pop r29
 1309 059c CF91      		pop r28
 1310 059e 0895      		ret
 1311               	/* epilogue end (size=9) */
 1312               	/* function i2cMaster_Auto_Send size 28 (9) */
 1313               		.size	i2cMaster_Auto_Send, .-i2cMaster_Auto_Send
 1314               		.stabs	"sendData:(0,19)=ar(0,18);0;1;(6,1)",128,0,358,1
 1315               		.stabn	192,0,0,i2cMaster_Auto_Send-i2cMaster_Auto_Send
 1316               		.stabn	224,0,0,.Lscope12-i2cMaster_Auto_Send
 1317               	.Lscope12:
 1318               		.stabs	"",36,0,0,.Lscope12-i2cMaster_Auto_Send
 1319               		.stabd	78,0,0
 1320               		.section	.progmem.data
 1321               		.type	__c.1806, @object
 1322               		.size	__c.1806, 2
 1323               	__c.1806:
 1324 0235 2C00      		.string	","
 1325               		.type	__c.1804, @object
 1326               		.size	__c.1804, 2
 1327               	__c.1804:
 1328 0237 2000      		.string	" "
GAS LISTING /var/tmp//ccskXpcw.s 			page 32


 1329               		.text
 1330               		.stabs	"i2cMaster_Receive:F(0,15)",36,0,364,i2cMaster_Receive
 1331               	.global	i2cMaster_Receive
 1332               		.type	i2cMaster_Receive, @function
 1333               	i2cMaster_Receive:
 1334               		.stabd	46,0,0
 362:cmdlinetest.c **** }
 363:cmdlinetest.c **** void i2cMaster_Receive(void)
 364:cmdlinetest.c **** {	
 1335               		.stabn	68,0,364,.LM113-i2cMaster_Receive
 1336               	.LM113:
 1337               	/* prologue: frame size=20 */
 1338 05a0 EF92      		push r14
 1339 05a2 FF92      		push r15
 1340 05a4 0F93      		push r16
 1341 05a6 1F93      		push r17
 1342 05a8 CF93      		push r28
 1343 05aa DF93      		push r29
 1344 05ac CDB7      		in r28,__SP_L__
 1345 05ae DEB7      		in r29,__SP_H__
 1346 05b0 6497      		sbiw r28,20
 1347 05b2 0FB6      		in __tmp_reg__,__SREG__
 1348 05b4 F894      		cli
 1349 05b6 DEBF      		out __SP_H__,r29
 1350 05b8 0FBE      		out __SREG__,__tmp_reg__
 1351 05ba CDBF      		out __SP_L__,r28
 1352               	/* prologue end (size=14) */
 365:cmdlinetest.c **** 	u08 command[20];
 366:cmdlinetest.c **** 	strcpy(command, cmdlineGetArgStr(1));
 1353               		.stabn	68,0,366,.LM114-i2cMaster_Receive
 1354               	.LM114:
 1355 05bc 81E0      		ldi r24,lo8(1)
 1356 05be 0E94 0000 		call cmdlineGetArgStr
 1357 05c2 8E01      		movw r16,r28
 1358 05c4 0F5F      		subi r16,lo8(-(1))
 1359 05c6 1F4F      		sbci r17,hi8(-(1))
 1360 05c8 BC01      		movw r22,r24
 1361 05ca C801      		movw r24,r16
 1362 05cc 0E94 0000 		call strcpy
 367:cmdlinetest.c **** 	
 368:cmdlinetest.c **** 	i2cMasterReceive(TARGET_ADDR, slaveBufferLength, slaveBuffer);
 1363               		.stabn	68,0,368,.LM115-i2cMaster_Receive
 1364               	.LM115:
 1365 05d0 20E0      		ldi r18,lo8(slaveBuffer)
 1366 05d2 E22E      		mov r14,r18
 1367 05d4 20E0      		ldi r18,hi8(slaveBuffer)
 1368 05d6 F22E      		mov r15,r18
 1369 05d8 A701      		movw r20,r14
 1370 05da 6091 0000 		lds r22,slaveBufferLength
 1371 05de 80EA      		ldi r24,lo8(-96)
 1372 05e0 0E94 0000 		call i2cMasterReceive
 369:cmdlinetest.c **** 	slaveBuffer[0x19] = 0;
 1373               		.stabn	68,0,369,.LM116-i2cMaster_Receive
 1374               	.LM116:
 1375 05e4 1092 0000 		sts slaveBuffer+25,__zero_reg__
 370:cmdlinetest.c **** 	rprintfStr(command);
 1376               		.stabn	68,0,370,.LM117-i2cMaster_Receive
GAS LISTING /var/tmp//ccskXpcw.s 			page 33


 1377               	.LM117:
 1378 05e8 C801      		movw r24,r16
 1379 05ea 0E94 0000 		call rprintfStr
 371:cmdlinetest.c **** 	rprintf(" ");
 1380               		.stabn	68,0,371,.LM118-i2cMaster_Receive
 1381               	.LM118:
 1382 05ee 80E0      		ldi r24,lo8(__c.1804)
 1383 05f0 90E0      		ldi r25,hi8(__c.1804)
 1384 05f2 9F93      		push r25
 1385 05f4 8F93      		push r24
 1386 05f6 11E0      		ldi r17,lo8(1)
 1387 05f8 1F93      		push r17
 1388 05fa 0E94 0000 		call rprintf1RamRom
 372:cmdlinetest.c **** 	rprintfStr(slaveBuffer);
 1389               		.stabn	68,0,372,.LM119-i2cMaster_Receive
 1390               	.LM119:
 1391 05fe C701      		movw r24,r14
 1392 0600 0E94 0000 		call rprintfStr
 373:cmdlinetest.c **** 	rprintf(",");
 1393               		.stabn	68,0,373,.LM120-i2cMaster_Receive
 1394               	.LM120:
 1395 0604 80E0      		ldi r24,lo8(__c.1806)
 1396 0606 90E0      		ldi r25,hi8(__c.1806)
 1397 0608 9F93      		push r25
 1398 060a 8F93      		push r24
 1399 060c 1F93      		push r17
 1400 060e 0E94 0000 		call rprintf1RamRom
 1401 0612 8DB7      		in r24,__SP_L__
 1402 0614 9EB7      		in r25,__SP_H__
 1403 0616 0696      		adiw r24,6
 1404 0618 0FB6      		in __tmp_reg__,__SREG__
 1405 061a F894      		cli
 1406 061c 9EBF      		out __SP_H__,r25
 1407 061e 0FBE      		out __SREG__,__tmp_reg__
 1408 0620 8DBF      		out __SP_L__,r24
 1409               	/* epilogue: frame size=20 */
 1410 0622 6496      		adiw r28,20
 1411 0624 0FB6      		in __tmp_reg__,__SREG__
 1412 0626 F894      		cli
 1413 0628 DEBF      		out __SP_H__,r29
 1414 062a 0FBE      		out __SREG__,__tmp_reg__
 1415 062c CDBF      		out __SP_L__,r28
 1416 062e DF91      		pop r29
 1417 0630 CF91      		pop r28
 1418 0632 1F91      		pop r17
 1419 0634 0F91      		pop r16
 1420 0636 FF90      		pop r15
 1421 0638 EF90      		pop r14
 1422 063a 0895      		ret
 1423               	/* epilogue end (size=13) */
 1424               	/* function i2cMaster_Receive size 78 (51) */
 1425               		.size	i2cMaster_Receive, .-i2cMaster_Receive
 1426               		.stabs	"command:(0,17)",128,0,365,1
 1427               		.stabn	192,0,0,i2cMaster_Receive-i2cMaster_Receive
 1428               		.stabn	224,0,0,.Lscope13-i2cMaster_Receive
 1429               	.Lscope13:
 1430               		.stabs	"",36,0,0,.Lscope13-i2cMaster_Receive
GAS LISTING /var/tmp//ccskXpcw.s 			page 34


 1431               		.stabd	78,0,0
 1432               		.section	.progmem.data
 1433               		.type	__c.1818, @object
 1434               		.size	__c.1818, 2
 1435               	__c.1818:
 1436 0239 2C00      		.string	","
 1437               		.type	__c.1816, @object
 1438               		.size	__c.1816, 2
 1439               	__c.1816:
 1440 023b 2000      		.string	" "
 1441               		.text
 1442               		.stabs	"i2cMaster_Auto_Receive:F(0,15)",36,0,377,i2cMaster_Auto_Receive
 1443               		.stabs	"command:P(6,1)",64,0,376,15
 1444               	.global	i2cMaster_Auto_Receive
 1445               		.type	i2cMaster_Auto_Receive, @function
 1446               	i2cMaster_Auto_Receive:
 1447               		.stabd	46,0,0
 374:cmdlinetest.c **** 	
 375:cmdlinetest.c **** }
 376:cmdlinetest.c **** void i2cMaster_Auto_Receive(u08 command)
 377:cmdlinetest.c **** {
 1448               		.stabn	68,0,377,.LM121-i2cMaster_Auto_Receive
 1449               	.LM121:
 1450               	/* prologue: frame size=0 */
 1451 063c FF92      		push r15
 1452 063e 0F93      		push r16
 1453 0640 1F93      		push r17
 1454               	/* prologue end (size=3) */
 1455 0642 F82E      		mov r15,r24
 378:cmdlinetest.c **** 	i2cMasterReceive(TARGET_ADDR, slaveBufferLength, slaveBuffer);
 1456               		.stabn	68,0,378,.LM122-i2cMaster_Auto_Receive
 1457               	.LM122:
 1458 0644 00E0      		ldi r16,lo8(slaveBuffer)
 1459 0646 10E0      		ldi r17,hi8(slaveBuffer)
 1460 0648 A801      		movw r20,r16
 1461 064a 6091 0000 		lds r22,slaveBufferLength
 1462 064e 80EA      		ldi r24,lo8(-96)
 1463 0650 0E94 0000 		call i2cMasterReceive
 379:cmdlinetest.c **** 	
 380:cmdlinetest.c **** 	slaveBuffer[0x19] = 0;
 1464               		.stabn	68,0,380,.LM123-i2cMaster_Auto_Receive
 1465               	.LM123:
 1466 0654 1092 0000 		sts slaveBuffer+25,__zero_reg__
 381:cmdlinetest.c **** 	rprintfStr(command);
 1467               		.stabn	68,0,381,.LM124-i2cMaster_Auto_Receive
 1468               	.LM124:
 1469 0658 8F2D      		mov r24,r15
 1470 065a 9927      		clr r25
 1471 065c 0E94 0000 		call rprintfStr
 382:cmdlinetest.c **** 	rprintf(" ");
 1472               		.stabn	68,0,382,.LM125-i2cMaster_Auto_Receive
 1473               	.LM125:
 1474 0660 80E0      		ldi r24,lo8(__c.1816)
 1475 0662 90E0      		ldi r25,hi8(__c.1816)
 1476 0664 9F93      		push r25
 1477 0666 8F93      		push r24
 1478 0668 31E0      		ldi r19,lo8(1)
GAS LISTING /var/tmp//ccskXpcw.s 			page 35


 1479 066a F32E      		mov r15,r19
 1480 066c FF92      		push r15
 1481 066e 0E94 0000 		call rprintf1RamRom
 383:cmdlinetest.c **** 	rprintfStr(slaveBuffer);
 1482               		.stabn	68,0,383,.LM126-i2cMaster_Auto_Receive
 1483               	.LM126:
 1484 0672 C801      		movw r24,r16
 1485 0674 0E94 0000 		call rprintfStr
 384:cmdlinetest.c **** 	rprintf(",");
 1486               		.stabn	68,0,384,.LM127-i2cMaster_Auto_Receive
 1487               	.LM127:
 1488 0678 80E0      		ldi r24,lo8(__c.1818)
 1489 067a 90E0      		ldi r25,hi8(__c.1818)
 1490 067c 9F93      		push r25
 1491 067e 8F93      		push r24
 1492 0680 FF92      		push r15
 1493 0682 0E94 0000 		call rprintf1RamRom
 1494 0686 8DB7      		in r24,__SP_L__
 1495 0688 9EB7      		in r25,__SP_H__
 1496 068a 0696      		adiw r24,6
 1497 068c 0FB6      		in __tmp_reg__,__SREG__
 1498 068e F894      		cli
 1499 0690 9EBF      		out __SP_H__,r25
 1500 0692 0FBE      		out __SREG__,__tmp_reg__
 1501 0694 8DBF      		out __SP_L__,r24
 1502               	/* epilogue: frame size=0 */
 1503 0696 1F91      		pop r17
 1504 0698 0F91      		pop r16
 1505 069a FF90      		pop r15
 1506 069c 0895      		ret
 1507               	/* epilogue end (size=4) */
 1508               	/* function i2cMaster_Auto_Receive size 49 (42) */
 1509               		.size	i2cMaster_Auto_Receive, .-i2cMaster_Auto_Receive
 1510               	.Lscope14:
 1511               		.stabs	"",36,0,0,.Lscope14-i2cMaster_Auto_Receive
 1512               		.stabd	78,0,0
 1513               		.stabs	"setLeftServo:F(0,15)",36,0,387,setLeftServo
 1514               	.global	setLeftServo
 1515               		.type	setLeftServo, @function
 1516               	setLeftServo:
 1517               		.stabd	46,0,0
 385:cmdlinetest.c **** }
 386:cmdlinetest.c **** void setLeftServo(void)
 387:cmdlinetest.c **** {	
 1518               		.stabn	68,0,387,.LM128-setLeftServo
 1519               	.LM128:
 1520               	/* prologue: frame size=0 */
 1521               	/* prologue end (size=0) */
 388:cmdlinetest.c **** 	leftServoPos = (unsigned char) cmdlineGetArgInt(1);
 1522               		.stabn	68,0,388,.LM129-setLeftServo
 1523               	.LM129:
 1524 069e 81E0      		ldi r24,lo8(1)
 1525 06a0 0E94 0000 		call cmdlineGetArgInt
 1526 06a4 6093 0000 		sts leftServoPos,r22
 389:cmdlinetest.c **** 	servoSetPosition(LEFT_SERVO_CHAN, leftServoPos);
 1527               		.stabn	68,0,389,.LM130-setLeftServo
 1528               	.LM130:
GAS LISTING /var/tmp//ccskXpcw.s 			page 36


 1529 06a8 84E0      		ldi r24,lo8(4)
 1530 06aa 0E94 0000 		call servoSetPosition
 1531               	/* epilogue: frame size=0 */
 1532 06ae 0895      		ret
 1533               	/* epilogue end (size=1) */
 1534               	/* function setLeftServo size 9 (8) */
 1535               		.size	setLeftServo, .-setLeftServo
 1536               	.Lscope15:
 1537               		.stabs	"",36,0,0,.Lscope15-setLeftServo
 1538               		.stabd	78,0,0
 1539               		.stabs	"setRightServo:F(0,15)",36,0,396,setRightServo
 1540               	.global	setRightServo
 1541               		.type	setRightServo, @function
 1542               	setRightServo:
 1543               		.stabd	46,0,0
 390:cmdlinetest.c **** #ifdef DEBUG	
 391:cmdlinetest.c **** 		rprintf("e0\r\n");
 392:cmdlinetest.c **** #endif DEBUG
 393:cmdlinetest.c **** }
 394:cmdlinetest.c **** 
 395:cmdlinetest.c **** void setRightServo(void)
 396:cmdlinetest.c **** {	
 1544               		.stabn	68,0,396,.LM131-setRightServo
 1545               	.LM131:
 1546               	/* prologue: frame size=0 */
 1547               	/* prologue end (size=0) */
 397:cmdlinetest.c **** 	rightServoPos = (unsigned char) cmdlineGetArgInt(1);
 1548               		.stabn	68,0,397,.LM132-setRightServo
 1549               	.LM132:
 1550 06b0 81E0      		ldi r24,lo8(1)
 1551 06b2 0E94 0000 		call cmdlineGetArgInt
 1552 06b6 6093 0000 		sts rightServoPos,r22
 398:cmdlinetest.c **** 	servoSetPosition(RIGHT_SERVO_CHAN, rightServoPos);
 1553               		.stabn	68,0,398,.LM133-setRightServo
 1554               	.LM133:
 1555 06ba 83E0      		ldi r24,lo8(3)
 1556 06bc 0E94 0000 		call servoSetPosition
 1557               	/* epilogue: frame size=0 */
 1558 06c0 0895      		ret
 1559               	/* epilogue end (size=1) */
 1560               	/* function setRightServo size 9 (8) */
 1561               		.size	setRightServo, .-setRightServo
 1562               	.Lscope16:
 1563               		.stabs	"",36,0,0,.Lscope16-setRightServo
 1564               		.stabd	78,0,0
 1565               		.stabs	"setThrottleServo:F(0,15)",36,0,405,setThrottleServo
 1566               	.global	setThrottleServo
 1567               		.type	setThrottleServo, @function
 1568               	setThrottleServo:
 1569               		.stabd	46,0,0
 399:cmdlinetest.c **** #ifdef DEBUG
 400:cmdlinetest.c **** 		rprintf("e0\r\n");
 401:cmdlinetest.c **** #endif DEBUG
 402:cmdlinetest.c **** }
 403:cmdlinetest.c **** 
 404:cmdlinetest.c **** void setThrottleServo(void)
 405:cmdlinetest.c **** {
GAS LISTING /var/tmp//ccskXpcw.s 			page 37


 1570               		.stabn	68,0,405,.LM134-setThrottleServo
 1571               	.LM134:
 1572               	/* prologue: frame size=0 */
 1573               	/* prologue end (size=0) */
 406:cmdlinetest.c **** 	throttleServoPos = (unsigned char) cmdlineGetArgInt(1);
 1574               		.stabn	68,0,406,.LM135-setThrottleServo
 1575               	.LM135:
 1576 06c2 81E0      		ldi r24,lo8(1)
 1577 06c4 0E94 0000 		call cmdlineGetArgInt
 1578 06c8 6093 0000 		sts throttleServoPos,r22
 407:cmdlinetest.c **** 	servoSetPosition(THROTTLE_SERVO_CHAN, throttleServoPos);
 1579               		.stabn	68,0,407,.LM136-setThrottleServo
 1580               	.LM136:
 1581 06cc 80E0      		ldi r24,lo8(0)
 1582 06ce 0E94 0000 		call servoSetPosition
 1583               	/* epilogue: frame size=0 */
 1584 06d2 0895      		ret
 1585               	/* epilogue end (size=1) */
 1586               	/* function setThrottleServo size 9 (8) */
 1587               		.size	setThrottleServo, .-setThrottleServo
 1588               	.Lscope17:
 1589               		.stabs	"",36,0,0,.Lscope17-setThrottleServo
 1590               		.stabd	78,0,0
 1591               		.stabs	"setFeedbackInterval:F(0,15)",36,0,413,setFeedbackInterval
 1592               	.global	setFeedbackInterval
 1593               		.type	setFeedbackInterval, @function
 1594               	setFeedbackInterval:
 1595               		.stabd	46,0,0
 408:cmdlinetest.c **** #ifdef DEBUG
 409:cmdlinetest.c **** 		rprintf("e0\r\n");
 410:cmdlinetest.c **** #endif DEBUG
 411:cmdlinetest.c **** }
 412:cmdlinetest.c **** void setFeedbackInterval(void)
 413:cmdlinetest.c **** {
 1596               		.stabn	68,0,413,.LM137-setFeedbackInterval
 1597               	.LM137:
 1598               	/* prologue: frame size=0 */
 1599               	/* prologue end (size=0) */
 414:cmdlinetest.c **** 	numTimesThrough = cmdlineGetArgInt(1);
 1600               		.stabn	68,0,414,.LM138-setFeedbackInterval
 1601               	.LM138:
 1602 06d4 81E0      		ldi r24,lo8(1)
 1603 06d6 0E94 0000 		call cmdlineGetArgInt
 1604 06da 6093 0000 		sts numTimesThrough,r22
 1605 06de 7093 0000 		sts (numTimesThrough)+1,r23
 1606 06e2 8093 0000 		sts (numTimesThrough)+2,r24
 1607 06e6 9093 0000 		sts (numTimesThrough)+3,r25
 1608               	/* epilogue: frame size=0 */
 1609 06ea 0895      		ret
 1610               	/* epilogue end (size=1) */
 1611               	/* function setFeedbackInterval size 12 (11) */
 1612               		.size	setFeedbackInterval, .-setFeedbackInterval
 1613               	.Lscope18:
 1614               		.stabs	"",36,0,0,.Lscope18-setFeedbackInterval
 1615               		.stabd	78,0,0
 1616               		.stabs	"setCamPanServo:F(0,15)",36,0,418,setCamPanServo
 1617               	.global	setCamPanServo
GAS LISTING /var/tmp//ccskXpcw.s 			page 38


 1618               		.type	setCamPanServo, @function
 1619               	setCamPanServo:
 1620               		.stabd	46,0,0
 415:cmdlinetest.c **** }
 416:cmdlinetest.c **** 
 417:cmdlinetest.c **** void setCamPanServo(void)
 418:cmdlinetest.c **** {
 1621               		.stabn	68,0,418,.LM139-setCamPanServo
 1622               	.LM139:
 1623               	/* prologue: frame size=0 */
 1624               	/* prologue end (size=0) */
 419:cmdlinetest.c **** 	int rawPan;
 420:cmdlinetest.c **** 	
 421:cmdlinetest.c **** 	rawPan = cmdlineGetArgInt(1);
 1625               		.stabn	68,0,421,.LM140-setCamPanServo
 1626               	.LM140:
 1627 06ec 81E0      		ldi r24,lo8(1)
 1628 06ee 0E94 0000 		call cmdlineGetArgInt
 422:cmdlinetest.c **** 	
 423:cmdlinetest.c **** 	if( (0<= rawPan) && (rawPan <= 2) )
 1629               		.stabn	68,0,423,.LM141-setCamPanServo
 1630               	.LM141:
 1631 06f2 6330      		cpi r22,3
 1632 06f4 7105      		cpc r23,__zero_reg__
 1633 06f6 80F4      		brsh .L71
 424:cmdlinetest.c **** 	{
 425:cmdlinetest.c **** 		camPanServoPos = camPanServoPos + (rawPan - 1);
 1634               		.stabn	68,0,425,.LM142-setCamPanServo
 1635               	.LM142:
 1636 06f8 8091 0000 		lds r24,camPanServoPos
 1637 06fc 860F      		add r24,r22
 1638 06fe 8150      		subi r24,lo8(-(-1))
 1639 0700 8093 0000 		sts camPanServoPos,r24
 426:cmdlinetest.c **** 		if(camPanServoPos < 1) camPanServoPos = 1;
 1640               		.stabn	68,0,426,.LM143-setCamPanServo
 1641               	.LM143:
 1642 0704 8823      		tst r24
 1643 0706 19F4      		brne .L69
 1644 0708 81E0      		ldi r24,lo8(1)
 1645 070a 8093 0000 		sts camPanServoPos,r24
 1646               	.L69:
 427:cmdlinetest.c **** 		if(camPanServoPos > 255) camPanServoPos = 255;
 428:cmdlinetest.c **** 	
 429:cmdlinetest.c **** 		servoSetPosition(CAM_PAN_SERVO_CHAN, (char)camPanServoPos);
 1647               		.stabn	68,0,429,.LM144-setCamPanServo
 1648               	.LM144:
 1649 070e 6091 0000 		lds r22,camPanServoPos
 1650 0712 81E0      		ldi r24,lo8(1)
 1651 0714 0E94 0000 		call servoSetPosition
 1652               	.L71:
 1653 0718 0895      		ret
 1654               	/* epilogue: frame size=0 */
 1655               	/* epilogue: noreturn */
 1656               	/* epilogue end (size=0) */
 1657               	/* function setCamPanServo size 23 (23) */
 1658               		.size	setCamPanServo, .-setCamPanServo
 1659               		.stabs	"rawPan:r(0,1)",64,0,419,22
GAS LISTING /var/tmp//ccskXpcw.s 			page 39


 1660               		.stabn	192,0,0,setCamPanServo-setCamPanServo
 1661               		.stabn	224,0,0,.Lscope19-setCamPanServo
 1662               	.Lscope19:
 1663               		.stabs	"",36,0,0,.Lscope19-setCamPanServo
 1664               		.stabd	78,0,0
 1665               		.stabs	"setCamTiltServo:F(0,15)",36,0,438,setCamTiltServo
 1666               	.global	setCamTiltServo
 1667               		.type	setCamTiltServo, @function
 1668               	setCamTiltServo:
 1669               		.stabd	46,0,0
 430:cmdlinetest.c **** #ifdef DEBUG
 431:cmdlinetest.c **** 			rprintf("e0\r\n");
 432:cmdlinetest.c **** #endif DEBUG
 433:cmdlinetest.c **** 
 434:cmdlinetest.c **** 	}
 435:cmdlinetest.c **** }
 436:cmdlinetest.c **** 
 437:cmdlinetest.c **** void setCamTiltServo(void)
 438:cmdlinetest.c **** {
 1670               		.stabn	68,0,438,.LM145-setCamTiltServo
 1671               	.LM145:
 1672               	/* prologue: frame size=0 */
 1673               	/* prologue end (size=0) */
 439:cmdlinetest.c **** 	int rawTilt;
 440:cmdlinetest.c **** 	
 441:cmdlinetest.c **** 	rawTilt = cmdlineGetArgInt(1);
 1674               		.stabn	68,0,441,.LM146-setCamTiltServo
 1675               	.LM146:
 1676 071a 81E0      		ldi r24,lo8(1)
 1677 071c 0E94 0000 		call cmdlineGetArgInt
 442:cmdlinetest.c **** 	if(( 0 <= rawTilt) && (rawTilt <= 2) )
 1678               		.stabn	68,0,442,.LM147-setCamTiltServo
 1679               	.LM147:
 1680 0720 6330      		cpi r22,3
 1681 0722 7105      		cpc r23,__zero_reg__
 1682 0724 80F4      		brsh .L77
 443:cmdlinetest.c **** 	{
 444:cmdlinetest.c **** 		camTiltServoPos = camTiltServoPos + (rawTilt - 1);
 1683               		.stabn	68,0,444,.LM148-setCamTiltServo
 1684               	.LM148:
 1685 0726 8091 0000 		lds r24,camTiltServoPos
 1686 072a 860F      		add r24,r22
 1687 072c 8150      		subi r24,lo8(-(-1))
 1688 072e 8093 0000 		sts camTiltServoPos,r24
 445:cmdlinetest.c **** 		if(camTiltServoPos < 1) camTiltServoPos = 1;
 1689               		.stabn	68,0,445,.LM149-setCamTiltServo
 1690               	.LM149:
 1691 0732 8823      		tst r24
 1692 0734 19F4      		brne .L75
 1693 0736 81E0      		ldi r24,lo8(1)
 1694 0738 8093 0000 		sts camTiltServoPos,r24
 1695               	.L75:
 446:cmdlinetest.c **** 		if(camTiltServoPos > 255) camTiltServoPos = 255;
 447:cmdlinetest.c **** 	
 448:cmdlinetest.c **** 		servoSetPosition(CAM_TILT_SERVO_CHAN, (char)camTiltServoPos);
 1696               		.stabn	68,0,448,.LM150-setCamTiltServo
 1697               	.LM150:
GAS LISTING /var/tmp//ccskXpcw.s 			page 40


 1698 073c 6091 0000 		lds r22,camTiltServoPos
 1699 0740 82E0      		ldi r24,lo8(2)
 1700 0742 0E94 0000 		call servoSetPosition
 1701               	.L77:
 1702 0746 0895      		ret
 1703               	/* epilogue: frame size=0 */
 1704               	/* epilogue: noreturn */
 1705               	/* epilogue end (size=0) */
 1706               	/* function setCamTiltServo size 23 (23) */
 1707               		.size	setCamTiltServo, .-setCamTiltServo
 1708               		.stabs	"rawTilt:r(0,1)",64,0,439,22
 1709               		.stabn	192,0,0,setCamTiltServo-setCamTiltServo
 1710               		.stabn	224,0,0,.Lscope20-setCamTiltServo
 1711               	.Lscope20:
 1712               		.stabs	"",36,0,0,.Lscope20-setCamTiltServo
 1713               		.stabd	78,0,0
 1714               		.stabs	"slaveBuffer:G(0,20)=ar(0,18);0;32;(6,1)",32,0,66,0
 1715               		.stabs	"slaveBufferLength:G(6,1)",32,0,67,0
 1716               		.stabs	"masterBuffer:G(0,21)=ar(0,18);0;28;(0,11)",32,0,69,0
 1717               		.stabs	"masterBufferLength:G(0,11)",32,0,70,0
 1718               		.stabs	"Run:G(6,1)",32,0,72,0
 1719               		.stabs	"leftServoPos:G(6,1)",32,0,80,0
 1720               		.stabs	"rightServoPos:G(6,1)",32,0,81,0
 1721               		.stabs	"throttleServoPos:G(6,1)",32,0,82,0
 1722               		.stabs	"camPanServoPos:G(6,1)",32,0,83,0
 1723               		.stabs	"camTiltServoPos:G(6,1)",32,0,84,0
 1724               		.stabs	"numTimesThrough:G(0,3)",32,0,86,0
 1725               		.comm camTiltServoPos,1,1
 1726               		.comm camPanServoPos,1,1
 1727               		.comm throttleServoPos,1,1
 1728               		.comm rightServoPos,1,1
 1729               		.comm Run,1,1
 1730               		.stabs	"",100,0,0,.Letext0
 1731               	.Letext0:
 1732               	/* File "cmdlinetest.c": code  932 = 0x03a4 ( 780), prologues  72, epilogues  80 */
GAS LISTING /var/tmp//ccskXpcw.s 			page 41


DEFINED SYMBOLS
                            *ABS*:00000000 cmdlinetest.c
/var/tmp//ccskXpcw.s:3      *ABS*:0000003f __SREG__
/var/tmp//ccskXpcw.s:4      *ABS*:0000003e __SP_H__
/var/tmp//ccskXpcw.s:5      *ABS*:0000003d __SP_L__
/var/tmp//ccskXpcw.s:6      *ABS*:00000000 __tmp_reg__
/var/tmp//ccskXpcw.s:7      *ABS*:00000001 __zero_reg__
/var/tmp//ccskXpcw.s:131    .bss:00000000 numTimesThrough
/var/tmp//ccskXpcw.s:137    .data:00000000 leftServoPos
/var/tmp//ccskXpcw.s:142    .data:00000001 masterBufferLength
/var/tmp//ccskXpcw.s:147    .data:00000002 masterBuffer
/var/tmp//ccskXpcw.s:152    .data:0000001f slaveBufferLength
/var/tmp//ccskXpcw.s:157    .data:00000020 slaveBuffer
/var/tmp//ccskXpcw.s:162    .progmem.data:00000000 __c.1665
/var/tmp//ccskXpcw.s:166    .progmem.data:00000012 __c.1660
/var/tmp//ccskXpcw.s:170    .progmem.data:00000023 __c.1655
/var/tmp//ccskXpcw.s:197    .text:00000000 goCmdline
/var/tmp//ccskXpcw.s:1516   .text:0000069e setLeftServo
/var/tmp//ccskXpcw.s:1542   .text:000006b0 setRightServo
/var/tmp//ccskXpcw.s:1568   .text:000006c2 setThrottleServo
/var/tmp//ccskXpcw.s:1619   .text:000006ec setCamPanServo
/var/tmp//ccskXpcw.s:1668   .text:0000071a setCamTiltServo
/var/tmp//ccskXpcw.s:1594   .text:000006d4 setFeedbackInterval
/var/tmp//ccskXpcw.s:1212   .text:0000051c i2cMaster_Send
/var/tmp//ccskXpcw.s:1333   .text:000005a0 i2cMaster_Receive
/var/tmp//ccskXpcw.s:559    .text:000001ce dumpArgsStr
/var/tmp//ccskXpcw.s:648    .text:00000246 dumpArgsInt
                            *COM*:00000001 Run
/var/tmp//ccskXpcw.s:421    .text:00000162 exitFunction
/var/tmp//ccskXpcw.s:441    .progmem.data:0000004f __c.1685
/var/tmp//ccskXpcw.s:445    .progmem.data:00000085 __c.1683
/var/tmp//ccskXpcw.s:449    .progmem.data:000000bf __c.1681
/var/tmp//ccskXpcw.s:453    .progmem.data:000000f0 __c.1679
/var/tmp//ccskXpcw.s:457    .progmem.data:0000011a __c.1677
/var/tmp//ccskXpcw.s:463    .text:00000168 helpFunction
/var/tmp//ccskXpcw.s:537    .progmem.data:00000134 __c.1698
/var/tmp//ccskXpcw.s:541    .progmem.data:0000013b __c.1696
/var/tmp//ccskXpcw.s:545    .progmem.data:00000142 __c.1694
/var/tmp//ccskXpcw.s:549    .progmem.data:00000149 __c.1692
/var/tmp//ccskXpcw.s:553    .progmem.data:00000150 __c.1690
/var/tmp//ccskXpcw.s:630    .progmem.data:0000016c __c.1717
/var/tmp//ccskXpcw.s:634    .progmem.data:0000017a __c.1715
/var/tmp//ccskXpcw.s:638    .progmem.data:00000188 __c.1713
/var/tmp//ccskXpcw.s:642    .progmem.data:00000196 __c.1711
/var/tmp//ccskXpcw.s:753    .progmem.data:000001b3 __c.1731
/var/tmp//ccskXpcw.s:757    .progmem.data:000001c1 __c.1729
/var/tmp//ccskXpcw.s:761    .progmem.data:000001cf __c.1727
/var/tmp//ccskXpcw.s:765    .progmem.data:000001dd __c.1725
/var/tmp//ccskXpcw.s:771    .text:000002fe dumpArgsHex
/var/tmp//ccskXpcw.s:876    .text:000003b6 i2cSetup
/var/tmp//ccskXpcw.s:1034   .text:00000472 i2cSlaveReceiveService
/var/tmp//ccskXpcw.s:1080   .text:00000496 i2cSlaveTransmitService
/var/tmp//ccskXpcw.s:911    .progmem.data:000001fe __c.1646
/var/tmp//ccskXpcw.s:917    .text:000003d4 main
/var/tmp//ccskXpcw.s:1133   .text:000004c2 i2cMasterSendDiag
/var/tmp//ccskXpcw.s:1271   .text:00000568 i2cMaster_Auto_Send
/var/tmp//ccskXpcw.s:1323   .progmem.data:00000235 __c.1806
GAS LISTING /var/tmp//ccskXpcw.s 			page 42


/var/tmp//ccskXpcw.s:1327   .progmem.data:00000237 __c.1804
/var/tmp//ccskXpcw.s:1435   .progmem.data:00000239 __c.1818
/var/tmp//ccskXpcw.s:1439   .progmem.data:0000023b __c.1816
/var/tmp//ccskXpcw.s:1446   .text:0000063c i2cMaster_Auto_Receive
                            *COM*:00000001 rightServoPos
                            *COM*:00000001 throttleServoPos
                            *COM*:00000001 camPanServoPos
                            *COM*:00000001 camTiltServoPos

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
vt100ClearScreen
vt100SetCursorPos
rprintfProgStr
cmdlineInit
uartSendByte
cmdlineSetOutputFunc
cmdlineAddCommand
cmdlineInputFunc
uartReceiveByte
cmdlineMainLoop
rprintf1RamRom
rprintfCRLF
cmdlineGetArgStr
rprintfStr
cmdlineGetArgInt
rprintfNum
cmdlineGetArgHex
i2cInit
i2cSetLocalDeviceAddr
i2cSetSlaveReceiveHandler
i2cSetSlaveTransmitHandler
__stack
uartInit
uartSetBaudRate
rprintfInit
a2dInit
timerInit
vt100Init
timerPause
servoInit
servoSetChannelIO
exit
i2cSendStart
i2cWaitForComplete
i2cSendByte
i2cSendStop
strcpy
i2cMasterSend
i2cMasterReceive
servoSetPosition
