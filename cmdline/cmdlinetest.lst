GAS LISTING /var/tmp//cczS1EeW.s 			page 1


   1               		.file	"cmdlinetest.c"
   2               		.arch atmega32
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/opt/local/avr/avrlib/freedomflies/cmdline/",100,0,2,.Ltext0
  11               		.stabs	"cmdlinetest.c",100,0,2,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  16               		.stabs	"char:t(0,2)=r(0,2);0;127;",128,0,0,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"void:t(0,15)=(0,15)",128,0,0,0
  30               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/io.h",130,0,0,0
  31               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/sfr_defs.h",130,0,0,0
  32               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/inttypes.h",130,0,0,0
  33               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/stdint.h",130,0,0,0
  34               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,116,0
  35               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,117,0
  36               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,118,0
  37               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,119,0
  38               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,120,0
  39               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,121,0
  40               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,122,0
  41               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,123,0
  42               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,135,0
  43               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,140,0
  44               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,152,0
  45               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,157,0
  46               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,162,0
  47               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,167,0
  48               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,172,0
  49               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,177,0
  50               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,182,0
  51               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,187,0
  52               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,200,0
  53               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,205,0
  54               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,210,0
  55               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,215,0
  56               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,220,0
  57               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,225,0
GAS LISTING /var/tmp//cczS1EeW.s 			page 2


  58               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,230,0
  59               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,235,0
  60               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,249,0
  61               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,254,0
  62               		.stabn	162,0,0,0
  63               		.stabs	"int_farptr_t:t(3,1)=(4,5)",128,0,76,0
  64               		.stabs	"uint_farptr_t:t(3,2)=(4,6)",128,0,80,0
  65               		.stabn	162,0,0,0
  66               		.stabn	162,0,0,0
  67               		.stabn	162,0,0,0
  68               		.stabs	"global.h",130,0,0,0
  69               		.stabs	"/opt/local/avr/sixcode/avrlibtypes.h",130,0,0,0
  70               		.stabs	"u08:t(6,1)=(0,11)",128,0,32,0
  71               		.stabs	"s08:t(6,2)=(0,10)",128,0,33,0
  72               		.stabs	"u16:t(6,3)=(0,9)",128,0,34,0
  73               		.stabs	"s16:t(6,4)=(0,8)",128,0,35,0
  74               		.stabs	"u32:t(6,5)=(0,5)",128,0,36,0
  75               		.stabs	"s32:t(6,6)=(0,3)",128,0,37,0
  76               		.stabs	"u64:t(6,7)=(0,7)",128,0,38,0
  77               		.stabs	"s64:t(6,8)=(0,6)",128,0,39,0
  78               		.stabs	"BOOL:t(6,9)=(0,11)",128,0,69,0
  79               		.stabs	"BYTE:t(6,10)=(0,11)",128,0,70,0
  80               		.stabs	"WORD:t(6,11)=(0,4)",128,0,71,0
  81               		.stabs	"DWORD:t(6,12)=(0,5)",128,0,72,0
  82               		.stabs	"UCHAR:t(6,13)=(0,11)",128,0,74,0
  83               		.stabs	"UINT:t(6,14)=(0,4)",128,0,75,0
  84               		.stabs	"USHORT:t(6,15)=(0,9)",128,0,76,0
  85               		.stabs	"ULONG:t(6,16)=(0,5)",128,0,77,0
  86               		.stabs	"CHAR:t(6,17)=(0,2)",128,0,79,0
  87               		.stabs	"INT:t(6,18)=(0,1)",128,0,80,0
  88               		.stabs	"LONG:t(6,19)=(0,3)",128,0,81,0
  89               		.stabn	162,0,0,0
  90               		.stabn	162,0,0,0
  91               		.stabs	"/opt/local/avr/sixcode/uart.h",130,0,0,0
  92               		.stabs	"/opt/local/avr/sixcode/buffer.h",130,0,0,0
  93               		.stabs	"struct_cBuffer:T(8,1)=s8dataptr:(8,2)=*(0,11),0,16;size:(0,9),16,16;datalength:(0,9),32,16
  94               		.stabs	"cBuffer:t(8,3)=(8,1)",128,0,47,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"/opt/local/avr/sixcode/rprintf.h",130,0,0,0
  98               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/../../../../avr/include/avr/pgmspace.h",130,0,0,0
  99               		.stabs	"/opt/local/lib/gcc/avr/4.0.2/include/stddef.h",130,0,0,0
 100               		.stabs	"size_t:t(11,1)=(0,4)",128,0,214,0
 101               		.stabn	162,0,0,0
 102               		.stabs	"prog_void:t(10,1)=(10,2)=(10,2)",128,0,203,0
 103               		.stabs	"prog_char:t(10,3)=(10,4)=@s8;r(10,4);-128;127;",128,0,204,0
 104               		.stabs	"prog_uchar:t(10,5)=(10,6)=@s8;r(10,6);0;255;",128,0,205,0
 105               		.stabs	"prog_int8_t:t(10,7)=(10,4)",128,0,207,0
 106               		.stabs	"prog_uint8_t:t(10,8)=(10,6)",128,0,208,0
 107               		.stabs	"prog_int16_t:t(10,9)=(10,10)=(0,1)",128,0,209,0
 108               		.stabs	"prog_uint16_t:t(10,11)=(10,12)=(0,4)",128,0,210,0
 109               		.stabs	"prog_int32_t:t(10,13)=(10,14)=(0,3)",128,0,211,0
 110               		.stabs	"prog_uint32_t:t(10,15)=(10,16)=(0,5)",128,0,212,0
 111               		.stabs	"prog_int64_t:t(10,17)=(10,18)=(0,6)",128,0,213,0
 112               		.stabs	"prog_uint64_t:t(10,19)=(10,20)=(0,7)",128,0,214,0
 113               		.stabn	162,0,0,0
 114               		.stabn	162,0,0,0
GAS LISTING /var/tmp//cczS1EeW.s 			page 3


 115               		.stabs	"/opt/local/avr/sixcode/cmdline.h",130,0,0,0
 116               		.stabs	"CmdlineFuncPtrType:t(12,1)=(12,2)=*(12,3)=f(0,15)",128,0,85,0
 117               		.stabn	162,0,0,0
 118               		.stabs	"/opt/local/avr/sixcode/servo.h",130,0,0,0
 119               		.stabs	"struct_ServoChannel:T(13,1)=s4port:(13,2)=B(6,1),0,8;pin:(13,2),8,8;duty:(13,3)=B(6,3),16,
 120               		.stabs	"ServoChannelType:t(13,4)=(13,1)",128,0,78,0
 121               		.stabn	162,0,0,0
 122               		.stabs	"/opt/local/avr/sixcode/i2c.h",130,0,0,0
 123               		.stabs	" :T(14,1)=eI2C_IDLE:0,I2C_BUSY:1,I2C_MASTER_TX:2,I2C_MASTER_RX:3,I2C_SLAVE_TX:4,I2C_SLAVE_
 124               		.stabs	"eI2cStateType:t(14,2)=(14,1)",128,0,124,0
 125               		.stabn	162,0,0,0
 126               	.global	numTimesThrough
 127               	.global	numTimesThrough
 128               		.section .bss
 129               		.type	numTimesThrough, @object
 130               		.size	numTimesThrough, 4
 131               	numTimesThrough:
 132 0000 0000 0000 		.skip 4,0
 133               	.global	multiplier
 134               		.data
 135               		.type	multiplier, @object
 136               		.size	multiplier, 2
 137               	multiplier:
 138 0000 6400      		.word	100
 139               	.global	leftServoPos
 140               		.type	leftServoPos, @object
 141               		.size	leftServoPos, 1
 142               	leftServoPos:
 143 0002 88        		.byte	-120
 144               	.global	masterBufferLength
 145               		.type	masterBufferLength, @object
 146               		.size	masterBufferLength, 1
 147               	masterBufferLength:
 148 0003 20        		.byte	32
 149               	.global	masterBuffer
 150               		.type	masterBuffer, @object
 151               		.size	masterBuffer, 29
 152               	masterBuffer:
 153 0004 5468 6973 		.string	"This one is the Master board"
 153      206F 6E65 
 153      2069 7320 
 153      7468 6520 
 153      4D61 7374 
 154               	.global	slaveBufferLength
 155               		.type	slaveBufferLength, @object
 156               		.size	slaveBufferLength, 1
 157               	slaveBufferLength:
 158 0021 20        		.byte	32
 159               	.global	slaveBuffer
 160               		.type	slaveBuffer, @object
 161               		.size	slaveBuffer, 21
 162               	slaveBuffer:
 163 0022 5265 7374 		.string	"Restore Habeas Corp!"
 163      6F72 6520 
 163      4861 6265 
 163      6173 2043 
 163      6F72 7021 
GAS LISTING /var/tmp//cczS1EeW.s 			page 4


 164               		.section	.progmem.data,"a",@progbits
 165               		.type	__c.1670, @object
 166               		.size	__c.1670, 18
 167               	__c.1670:
 168 0000 4578 6974 		.string	"Exited program!\r\n"
 168      6564 2070 
 168      726F 6772 
 168      616D 210D 
 168      0A00 
 169               		.type	__c.1665, @object
 170               		.size	__c.1665, 17
 171               	__c.1665:
 172 0012 7469 6D65 		.string	"times through!\r\n"
 172      7320 7468 
 172      726F 7567 
 172      6821 0D0A 
 172      00
 173               		.type	__c.1660, @object
 174               		.size	__c.1660, 44
 175               	__c.1660:
 176 0023 0D0A 5765 		.string	"\r\nWelcome to the Command Line Test Suite!\r\n"
 176      6C63 6F6D 
 176      6520 746F 
 176      2074 6865 
 176      2043 6F6D 
 177               		.data
 178               	.LC0:
 179 0037 6C00      		.string	"l"
 180               	.LC1:
 181 0039 7200      		.string	"r"
 182               	.LC2:
 183 003b 7400      		.string	"t"
 184               	.LC3:
 185 003d 7000      		.string	"p"
 186               	.LC4:
 187 003f 6900      		.string	"i"
 188               	.LC5:
 189 0041 6600      		.string	"f"
 190               	.LC6:
 191 0043 6200      		.string	"b"
 192               	.LC7:
 193 0045 3200      		.string	"2"
 194               	.LC8:
 195 0047 3300      		.string	"3"
 196               	.LC9:
 197 0049 6461 7300 		.string	"das"
 198               	.LC10:
 199 004d 6461 6900 		.string	"dai"
 200               		.text
 201               		.stabs	"goCmdline:F(0,15)",36,0,183,goCmdline
 202               	.global	goCmdline
 203               		.type	goCmdline, @function
 204               	goCmdline:
 205               		.stabd	46,0,0
   1:cmdlinetest.c **** //*****************************************************************************
   2:cmdlinetest.c **** // File Name	: cmdlinetest.c
   3:cmdlinetest.c **** // 
GAS LISTING /var/tmp//cczS1EeW.s 			page 5


   4:cmdlinetest.c **** // Title		: example usage of cmdline (command line) functions
   5:cmdlinetest.c **** // Revision		: 1.0
   6:cmdlinetest.c **** // Notes		:	
   7:cmdlinetest.c **** // Target MCU	: Atmel AVR series
   8:cmdlinetest.c **** // Editor Tabs	: 4
   9:cmdlinetest.c **** // 
  10:cmdlinetest.c **** // Revision History:
  11:cmdlinetest.c **** // When			Who			Description of change
  12:cmdlinetest.c **** // -----------	-----------	-----------------------
  13:cmdlinetest.c **** // 21-Jul-2003	pstang		Created the program
  14:cmdlinetest.c **** //*****************************************************************************
  15:cmdlinetest.c **** 
  16:cmdlinetest.c **** 
  17:cmdlinetest.c **** //	TODO:
  18:cmdlinetest.c **** //		Rationalize master/slave relationship.  Reduce number of calls.  Ask for SPI dump rather than i
  19:cmdlinetest.c **** //		even if master only returns them one by one
  20:cmdlinetest.c **** //
  21:cmdlinetest.c **** //		
  22:cmdlinetest.c **** //
  23:cmdlinetest.c **** //
  24:cmdlinetest.c **** 
  25:cmdlinetest.c **** //----- Include Files ---------------------------------------------------------
  26:cmdlinetest.c **** #include <avr/io.h>			// include I/O definitions (port names, pin names, etc)
  27:cmdlinetest.c **** #include <avr/interrupt.h>	// include interrupt support
  28:cmdlinetest.c **** 
  29:cmdlinetest.c **** #include "global.h"		// include our global settings
  30:cmdlinetest.c **** #include "uart.h"		// include uart function library
  31:cmdlinetest.c **** #include "rprintf.h"	// include printf function library
  32:cmdlinetest.c **** #include "a2d.h"		// include A/D converter function library
  33:cmdlinetest.c **** #include "timer.h"		// include timer function library (timing, PWM, etc)
  34:cmdlinetest.c **** #include "vt100.h"		// include vt100 terminal support
  35:cmdlinetest.c **** #include "cmdline.h"	// include cmdline function library
  36:cmdlinetest.c **** #include "servo.h"
  37:cmdlinetest.c **** #include "i2c.h"
  38:cmdlinetest.c **** #include "string.h"
  39:cmdlinetest.c **** #include "servoconf.h"
  40:cmdlinetest.c **** //#include <pulseb.h>
  41:cmdlinetest.c **** //#include <pulseb.c>
  42:cmdlinetest.c **** 
  43:cmdlinetest.c **** //I2C address definitions
  44:cmdlinetest.c **** #define LOCAL_ADDR	0xA0
  45:cmdlinetest.c **** #define TARGET_ADDR	0xA0
  46:cmdlinetest.c **** 
  47:cmdlinetest.c **** // Peripheral initialization
  48:cmdlinetest.c **** 
  49:cmdlinetest.c **** #define TCNT0_INIT (0xFF-CPUCLK/256/TICKRATE)
  50:cmdlinetest.c **** #define LEFT_SERVO_CHAN 	4
  51:cmdlinetest.c **** #define RIGHT_SERVO_CHAN 	3
  52:cmdlinetest.c **** #define THROTTLE_SERVO_CHAN 0
  53:cmdlinetest.c **** #define CAM_PAN_SERVO_CHAN  1
  54:cmdlinetest.c **** #define CAM_TILT_SERVO_CHAN 2
  55:cmdlinetest.c **** 
  56:cmdlinetest.c **** #define SPEED_SERVO	1
  57:cmdlinetest.c **** #undef DEBUG
  58:cmdlinetest.c **** 
  59:cmdlinetest.c **** // Pulse defines
  60:cmdlinetest.c **** #define MULTIPLIER 100
GAS LISTING /var/tmp//cczS1EeW.s 			page 6


  61:cmdlinetest.c **** 
  62:cmdlinetest.c **** void setLeftServo(void);
  63:cmdlinetest.c **** void setRightServo(void);
  64:cmdlinetest.c **** void setThrottleServo(void);
  65:cmdlinetest.c **** void setCamPanServo(void);
  66:cmdlinetest.c **** void setCamTiltServo(void);
  67:cmdlinetest.c **** void setFeedbackInterval(void);
  68:cmdlinetest.c **** 
  69:cmdlinetest.c **** 
  70:cmdlinetest.c **** void 	i2cSetup(void);
  71:cmdlinetest.c **** void  	i2cSlaveReceiveService(u08 receiveDataLength, u08* receiveData);
  72:cmdlinetest.c **** u08 	i2cSlaveTransmitService(u08 receiveDataLength, u08* receiveData);
  73:cmdlinetest.c **** void 	i2cMasterSendDiag(u08 deviceAddr, u08 length, u08* data);
  74:cmdlinetest.c **** 
  75:cmdlinetest.c **** void 	i2cMaster_Receive();
  76:cmdlinetest.c **** void 	i2cMaster_Send();
  77:cmdlinetest.c **** void 	i2cMaster_Auto_Send(u08 message);
  78:cmdlinetest.c **** void 	i2cMaster_Auto_Receive(u08 command);
  79:cmdlinetest.c **** 
  80:cmdlinetest.c **** // A2D routine
  81:cmdlinetest.c **** void getA2D(void);
  82:cmdlinetest.c **** 
  83:cmdlinetest.c **** // I2C buffers
  84:cmdlinetest.c **** u08 slaveBuffer[] = "Restore Habeas Corp!";
  85:cmdlinetest.c **** u08 slaveBufferLength = 0x20;
  86:cmdlinetest.c **** 
  87:cmdlinetest.c **** unsigned char masterBuffer[] = "This one is the Master board";
  88:cmdlinetest.c **** unsigned char masterBufferLength = 0x20;
  89:cmdlinetest.c **** // global variables
  90:cmdlinetest.c **** u08 Run;
  91:cmdlinetest.c **** 
  92:cmdlinetest.c **** // functions
  93:cmdlinetest.c **** void goCmdline(void);
  94:cmdlinetest.c **** void dumpArgsStr(void);
  95:cmdlinetest.c **** void dumpArgsInt(void);
  96:cmdlinetest.c **** void dumpArgsHex(void);
  97:cmdlinetest.c **** 
  98:cmdlinetest.c **** u08 leftServoPos = 50 * MULTIPLIER;		//0 seems to be beyond its reach
  99:cmdlinetest.c **** //below for boat only
 100:cmdlinetest.c **** u16	multiplier = MULTIPLIER;
 101:cmdlinetest.c **** 
 102:cmdlinetest.c **** u08 rightServoPos;
 103:cmdlinetest.c **** u08 throttleServoPos;
 104:cmdlinetest.c **** u08 camPanServoPos;
 105:cmdlinetest.c **** u08 camTiltServoPos;
 106:cmdlinetest.c **** 
 107:cmdlinetest.c **** long numTimesThrough = 0;  // number of times through mainloop to send feedback
 108:cmdlinetest.c **** 
 109:cmdlinetest.c **** //----- Begin Code ------------------------------------------------------------
 110:cmdlinetest.c **** int main(void)
 111:cmdlinetest.c **** {
 112:cmdlinetest.c **** 	// initialize our libraries
 113:cmdlinetest.c **** 	// initialize the UART (serial port)
 114:cmdlinetest.c **** 	uartInit();
 115:cmdlinetest.c **** 	uartSetBaudRate(57600);
 116:cmdlinetest.c **** 	// make all rprintf statements use uart for output
 117:cmdlinetest.c **** 	rprintfInit(uartSendByte);
GAS LISTING /var/tmp//cczS1EeW.s 			page 7


 118:cmdlinetest.c **** 	// turn on and initialize A/D converter
 119:cmdlinetest.c **** 	//////////////////////////////////////////////////A2D///////////////////////////
 120:cmdlinetest.c **** 	a2dInit();
 121:cmdlinetest.c **** 	// configure a2d port (PORTA) as input
 122:cmdlinetest.c **** 	// so we can receive analog signals
 123:cmdlinetest.c **** 	DDRA = 0x00;
 124:cmdlinetest.c **** 	// make sure pull-up resistors are turned off
 125:cmdlinetest.c **** 	PORTA = 0x00;
 126:cmdlinetest.c **** 
 127:cmdlinetest.c **** 	// set the a2d prescaler (clock division ratio)
 128:cmdlinetest.c **** 	// - a lower prescale setting will make the a2d converter go faster
 129:cmdlinetest.c **** 	// - a higher setting will make it go slower but the measurements
 130:cmdlinetest.c **** 	//   will be more accurate
 131:cmdlinetest.c **** 	// - other allowed prescale values can be found in a2d.h
 132:cmdlinetest.c **** 	a2dSetPrescaler(ADC_PRESCALE_DIV32);
 133:cmdlinetest.c **** 
 134:cmdlinetest.c **** 	// set the a2d reference
 135:cmdlinetest.c **** 	// - the reference is the voltage against which a2d measurements are made
 136:cmdlinetest.c **** 	// - other allowed reference values can be found in a2d.h
 137:cmdlinetest.c **** 	a2dSetReference(ADC_REFERENCE_AVCC);
 138:cmdlinetest.c **** 
 139:cmdlinetest.c **** 	// use a2dConvert8bit(channel#) to get an 8bit a2d reading
 140:cmdlinetest.c **** 	// use a2dConvert10bit(channel#) to get a 10bit a2d reading
 141:cmdlinetest.c **** 	
 142:cmdlinetest.c **** 	//////////////////////////////////////////////////TIMER////////////////////////////////
 143:cmdlinetest.c **** 	// initialize the timer system
 144:cmdlinetest.c **** 	timerInit();
 145:cmdlinetest.c **** 	//////////////////////////////////////////////////TERMINAL/////////////////////////////
 146:cmdlinetest.c **** 	
 147:cmdlinetest.c **** 	// initialize vt100 terminal
 148:cmdlinetest.c **** 	vt100Init();
 149:cmdlinetest.c **** 
 150:cmdlinetest.c **** 	// wait for hardware to power up
 151:cmdlinetest.c **** 	timerPause(100);
 152:cmdlinetest.c **** 
 153:cmdlinetest.c **** 	//////////////////////////////////////////////////I2C/////////////////////////////
 154:cmdlinetest.c **** 	i2cSetup();
 155:cmdlinetest.c **** 	//Setup I2c to speak to other boards.  Currently, other board is the gps/text board
 156:cmdlinetest.c **** 	
 157:cmdlinetest.c **** 	//////////////////////////////////////////////////Servos//////////////////////////
 158:cmdlinetest.c **** 	servoInit();
 159:cmdlinetest.c **** 	// setup servo output channel-to-I/Opin mapping
 160:cmdlinetest.c **** 	// format is servoSetChannelIO( CHANNEL#, PORT, PIN );
 161:cmdlinetest.c **** 	servoSetChannelIO(0, _SFR_IO_ADDR(PORTC), PC2);
 162:cmdlinetest.c **** 	servoSetChannelIO(1, _SFR_IO_ADDR(PORTC), PC3);
 163:cmdlinetest.c **** 	servoSetChannelIO(2, _SFR_IO_ADDR(PORTC), PC4);
 164:cmdlinetest.c **** 	servoSetChannelIO(3, _SFR_IO_ADDR(PORTC), PC5);
 165:cmdlinetest.c **** 	servoSetChannelIO(4, _SFR_IO_ADDR(PORTC), PC6);
 166:cmdlinetest.c **** 	// set port pins to output
 167:cmdlinetest.c **** 	outb(DDRC, 0xFC);
 168:cmdlinetest.c **** 	
 169:cmdlinetest.c **** 
 170:cmdlinetest.c **** 
 171:cmdlinetest.c **** 
 172:cmdlinetest.c **** 	//////////////////////////////////////////////////////////////////////////////////
 173:cmdlinetest.c **** 	rprintf("**********************powerup*************************");
 174:cmdlinetest.c **** 	
GAS LISTING /var/tmp//cczS1EeW.s 			page 8


 175:cmdlinetest.c **** 
 176:cmdlinetest.c **** 	// start command line
 177:cmdlinetest.c **** 	goCmdline();
 178:cmdlinetest.c **** 
 179:cmdlinetest.c **** 	return 0;
 180:cmdlinetest.c **** }
 181:cmdlinetest.c **** 
 182:cmdlinetest.c **** void goCmdline(void)
 183:cmdlinetest.c **** {
 206               		.stabn	68,0,183,.LM0-goCmdline
 207               	.LM0:
 208               	/* prologue: frame size=1 */
 209 0000 EF92      		push r14
 210 0002 FF92      		push r15
 211 0004 0F93      		push r16
 212 0006 1F93      		push r17
 213 0008 CF93      		push r28
 214 000a DF93      		push r29
 215 000c CDB7      		in r28,__SP_L__
 216 000e DEB7      		in r29,__SP_H__
 217 0010 2197      		sbiw r28,1
 218 0012 0FB6      		in __tmp_reg__,__SREG__
 219 0014 F894      		cli
 220 0016 DEBF      		out __SP_H__,r29
 221 0018 0FBE      		out __SREG__,__tmp_reg__
 222 001a CDBF      		out __SP_L__,r28
 223               	/* prologue end (size=14) */
 184:cmdlinetest.c **** 	u08 c;
 185:cmdlinetest.c **** 	long timesThrough =0;
 186:cmdlinetest.c **** 	// print welcome message
 187:cmdlinetest.c **** 	vt100ClearScreen();
 224               		.stabn	68,0,187,.LM1-goCmdline
 225               	.LM1:
 226 001c 0E94 0000 		call vt100ClearScreen
 188:cmdlinetest.c **** 	vt100SetCursorPos(1,0);
 227               		.stabn	68,0,188,.LM2-goCmdline
 228               	.LM2:
 229 0020 60E0      		ldi r22,lo8(0)
 230 0022 81E0      		ldi r24,lo8(1)
 231 0024 0E94 0000 		call vt100SetCursorPos
 189:cmdlinetest.c **** 	rprintfProgStrM("\r\nWelcome to the Command Line Test Suite!\r\n");
 232               		.stabn	68,0,189,.LM3-goCmdline
 233               	.LM3:
 234 0028 80E0      		ldi r24,lo8(__c.1660)
 235 002a 90E0      		ldi r25,hi8(__c.1660)
 236 002c 0E94 0000 		call rprintfProgStr
 190:cmdlinetest.c **** 
 191:cmdlinetest.c **** 	// initialize cmdline system
 192:cmdlinetest.c **** 	cmdlineInit();
 237               		.stabn	68,0,192,.LM4-goCmdline
 238               	.LM4:
 239 0030 0E94 0000 		call cmdlineInit
 193:cmdlinetest.c **** 
 194:cmdlinetest.c **** 	// direct cmdline output to uart (serial port)
 195:cmdlinetest.c **** 	cmdlineSetOutputFunc(uartSendByte);
 240               		.stabn	68,0,195,.LM5-goCmdline
 241               	.LM5:
GAS LISTING /var/tmp//cczS1EeW.s 			page 9


 242 0034 80E0      		ldi r24,lo8(pm(uartSendByte))
 243 0036 90E0      		ldi r25,hi8(pm(uartSendByte))
 244 0038 0E94 0000 		call cmdlineSetOutputFunc
 196:cmdlinetest.c **** 
 197:cmdlinetest.c **** 	// add commands to the command database
 198:cmdlinetest.c **** 
 199:cmdlinetest.c **** 
 200:cmdlinetest.c **** 	cmdlineAddCommand("l",		setLeftServo);
 245               		.stabn	68,0,200,.LM6-goCmdline
 246               	.LM6:
 247 003c 60E0      		ldi r22,lo8(pm(setLeftServo))
 248 003e 70E0      		ldi r23,hi8(pm(setLeftServo))
 249 0040 80E0      		ldi r24,lo8(.LC0)
 250 0042 90E0      		ldi r25,hi8(.LC0)
 251 0044 0E94 0000 		call cmdlineAddCommand
 201:cmdlinetest.c **** 	cmdlineAddCommand("r",		setRightServo);
 252               		.stabn	68,0,201,.LM7-goCmdline
 253               	.LM7:
 254 0048 60E0      		ldi r22,lo8(pm(setRightServo))
 255 004a 70E0      		ldi r23,hi8(pm(setRightServo))
 256 004c 80E0      		ldi r24,lo8(.LC1)
 257 004e 90E0      		ldi r25,hi8(.LC1)
 258 0050 0E94 0000 		call cmdlineAddCommand
 202:cmdlinetest.c ****     cmdlineAddCommand("t", 		setThrottleServo);
 259               		.stabn	68,0,202,.LM8-goCmdline
 260               	.LM8:
 261 0054 60E0      		ldi r22,lo8(pm(setThrottleServo))
 262 0056 70E0      		ldi r23,hi8(pm(setThrottleServo))
 263 0058 80E0      		ldi r24,lo8(.LC2)
 264 005a 90E0      		ldi r25,hi8(.LC2)
 265 005c 0E94 0000 		call cmdlineAddCommand
 203:cmdlinetest.c **** 	cmdlineAddCommand("p", 		setCamPanServo);
 266               		.stabn	68,0,203,.LM9-goCmdline
 267               	.LM9:
 268 0060 60E0      		ldi r22,lo8(pm(setCamPanServo))
 269 0062 70E0      		ldi r23,hi8(pm(setCamPanServo))
 270 0064 80E0      		ldi r24,lo8(.LC3)
 271 0066 90E0      		ldi r25,hi8(.LC3)
 272 0068 0E94 0000 		call cmdlineAddCommand
 204:cmdlinetest.c **** 	cmdlineAddCommand("i", 		setCamTiltServo);
 273               		.stabn	68,0,204,.LM10-goCmdline
 274               	.LM10:
 275 006c 60E0      		ldi r22,lo8(pm(setCamTiltServo))
 276 006e 70E0      		ldi r23,hi8(pm(setCamTiltServo))
 277 0070 80E0      		ldi r24,lo8(.LC4)
 278 0072 90E0      		ldi r25,hi8(.LC4)
 279 0074 0E94 0000 		call cmdlineAddCommand
 205:cmdlinetest.c **** 	cmdlineAddCommand("f", 		setFeedbackInterval);
 280               		.stabn	68,0,205,.LM11-goCmdline
 281               	.LM11:
 282 0078 60E0      		ldi r22,lo8(pm(setFeedbackInterval))
 283 007a 70E0      		ldi r23,hi8(pm(setFeedbackInterval))
 284 007c 80E0      		ldi r24,lo8(.LC5)
 285 007e 90E0      		ldi r25,hi8(.LC5)
 286 0080 0E94 0000 		call cmdlineAddCommand
 206:cmdlinetest.c **** 	cmdlineAddCommand("b",		getA2D);  //returns packed values -- see code
 287               		.stabn	68,0,206,.LM12-goCmdline
GAS LISTING /var/tmp//cczS1EeW.s 			page 10


 288               	.LM12:
 289 0084 60E0      		ldi r22,lo8(pm(getA2D))
 290 0086 70E0      		ldi r23,hi8(pm(getA2D))
 291 0088 80E0      		ldi r24,lo8(.LC6)
 292 008a 90E0      		ldi r25,hi8(.LC6)
 293 008c 0E94 0000 		call cmdlineAddCommand
 207:cmdlinetest.c **** 	cmdlineAddCommand("2", 		i2cMaster_Send);
 294               		.stabn	68,0,207,.LM13-goCmdline
 295               	.LM13:
 296 0090 60E0      		ldi r22,lo8(pm(i2cMaster_Send))
 297 0092 70E0      		ldi r23,hi8(pm(i2cMaster_Send))
 298 0094 80E0      		ldi r24,lo8(.LC7)
 299 0096 90E0      		ldi r25,hi8(.LC7)
 300 0098 0E94 0000 		call cmdlineAddCommand
 208:cmdlinetest.c **** 	cmdlineAddCommand("3", 		i2cMaster_Receive);
 301               		.stabn	68,0,208,.LM14-goCmdline
 302               	.LM14:
 303 009c 60E0      		ldi r22,lo8(pm(i2cMaster_Receive))
 304 009e 70E0      		ldi r23,hi8(pm(i2cMaster_Receive))
 305 00a0 80E0      		ldi r24,lo8(.LC8)
 306 00a2 90E0      		ldi r25,hi8(.LC8)
 307 00a4 0E94 0000 		call cmdlineAddCommand
 209:cmdlinetest.c **** 	cmdlineAddCommand("das",	dumpArgsStr);
 308               		.stabn	68,0,209,.LM15-goCmdline
 309               	.LM15:
 310 00a8 60E0      		ldi r22,lo8(pm(dumpArgsStr))
 311 00aa 70E0      		ldi r23,hi8(pm(dumpArgsStr))
 312 00ac 80E0      		ldi r24,lo8(.LC9)
 313 00ae 90E0      		ldi r25,hi8(.LC9)
 314 00b0 0E94 0000 		call cmdlineAddCommand
 210:cmdlinetest.c **** 	cmdlineAddCommand("dai",	dumpArgsInt);
 315               		.stabn	68,0,210,.LM16-goCmdline
 316               	.LM16:
 317 00b4 60E0      		ldi r22,lo8(pm(dumpArgsInt))
 318 00b6 70E0      		ldi r23,hi8(pm(dumpArgsInt))
 319 00b8 80E0      		ldi r24,lo8(.LC10)
 320 00ba 90E0      		ldi r25,hi8(.LC10)
 321 00bc 0E94 0000 		call cmdlineAddCommand
 211:cmdlinetest.c **** 	// send a CR to cmdline input to stimulate a prompt
 212:cmdlinetest.c **** 	cmdlineInputFunc('\r');
 322               		.stabn	68,0,212,.LM17-goCmdline
 323               	.LM17:
 324 00c0 8DE0      		ldi r24,lo8(13)
 325 00c2 0E94 0000 		call cmdlineInputFunc
 213:cmdlinetest.c **** 
 214:cmdlinetest.c **** 	// set state to run
 215:cmdlinetest.c **** 	Run = TRUE;
 326               		.stabn	68,0,215,.LM18-goCmdline
 327               	.LM18:
 328 00c6 8FEF      		ldi r24,lo8(-1)
 329 00c8 8093 0000 		sts Run,r24
 330 00cc EE24      		clr r14
 331 00ce FF24      		clr r15
 332 00d0 8701      		movw r16,r14
 333 00d2 2FC0      		rjmp .L16
 334               	.L3:
 216:cmdlinetest.c **** 
GAS LISTING /var/tmp//cczS1EeW.s 			page 11


 217:cmdlinetest.c **** 	// main loop
 218:cmdlinetest.c **** 	while(Run)
 219:cmdlinetest.c **** 	{
 220:cmdlinetest.c **** 		// pass characters received on the uart (serial port)
 221:cmdlinetest.c **** 		// into the cmdline processor
 222:cmdlinetest.c **** 		while(uartReceiveByte(&c)) cmdlineInputFunc(c);
 335               		.stabn	68,0,222,.LM19-goCmdline
 336               	.LM19:
 337 00d4 8981      		ldd r24,Y+1
 338 00d6 0E94 0000 		call cmdlineInputFunc
 339               	.L14:
 340 00da CE01      		movw r24,r28
 341 00dc 0196      		adiw r24,1
 342 00de 0E94 0000 		call uartReceiveByte
 343 00e2 8823      		tst r24
 344 00e4 B9F7      		brne .L3
 223:cmdlinetest.c **** 
 224:cmdlinetest.c **** 		// run the cmdline execution functions
 225:cmdlinetest.c **** 		cmdlineMainLoop();
 345               		.stabn	68,0,225,.LM20-goCmdline
 346               	.LM20:
 347 00e6 0E94 0000 		call cmdlineMainLoop
 226:cmdlinetest.c **** 		timesThrough++;
 348               		.stabn	68,0,226,.LM21-goCmdline
 349               	.LM21:
 350 00ea 0894      		sec
 351 00ec E11C      		adc r14,__zero_reg__
 352 00ee F11C      		adc r15,__zero_reg__
 353 00f0 011D      		adc r16,__zero_reg__
 354 00f2 111D      		adc r17,__zero_reg__
 227:cmdlinetest.c **** 		if(numTimesThrough != 0)
 355               		.stabn	68,0,227,.LM22-goCmdline
 356               	.LM22:
 357 00f4 8091 0000 		lds r24,numTimesThrough
 358 00f8 9091 0000 		lds r25,(numTimesThrough)+1
 359 00fc A091 0000 		lds r26,(numTimesThrough)+2
 360 0100 B091 0000 		lds r27,(numTimesThrough)+3
 361 0104 0097      		sbiw r24,0
 362 0106 A105      		cpc r26,__zero_reg__
 363 0108 B105      		cpc r27,__zero_reg__
 364 010a 99F0      		breq .L16
 228:cmdlinetest.c **** 		{
 229:cmdlinetest.c **** 			if((timesThrough >= numTimesThrough)) 
 365               		.stabn	68,0,229,.LM23-goCmdline
 366               	.LM23:
 367 010c E816      		cp r14,r24
 368 010e F906      		cpc r15,r25
 369 0110 0A07      		cpc r16,r26
 370 0112 1B07      		cpc r17,r27
 371 0114 74F0      		brlt .L16
 230:cmdlinetest.c **** 			{
 231:cmdlinetest.c **** 				rprintf("times through!\r\n");
 372               		.stabn	68,0,231,.LM24-goCmdline
 373               	.LM24:
 374 0116 80E0      		ldi r24,lo8(__c.1665)
 375 0118 90E0      		ldi r25,hi8(__c.1665)
 376 011a 9F93      		push r25
GAS LISTING /var/tmp//cczS1EeW.s 			page 12


 377 011c 8F93      		push r24
 378 011e 81E0      		ldi r24,lo8(1)
 379 0120 8F93      		push r24
 380 0122 0E94 0000 		call rprintf1RamRom
 381 0126 EE24      		clr r14
 382 0128 FF24      		clr r15
 383 012a 8701      		movw r16,r14
 384 012c 0F90      		pop __tmp_reg__
 385 012e 0F90      		pop __tmp_reg__
 386 0130 0F90      	 	pop __tmp_reg__
 387               	.L16:
 388               		.stabn	68,0,218,.LM25-goCmdline
 389               	.LM25:
 390 0132 8091 0000 		lds r24,Run
 391 0136 8823      		tst r24
 392 0138 81F6      		brne .L14
 232:cmdlinetest.c **** 				timesThrough = 0;
 233:cmdlinetest.c **** 			}
 234:cmdlinetest.c **** 		}
 235:cmdlinetest.c **** 	}
 236:cmdlinetest.c **** 
 237:cmdlinetest.c **** 	rprintfCRLF();
 393               		.stabn	68,0,237,.LM26-goCmdline
 394               	.LM26:
 395 013a 0E94 0000 		call rprintfCRLF
 238:cmdlinetest.c **** 	rprintf("Exited program!\r\n");
 396               		.stabn	68,0,238,.LM27-goCmdline
 397               	.LM27:
 398 013e 80E0      		ldi r24,lo8(__c.1670)
 399 0140 90E0      		ldi r25,hi8(__c.1670)
 400 0142 9F93      		push r25
 401 0144 8F93      		push r24
 402 0146 81E0      		ldi r24,lo8(1)
 403 0148 8F93      		push r24
 404 014a 0E94 0000 		call rprintf1RamRom
 405 014e 0F90      		pop __tmp_reg__
 406 0150 0F90      		pop __tmp_reg__
 407 0152 0F90      	 	pop __tmp_reg__
 408               	/* epilogue: frame size=1 */
 409 0154 2196      		adiw r28,1
 410 0156 0FB6      		in __tmp_reg__,__SREG__
 411 0158 F894      		cli
 412 015a DEBF      		out __SP_H__,r29
 413 015c 0FBE      		out __SREG__,__tmp_reg__
 414 015e CDBF      		out __SP_L__,r28
 415 0160 DF91      		pop r29
 416 0162 CF91      		pop r28
 417 0164 1F91      		pop r17
 418 0166 0F91      		pop r16
 419 0168 FF90      		pop r15
 420 016a EF90      		pop r14
 421 016c 0895      		ret
 422               	/* epilogue end (size=13) */
 423               	/* function goCmdline size 183 (156) */
 424               		.size	goCmdline, .-goCmdline
 425               		.stabs	"c:(6,1)",128,0,184,1
 426               		.stabs	"timesThrough:r(0,3)",64,0,185,14
GAS LISTING /var/tmp//cczS1EeW.s 			page 13


 427               		.stabn	192,0,0,goCmdline-goCmdline
 428               		.stabn	224,0,0,.Lscope0-goCmdline
 429               	.Lscope0:
 430               		.stabs	"",36,0,0,.Lscope0-goCmdline
 431               		.stabd	78,0,0
 432               		.stabs	"exitFunction:F(0,15)",36,0,242,exitFunction
 433               	.global	exitFunction
 434               		.type	exitFunction, @function
 435               	exitFunction:
 436               		.stabd	46,0,0
 239:cmdlinetest.c **** }
 240:cmdlinetest.c **** 
 241:cmdlinetest.c **** void exitFunction(void)
 242:cmdlinetest.c **** {
 437               		.stabn	68,0,242,.LM28-exitFunction
 438               	.LM28:
 439               	/* prologue: frame size=0 */
 440               	/* prologue end (size=0) */
 243:cmdlinetest.c **** 	// to exit, we set Run to FALSE
 244:cmdlinetest.c **** 	Run = FALSE;
 441               		.stabn	68,0,244,.LM29-exitFunction
 442               	.LM29:
 443 016e 1092 0000 		sts Run,__zero_reg__
 444               	/* epilogue: frame size=0 */
 445 0172 0895      		ret
 446               	/* epilogue end (size=1) */
 447               	/* function exitFunction size 3 (2) */
 448               		.size	exitFunction, .-exitFunction
 449               	.Lscope1:
 450               		.stabs	"",36,0,0,.Lscope1-exitFunction
 451               		.stabd	78,0,0
 452               		.section	.progmem.data
 453               		.type	__c.1690, @object
 454               		.size	__c.1690, 54
 455               	__c.1690:
 456 004f 6475 6D70 		.string	"dumpargs3 - dumps command arguments as hex integers\r\n"
 456      6172 6773 
 456      3320 2D20 
 456      6475 6D70 
 456      7320 636F 
 457               		.type	__c.1688, @object
 458               		.size	__c.1688, 58
 459               	__c.1688:
 460 0085 6475 6D70 		.string	"dumpargs2 - dumps command arguments as decimal integers\r\n"
 460      6172 6773 
 460      3220 2D20 
 460      6475 6D70 
 460      7320 636F 
 461               		.type	__c.1686, @object
 462               		.size	__c.1686, 49
 463               	__c.1686:
 464 00bf 6475 6D70 		.string	"dumpargs1 - dumps command arguments as strings\r\n"
 464      6172 6773 
 464      3120 2D20 
 464      6475 6D70 
 464      7320 636F 
 465               		.type	__c.1684, @object
GAS LISTING /var/tmp//cczS1EeW.s 			page 14


 466               		.size	__c.1684, 42
 467               	__c.1684:
 468 00f0 6865 6C70 		.string	"help      - displays available commands\r\n"
 468      2020 2020 
 468      2020 2D20 
 468      6469 7370 
 468      6C61 7973 
 469               		.type	__c.1682, @object
 470               		.size	__c.1682, 26
 471               	__c.1682:
 472 011a 4176 6169 		.string	"Available commands are:\r\n"
 472      6C61 626C 
 472      6520 636F 
 472      6D6D 616E 
 472      6473 2061 
 473               		.text
 474               		.stabs	"helpFunction:F(0,15)",36,0,248,helpFunction
 475               	.global	helpFunction
 476               		.type	helpFunction, @function
 477               	helpFunction:
 478               		.stabd	46,0,0
 245:cmdlinetest.c **** }
 246:cmdlinetest.c **** 
 247:cmdlinetest.c **** void helpFunction(void)
 248:cmdlinetest.c **** {
 479               		.stabn	68,0,248,.LM30-helpFunction
 480               	.LM30:
 481               	/* prologue: frame size=0 */
 482 0174 1F93      		push r17
 483               	/* prologue end (size=1) */
 249:cmdlinetest.c **** 	rprintfCRLF();
 484               		.stabn	68,0,249,.LM31-helpFunction
 485               	.LM31:
 486 0176 0E94 0000 		call rprintfCRLF
 250:cmdlinetest.c **** 
 251:cmdlinetest.c **** 	rprintf("Available commands are:\r\n");
 487               		.stabn	68,0,251,.LM32-helpFunction
 488               	.LM32:
 489 017a 80E0      		ldi r24,lo8(__c.1682)
 490 017c 90E0      		ldi r25,hi8(__c.1682)
 491 017e 9F93      		push r25
 492 0180 8F93      		push r24
 493 0182 11E0      		ldi r17,lo8(1)
 494 0184 1F93      		push r17
 495 0186 0E94 0000 		call rprintf1RamRom
 252:cmdlinetest.c **** 	rprintf("help      - displays available commands\r\n");
 496               		.stabn	68,0,252,.LM33-helpFunction
 497               	.LM33:
 498 018a 80E0      		ldi r24,lo8(__c.1684)
 499 018c 90E0      		ldi r25,hi8(__c.1684)
 500 018e 9F93      		push r25
 501 0190 8F93      		push r24
 502 0192 1F93      		push r17
 503 0194 0E94 0000 		call rprintf1RamRom
 253:cmdlinetest.c **** 	rprintf("dumpargs1 - dumps command arguments as strings\r\n");
 504               		.stabn	68,0,253,.LM34-helpFunction
 505               	.LM34:
GAS LISTING /var/tmp//cczS1EeW.s 			page 15


 506 0198 80E0      		ldi r24,lo8(__c.1686)
 507 019a 90E0      		ldi r25,hi8(__c.1686)
 508 019c 9F93      		push r25
 509 019e 8F93      		push r24
 510 01a0 1F93      		push r17
 511 01a2 0E94 0000 		call rprintf1RamRom
 254:cmdlinetest.c **** 	rprintf("dumpargs2 - dumps command arguments as decimal integers\r\n");
 512               		.stabn	68,0,254,.LM35-helpFunction
 513               	.LM35:
 514 01a6 80E0      		ldi r24,lo8(__c.1688)
 515 01a8 90E0      		ldi r25,hi8(__c.1688)
 516 01aa 9F93      		push r25
 517 01ac 8F93      		push r24
 518 01ae 1F93      		push r17
 519 01b0 0E94 0000 		call rprintf1RamRom
 255:cmdlinetest.c **** 	rprintf("dumpargs3 - dumps command arguments as hex integers\r\n");
 520               		.stabn	68,0,255,.LM36-helpFunction
 521               	.LM36:
 522 01b4 80E0      		ldi r24,lo8(__c.1690)
 523 01b6 90E0      		ldi r25,hi8(__c.1690)
 524 01b8 9F93      		push r25
 525 01ba 8F93      		push r24
 526 01bc 1F93      		push r17
 527 01be 0E94 0000 		call rprintf1RamRom
 256:cmdlinetest.c **** 
 257:cmdlinetest.c **** 	rprintfCRLF();
 528               		.stabn	68,0,257,.LM37-helpFunction
 529               	.LM37:
 530 01c2 0E94 0000 		call rprintfCRLF
 531 01c6 8DB7      		in r24,__SP_L__
 532 01c8 9EB7      		in r25,__SP_H__
 533 01ca 0F96      		adiw r24,15
 534 01cc 0FB6      		in __tmp_reg__,__SREG__
 535 01ce F894      		cli
 536 01d0 9EBF      		out __SP_H__,r25
 537 01d2 0FBE      		out __SREG__,__tmp_reg__
 538 01d4 8DBF      		out __SP_L__,r24
 539               	/* epilogue: frame size=0 */
 540 01d6 1F91      		pop r17
 541 01d8 0895      		ret
 542               	/* epilogue end (size=2) */
 543               	/* function helpFunction size 51 (48) */
 544               		.size	helpFunction, .-helpFunction
 545               	.Lscope2:
 546               		.stabs	"",36,0,0,.Lscope2-helpFunction
 547               		.stabd	78,0,0
 548               		.section	.progmem.data
 549               		.type	__c.1703, @object
 550               		.size	__c.1703, 7
 551               	__c.1703:
 552 0134 4172 6733 		.string	"Arg3: "
 552      3A20 00
 553               		.type	__c.1701, @object
 554               		.size	__c.1701, 7
 555               	__c.1701:
 556 013b 4172 6732 		.string	"Arg2: "
 556      3A20 00
GAS LISTING /var/tmp//cczS1EeW.s 			page 16


 557               		.type	__c.1699, @object
 558               		.size	__c.1699, 7
 559               	__c.1699:
 560 0142 4172 6731 		.string	"Arg1: "
 560      3A20 00
 561               		.type	__c.1697, @object
 562               		.size	__c.1697, 7
 563               	__c.1697:
 564 0149 4172 6730 		.string	"Arg0: "
 564      3A20 00
 565               		.type	__c.1695, @object
 566               		.size	__c.1695, 28
 567               	__c.1695:
 568 0150 4475 6D70 		.string	"Dump arguments as strings\r\n"
 568      2061 7267 
 568      756D 656E 
 568      7473 2061 
 568      7320 7374 
 569               		.text
 570               		.stabs	"dumpArgsStr:F(0,15)",36,0,261,dumpArgsStr
 571               	.global	dumpArgsStr
 572               		.type	dumpArgsStr, @function
 573               	dumpArgsStr:
 574               		.stabd	46,0,0
 258:cmdlinetest.c **** }
 259:cmdlinetest.c **** 
 260:cmdlinetest.c **** void dumpArgsStr(void)
 261:cmdlinetest.c **** {
 575               		.stabn	68,0,261,.LM38-dumpArgsStr
 576               	.LM38:
 577               	/* prologue: frame size=0 */
 578               	/* prologue end (size=0) */
 262:cmdlinetest.c **** 	rprintfCRLF();
 579               		.stabn	68,0,262,.LM39-dumpArgsStr
 580               	.LM39:
 581 01da 0E94 0000 		call rprintfCRLF
 263:cmdlinetest.c **** 	rprintf("Dump arguments as strings\r\n");
 582               		.stabn	68,0,263,.LM40-dumpArgsStr
 583               	.LM40:
 584 01de 80E0      		ldi r24,lo8(__c.1695)
 585 01e0 90E0      		ldi r25,hi8(__c.1695)
 586 01e2 9F93      		push r25
 587 01e4 8F93      		push r24
 588 01e6 81E0      		ldi r24,lo8(1)
 589 01e8 8F93      		push r24
 590 01ea 0E94 0000 		call rprintf1RamRom
 264:cmdlinetest.c **** 
 265:cmdlinetest.c **** 	rprintfProgStrM("Arg0: "); rprintfStr(cmdlineGetArgStr(0)); rprintfCRLF();
 591               		.stabn	68,0,265,.LM41-dumpArgsStr
 592               	.LM41:
 593 01ee 80E0      		ldi r24,lo8(__c.1697)
 594 01f0 90E0      		ldi r25,hi8(__c.1697)
 595 01f2 0E94 0000 		call rprintfProgStr
 596 01f6 80E0      		ldi r24,lo8(0)
 597 01f8 0E94 0000 		call cmdlineGetArgStr
 598 01fc 0E94 0000 		call rprintfStr
 599 0200 0E94 0000 		call rprintfCRLF
GAS LISTING /var/tmp//cczS1EeW.s 			page 17


 266:cmdlinetest.c **** 	rprintfProgStrM("Arg1: "); rprintfStr(cmdlineGetArgStr(1)); rprintfCRLF();
 600               		.stabn	68,0,266,.LM42-dumpArgsStr
 601               	.LM42:
 602 0204 80E0      		ldi r24,lo8(__c.1699)
 603 0206 90E0      		ldi r25,hi8(__c.1699)
 604 0208 0E94 0000 		call rprintfProgStr
 605 020c 81E0      		ldi r24,lo8(1)
 606 020e 0E94 0000 		call cmdlineGetArgStr
 607 0212 0E94 0000 		call rprintfStr
 608 0216 0E94 0000 		call rprintfCRLF
 267:cmdlinetest.c **** 	rprintfProgStrM("Arg2: "); rprintfStr(cmdlineGetArgStr(2)); rprintfCRLF();
 609               		.stabn	68,0,267,.LM43-dumpArgsStr
 610               	.LM43:
 611 021a 80E0      		ldi r24,lo8(__c.1701)
 612 021c 90E0      		ldi r25,hi8(__c.1701)
 613 021e 0E94 0000 		call rprintfProgStr
 614 0222 82E0      		ldi r24,lo8(2)
 615 0224 0E94 0000 		call cmdlineGetArgStr
 616 0228 0E94 0000 		call rprintfStr
 617 022c 0E94 0000 		call rprintfCRLF
 268:cmdlinetest.c **** 	rprintfProgStrM("Arg3: "); rprintfStr(cmdlineGetArgStr(3)); rprintfCRLF();
 618               		.stabn	68,0,268,.LM44-dumpArgsStr
 619               	.LM44:
 620 0230 80E0      		ldi r24,lo8(__c.1703)
 621 0232 90E0      		ldi r25,hi8(__c.1703)
 622 0234 0E94 0000 		call rprintfProgStr
 623 0238 83E0      		ldi r24,lo8(3)
 624 023a 0E94 0000 		call cmdlineGetArgStr
 625 023e 0E94 0000 		call rprintfStr
 626 0242 0E94 0000 		call rprintfCRLF
 269:cmdlinetest.c **** 	rprintfCRLF();
 627               		.stabn	68,0,269,.LM45-dumpArgsStr
 628               	.LM45:
 629 0246 0E94 0000 		call rprintfCRLF
 630 024a 0F90      		pop __tmp_reg__
 631 024c 0F90      		pop __tmp_reg__
 632 024e 0F90      	 	pop __tmp_reg__
 633               	/* epilogue: frame size=0 */
 634 0250 0895      		ret
 635               	/* epilogue end (size=1) */
 636               	/* function dumpArgsStr size 60 (59) */
 637               		.size	dumpArgsStr, .-dumpArgsStr
 638               	.Lscope3:
 639               		.stabs	"",36,0,0,.Lscope3-dumpArgsStr
 640               		.stabd	78,0,0
 641               		.section	.progmem.data
 642               		.type	__c.1722, @object
 643               		.size	__c.1722, 14
 644               	__c.1722:
 645 016c 4172 6733 		.string	"Arg3 as int: "
 645      2061 7320 
 645      696E 743A 
 645      2000 
 646               		.type	__c.1720, @object
 647               		.size	__c.1720, 14
 648               	__c.1720:
 649 017a 4172 6732 		.string	"Arg2 as int: "
GAS LISTING /var/tmp//cczS1EeW.s 			page 18


 649      2061 7320 
 649      696E 743A 
 649      2000 
 650               		.type	__c.1718, @object
 651               		.size	__c.1718, 14
 652               	__c.1718:
 653 0188 4172 6731 		.string	"Arg1 as int: "
 653      2061 7320 
 653      696E 743A 
 653      2000 
 654               		.type	__c.1716, @object
 655               		.size	__c.1716, 29
 656               	__c.1716:
 657 0196 4475 6D70 		.string	"Dump arguments as integers\r\n"
 657      2061 7267 
 657      756D 656E 
 657      7473 2061 
 657      7320 696E 
 658               		.text
 659               		.stabs	"dumpArgsInt:F(0,15)",36,0,273,dumpArgsInt
 660               	.global	dumpArgsInt
 661               		.type	dumpArgsInt, @function
 662               	dumpArgsInt:
 663               		.stabd	46,0,0
 270:cmdlinetest.c **** }
 271:cmdlinetest.c **** 
 272:cmdlinetest.c **** void dumpArgsInt(void)
 273:cmdlinetest.c **** {
 664               		.stabn	68,0,273,.LM46-dumpArgsInt
 665               	.LM46:
 666               	/* prologue: frame size=0 */
 667 0252 DF92      		push r13
 668 0254 EF92      		push r14
 669 0256 FF92      		push r15
 670 0258 0F93      		push r16
 671 025a 1F93      		push r17
 672               	/* prologue end (size=5) */
 274:cmdlinetest.c **** 	rprintfCRLF();
 673               		.stabn	68,0,274,.LM47-dumpArgsInt
 674               	.LM47:
 675 025c 0E94 0000 		call rprintfCRLF
 275:cmdlinetest.c **** 	rprintf("Dump arguments as integers\r\n");
 676               		.stabn	68,0,275,.LM48-dumpArgsInt
 677               	.LM48:
 678 0260 80E0      		ldi r24,lo8(__c.1716)
 679 0262 90E0      		ldi r25,hi8(__c.1716)
 680 0264 9F93      		push r25
 681 0266 8F93      		push r24
 682 0268 81E0      		ldi r24,lo8(1)
 683 026a D82E      		mov r13,r24
 684 026c DF92      		push r13
 685 026e 0E94 0000 		call rprintf1RamRom
 276:cmdlinetest.c **** 
 277:cmdlinetest.c **** 	// printf %d will work but only if your numbers are less than 16-bit values
 278:cmdlinetest.c **** 	//rprintf("Arg1 as int: %d\r\n", cmdlineGetArgInt(1));
 279:cmdlinetest.c **** 	//rprintf("Arg2 as int: %d\r\n", cmdlineGetArgInt(2));
 280:cmdlinetest.c **** 	//rprintf("Arg3 as int: %d\r\n", cmdlineGetArgInt(3));
GAS LISTING /var/tmp//cczS1EeW.s 			page 19


 281:cmdlinetest.c **** 
 282:cmdlinetest.c **** 	// printfNum is good for longs too
 283:cmdlinetest.c **** 	rprintf("Arg1 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(1)); rprintfCRLF();
 686               		.stabn	68,0,283,.LM49-dumpArgsInt
 687               	.LM49:
 688 0272 80E0      		ldi r24,lo8(__c.1718)
 689 0274 90E0      		ldi r25,hi8(__c.1718)
 690 0276 9F93      		push r25
 691 0278 8F93      		push r24
 692 027a DF92      		push r13
 693 027c 0E94 0000 		call rprintf1RamRom
 694 0280 81E0      		ldi r24,lo8(1)
 695 0282 0E94 0000 		call cmdlineGetArgInt
 696 0286 7B01      		movw r14,r22
 697 0288 8C01      		movw r16,r24
 698 028a 20E2      		ldi r18,lo8(32)
 699 028c 4FEF      		ldi r20,lo8(-1)
 700 028e 6AE0      		ldi r22,lo8(10)
 701 0290 8AE0      		ldi r24,lo8(10)
 702 0292 0E94 0000 		call rprintfNum
 703 0296 0E94 0000 		call rprintfCRLF
 284:cmdlinetest.c **** 	rprintf("Arg2 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(2)); rprintfCRLF();
 704               		.stabn	68,0,284,.LM50-dumpArgsInt
 705               	.LM50:
 706 029a 80E0      		ldi r24,lo8(__c.1720)
 707 029c 90E0      		ldi r25,hi8(__c.1720)
 708 029e 9F93      		push r25
 709 02a0 8F93      		push r24
 710 02a2 DF92      		push r13
 711 02a4 0E94 0000 		call rprintf1RamRom
 712 02a8 82E0      		ldi r24,lo8(2)
 713 02aa 0E94 0000 		call cmdlineGetArgInt
 714 02ae 7B01      		movw r14,r22
 715 02b0 8C01      		movw r16,r24
 716 02b2 20E2      		ldi r18,lo8(32)
 717 02b4 4FEF      		ldi r20,lo8(-1)
 718 02b6 6AE0      		ldi r22,lo8(10)
 719 02b8 8AE0      		ldi r24,lo8(10)
 720 02ba 0E94 0000 		call rprintfNum
 721 02be 0E94 0000 		call rprintfCRLF
 285:cmdlinetest.c **** 	rprintf("Arg3 as int: "); rprintfNum(10, 10, TRUE, ' ', cmdlineGetArgInt(3)); rprintfCRLF();
 722               		.stabn	68,0,285,.LM51-dumpArgsInt
 723               	.LM51:
 724 02c2 80E0      		ldi r24,lo8(__c.1722)
 725 02c4 90E0      		ldi r25,hi8(__c.1722)
 726 02c6 9F93      		push r25
 727 02c8 8F93      		push r24
 728 02ca DF92      		push r13
 729 02cc 0E94 0000 		call rprintf1RamRom
 730 02d0 83E0      		ldi r24,lo8(3)
 731 02d2 0E94 0000 		call cmdlineGetArgInt
 732 02d6 7B01      		movw r14,r22
 733 02d8 8C01      		movw r16,r24
 734 02da 20E2      		ldi r18,lo8(32)
 735 02dc 4FEF      		ldi r20,lo8(-1)
 736 02de 6AE0      		ldi r22,lo8(10)
 737 02e0 8AE0      		ldi r24,lo8(10)
GAS LISTING /var/tmp//cczS1EeW.s 			page 20


 738 02e2 0E94 0000 		call rprintfNum
 739 02e6 0E94 0000 		call rprintfCRLF
 286:cmdlinetest.c **** 	rprintfCRLF();
 740               		.stabn	68,0,286,.LM52-dumpArgsInt
 741               	.LM52:
 742 02ea 0E94 0000 		call rprintfCRLF
 743 02ee 8DB7      		in r24,__SP_L__
 744 02f0 9EB7      		in r25,__SP_H__
 745 02f2 0C96      		adiw r24,12
 746 02f4 0FB6      		in __tmp_reg__,__SREG__
 747 02f6 F894      		cli
 748 02f8 9EBF      		out __SP_H__,r25
 749 02fa 0FBE      		out __SREG__,__tmp_reg__
 750 02fc 8DBF      		out __SP_L__,r24
 751               	/* epilogue: frame size=0 */
 752 02fe 1F91      		pop r17
 753 0300 0F91      		pop r16
 754 0302 FF90      		pop r15
 755 0304 EF90      		pop r14
 756 0306 DF90      		pop r13
 757 0308 0895      		ret
 758               	/* epilogue end (size=6) */
 759               	/* function dumpArgsInt size 92 (81) */
 760               		.size	dumpArgsInt, .-dumpArgsInt
 761               	.Lscope4:
 762               		.stabs	"",36,0,0,.Lscope4-dumpArgsInt
 763               		.stabd	78,0,0
 764               		.section	.progmem.data
 765               		.type	__c.1736, @object
 766               		.size	__c.1736, 14
 767               	__c.1736:
 768 01b3 4172 6733 		.string	"Arg3 as hex: "
 768      2061 7320 
 768      6865 783A 
 768      2000 
 769               		.type	__c.1734, @object
 770               		.size	__c.1734, 14
 771               	__c.1734:
 772 01c1 4172 6732 		.string	"Arg2 as hex: "
 772      2061 7320 
 772      6865 783A 
 772      2000 
 773               		.type	__c.1732, @object
 774               		.size	__c.1732, 14
 775               	__c.1732:
 776 01cf 4172 6731 		.string	"Arg1 as hex: "
 776      2061 7320 
 776      6865 783A 
 776      2000 
 777               		.type	__c.1730, @object
 778               		.size	__c.1730, 33
 779               	__c.1730:
 780 01dd 4475 6D70 		.string	"Dump arguments as hex integers\r\n"
 780      2061 7267 
 780      756D 656E 
 780      7473 2061 
 780      7320 6865 
GAS LISTING /var/tmp//cczS1EeW.s 			page 21


 781               		.text
 782               		.stabs	"dumpArgsHex:F(0,15)",36,0,290,dumpArgsHex
 783               	.global	dumpArgsHex
 784               		.type	dumpArgsHex, @function
 785               	dumpArgsHex:
 786               		.stabd	46,0,0
 287:cmdlinetest.c **** }
 288:cmdlinetest.c **** 
 289:cmdlinetest.c **** void dumpArgsHex(void)
 290:cmdlinetest.c **** {
 787               		.stabn	68,0,290,.LM53-dumpArgsHex
 788               	.LM53:
 789               	/* prologue: frame size=0 */
 790 030a DF92      		push r13
 791 030c EF92      		push r14
 792 030e FF92      		push r15
 793 0310 0F93      		push r16
 794 0312 1F93      		push r17
 795               	/* prologue end (size=5) */
 291:cmdlinetest.c **** 	rprintfCRLF();
 796               		.stabn	68,0,291,.LM54-dumpArgsHex
 797               	.LM54:
 798 0314 0E94 0000 		call rprintfCRLF
 292:cmdlinetest.c **** 	rprintf("Dump arguments as hex integers\r\n");
 799               		.stabn	68,0,292,.LM55-dumpArgsHex
 800               	.LM55:
 801 0318 80E0      		ldi r24,lo8(__c.1730)
 802 031a 90E0      		ldi r25,hi8(__c.1730)
 803 031c 9F93      		push r25
 804 031e 8F93      		push r24
 805 0320 91E0      		ldi r25,lo8(1)
 806 0322 D92E      		mov r13,r25
 807 0324 DF92      		push r13
 808 0326 0E94 0000 		call rprintf1RamRom
 293:cmdlinetest.c **** 
 294:cmdlinetest.c **** 	rprintf("Arg1 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(1)); rprintfCRLF();
 809               		.stabn	68,0,294,.LM56-dumpArgsHex
 810               	.LM56:
 811 032a 80E0      		ldi r24,lo8(__c.1732)
 812 032c 90E0      		ldi r25,hi8(__c.1732)
 813 032e 9F93      		push r25
 814 0330 8F93      		push r24
 815 0332 DF92      		push r13
 816 0334 0E94 0000 		call rprintf1RamRom
 817 0338 81E0      		ldi r24,lo8(1)
 818 033a 0E94 0000 		call cmdlineGetArgHex
 819 033e 7B01      		movw r14,r22
 820 0340 8C01      		movw r16,r24
 821 0342 20E2      		ldi r18,lo8(32)
 822 0344 40E0      		ldi r20,lo8(0)
 823 0346 68E0      		ldi r22,lo8(8)
 824 0348 80E1      		ldi r24,lo8(16)
 825 034a 0E94 0000 		call rprintfNum
 826 034e 0E94 0000 		call rprintfCRLF
 295:cmdlinetest.c **** 	rprintf("Arg2 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(2)); rprintfCRLF();
 827               		.stabn	68,0,295,.LM57-dumpArgsHex
 828               	.LM57:
GAS LISTING /var/tmp//cczS1EeW.s 			page 22


 829 0352 80E0      		ldi r24,lo8(__c.1734)
 830 0354 90E0      		ldi r25,hi8(__c.1734)
 831 0356 9F93      		push r25
 832 0358 8F93      		push r24
 833 035a DF92      		push r13
 834 035c 0E94 0000 		call rprintf1RamRom
 835 0360 82E0      		ldi r24,lo8(2)
 836 0362 0E94 0000 		call cmdlineGetArgHex
 837 0366 7B01      		movw r14,r22
 838 0368 8C01      		movw r16,r24
 839 036a 20E2      		ldi r18,lo8(32)
 840 036c 40E0      		ldi r20,lo8(0)
 841 036e 68E0      		ldi r22,lo8(8)
 842 0370 80E1      		ldi r24,lo8(16)
 843 0372 0E94 0000 		call rprintfNum
 844 0376 0E94 0000 		call rprintfCRLF
 296:cmdlinetest.c **** 	rprintf("Arg3 as hex: "); rprintfNum(16, 8, FALSE, ' ', cmdlineGetArgHex(3)); rprintfCRLF();
 845               		.stabn	68,0,296,.LM58-dumpArgsHex
 846               	.LM58:
 847 037a 80E0      		ldi r24,lo8(__c.1736)
 848 037c 90E0      		ldi r25,hi8(__c.1736)
 849 037e 9F93      		push r25
 850 0380 8F93      		push r24
 851 0382 DF92      		push r13
 852 0384 0E94 0000 		call rprintf1RamRom
 853 0388 83E0      		ldi r24,lo8(3)
 854 038a 0E94 0000 		call cmdlineGetArgHex
 855 038e 7B01      		movw r14,r22
 856 0390 8C01      		movw r16,r24
 857 0392 20E2      		ldi r18,lo8(32)
 858 0394 40E0      		ldi r20,lo8(0)
 859 0396 68E0      		ldi r22,lo8(8)
 860 0398 80E1      		ldi r24,lo8(16)
 861 039a 0E94 0000 		call rprintfNum
 862 039e 0E94 0000 		call rprintfCRLF
 297:cmdlinetest.c **** 	rprintfCRLF();
 863               		.stabn	68,0,297,.LM59-dumpArgsHex
 864               	.LM59:
 865 03a2 0E94 0000 		call rprintfCRLF
 866 03a6 8DB7      		in r24,__SP_L__
 867 03a8 9EB7      		in r25,__SP_H__
 868 03aa 0C96      		adiw r24,12
 869 03ac 0FB6      		in __tmp_reg__,__SREG__
 870 03ae F894      		cli
 871 03b0 9EBF      		out __SP_H__,r25
 872 03b2 0FBE      		out __SREG__,__tmp_reg__
 873 03b4 8DBF      		out __SP_L__,r24
 874               	/* epilogue: frame size=0 */
 875 03b6 1F91      		pop r17
 876 03b8 0F91      		pop r16
 877 03ba FF90      		pop r15
 878 03bc EF90      		pop r14
 879 03be DF90      		pop r13
 880 03c0 0895      		ret
 881               	/* epilogue end (size=6) */
 882               	/* function dumpArgsHex size 92 (81) */
 883               		.size	dumpArgsHex, .-dumpArgsHex
GAS LISTING /var/tmp//cczS1EeW.s 			page 23


 884               	.Lscope5:
 885               		.stabs	"",36,0,0,.Lscope5-dumpArgsHex
 886               		.stabd	78,0,0
 887               		.stabs	"i2cSetup:F(0,15)",36,0,301,i2cSetup
 888               	.global	i2cSetup
 889               		.type	i2cSetup, @function
 890               	i2cSetup:
 891               		.stabd	46,0,0
 298:cmdlinetest.c **** }
 299:cmdlinetest.c **** 
 300:cmdlinetest.c **** void i2cSetup(void)
 301:cmdlinetest.c **** {
 892               		.stabn	68,0,301,.LM60-i2cSetup
 893               	.LM60:
 894               	/* prologue: frame size=0 */
 895               	/* prologue end (size=0) */
 302:cmdlinetest.c **** 	// initialize i2c function library
 303:cmdlinetest.c **** 	i2cInit();
 896               		.stabn	68,0,303,.LM61-i2cSetup
 897               	.LM61:
 898 03c2 0E94 0000 		call i2cInit
 304:cmdlinetest.c **** 	// set local device address and allow response to general call
 305:cmdlinetest.c **** 	i2cSetLocalDeviceAddr(LOCAL_ADDR, TRUE);
 899               		.stabn	68,0,305,.LM62-i2cSetup
 900               	.LM62:
 901 03c6 6FEF      		ldi r22,lo8(-1)
 902 03c8 80EA      		ldi r24,lo8(-96)
 903 03ca 0E94 0000 		call i2cSetLocalDeviceAddr
 306:cmdlinetest.c **** 	// set the Slave Receive Handler function
 307:cmdlinetest.c **** 	// (this function will run whenever a master somewhere else on the bus
 308:cmdlinetest.c **** 	//  writes data to us as a slave)
 309:cmdlinetest.c **** 	i2cSetSlaveReceiveHandler( i2cSlaveReceiveService );
 904               		.stabn	68,0,309,.LM63-i2cSetup
 905               	.LM63:
 906 03ce 80E0      		ldi r24,lo8(pm(i2cSlaveReceiveService))
 907 03d0 90E0      		ldi r25,hi8(pm(i2cSlaveReceiveService))
 908 03d2 0E94 0000 		call i2cSetSlaveReceiveHandler
 310:cmdlinetest.c **** 	// set the Slave Transmit Handler function
 311:cmdlinetest.c **** 	// (this function will run whenever a master somewhere else on the bus
 312:cmdlinetest.c **** 	//  attempts to read data from us as a slave)
 313:cmdlinetest.c **** 	i2cSetSlaveTransmitHandler( i2cSlaveTransmitService );
 909               		.stabn	68,0,313,.LM64-i2cSetup
 910               	.LM64:
 911 03d6 80E0      		ldi r24,lo8(pm(i2cSlaveTransmitService))
 912 03d8 90E0      		ldi r25,hi8(pm(i2cSlaveTransmitService))
 913 03da 0E94 0000 		call i2cSetSlaveTransmitHandler
 914               	/* epilogue: frame size=0 */
 915 03de 0895      		ret
 916               	/* epilogue end (size=1) */
 917               	/* function i2cSetup size 15 (14) */
 918               		.size	i2cSetup, .-i2cSetup
 919               	.Lscope6:
 920               		.stabs	"",36,0,0,.Lscope6-i2cSetup
 921               		.stabd	78,0,0
 922               		.section	.progmem.data
 923               		.type	__c.1649, @object
 924               		.size	__c.1649, 55
GAS LISTING /var/tmp//cczS1EeW.s 			page 24


 925               	__c.1649:
 926 01fe 2A2A 2A2A 		.string	"**********************powerup*************************"
 926      2A2A 2A2A 
 926      2A2A 2A2A 
 926      2A2A 2A2A 
 926      2A2A 2A2A 
 927               		.text
 928               		.stabs	"main:F(0,1)",36,0,111,main
 929               	.global	main
 930               		.type	main, @function
 931               	main:
 932               		.stabd	46,0,0
 933               		.stabn	68,0,111,.LM65-main
 934               	.LM65:
 935               	/* prologue: frame size=0 */
 936 03e0 C0E0      		ldi r28,lo8(__stack - 0)
 937 03e2 D0E0      		ldi r29,hi8(__stack - 0)
 938 03e4 DEBF      		out __SP_H__,r29
 939 03e6 CDBF      		out __SP_L__,r28
 940               	/* prologue end (size=4) */
 941               		.stabn	68,0,114,.LM66-main
 942               	.LM66:
 943 03e8 0E94 0000 		call uartInit
 944               		.stabn	68,0,115,.LM67-main
 945               	.LM67:
 946 03ec 60E0      		ldi r22,lo8(57600)
 947 03ee 71EE      		ldi r23,hi8(57600)
 948 03f0 80E0      		ldi r24,hlo8(57600)
 949 03f2 90E0      		ldi r25,hhi8(57600)
 950 03f4 0E94 0000 		call uartSetBaudRate
 951               		.stabn	68,0,117,.LM68-main
 952               	.LM68:
 953 03f8 80E0      		ldi r24,lo8(pm(uartSendByte))
 954 03fa 90E0      		ldi r25,hi8(pm(uartSendByte))
 955 03fc 0E94 0000 		call rprintfInit
 956               		.stabn	68,0,120,.LM69-main
 957               	.LM69:
 958 0400 0E94 0000 		call a2dInit
 959               		.stabn	68,0,123,.LM70-main
 960               	.LM70:
 961 0404 1ABA      		out 58-0x20,__zero_reg__
 962               		.stabn	68,0,125,.LM71-main
 963               	.LM71:
 964 0406 1BBA      		out 59-0x20,__zero_reg__
 965               		.stabn	68,0,132,.LM72-main
 966               	.LM72:
 967 0408 85E0      		ldi r24,lo8(5)
 968 040a 0E94 0000 		call a2dSetPrescaler
 969               		.stabn	68,0,137,.LM73-main
 970               	.LM73:
 971 040e 81E0      		ldi r24,lo8(1)
 972 0410 0E94 0000 		call a2dSetReference
 973               		.stabn	68,0,144,.LM74-main
 974               	.LM74:
 975 0414 0E94 0000 		call timerInit
 976               		.stabn	68,0,148,.LM75-main
 977               	.LM75:
GAS LISTING /var/tmp//cczS1EeW.s 			page 25


 978 0418 0E94 0000 		call vt100Init
 979               		.stabn	68,0,151,.LM76-main
 980               	.LM76:
 981 041c 84E6      		ldi r24,lo8(100)
 982 041e 90E0      		ldi r25,hi8(100)
 983 0420 0E94 0000 		call timerPause
 984               		.stabn	68,0,154,.LM77-main
 985               	.LM77:
 986 0424 0E94 0000 		call i2cSetup
 987               		.stabn	68,0,158,.LM78-main
 988               	.LM78:
 989 0428 0E94 0000 		call servoInit
 990               		.stabn	68,0,161,.LM79-main
 991               	.LM79:
 992 042c 42E0      		ldi r20,lo8(2)
 993 042e 65E1      		ldi r22,lo8(21)
 994 0430 80E0      		ldi r24,lo8(0)
 995 0432 0E94 0000 		call servoSetChannelIO
 996               		.stabn	68,0,162,.LM80-main
 997               	.LM80:
 998 0436 43E0      		ldi r20,lo8(3)
 999 0438 65E1      		ldi r22,lo8(21)
 1000 043a 81E0      		ldi r24,lo8(1)
 1001 043c 0E94 0000 		call servoSetChannelIO
 1002               		.stabn	68,0,163,.LM81-main
 1003               	.LM81:
 1004 0440 44E0      		ldi r20,lo8(4)
 1005 0442 65E1      		ldi r22,lo8(21)
 1006 0444 82E0      		ldi r24,lo8(2)
 1007 0446 0E94 0000 		call servoSetChannelIO
 1008               		.stabn	68,0,164,.LM82-main
 1009               	.LM82:
 1010 044a 45E0      		ldi r20,lo8(5)
 1011 044c 65E1      		ldi r22,lo8(21)
 1012 044e 83E0      		ldi r24,lo8(3)
 1013 0450 0E94 0000 		call servoSetChannelIO
 1014               		.stabn	68,0,165,.LM83-main
 1015               	.LM83:
 1016 0454 46E0      		ldi r20,lo8(6)
 1017 0456 65E1      		ldi r22,lo8(21)
 1018 0458 84E0      		ldi r24,lo8(4)
 1019 045a 0E94 0000 		call servoSetChannelIO
 1020               		.stabn	68,0,167,.LM84-main
 1021               	.LM84:
 1022 045e 8CEF      		ldi r24,lo8(-4)
 1023 0460 84BB      		out 52-0x20,r24
 1024               		.stabn	68,0,173,.LM85-main
 1025               	.LM85:
 1026 0462 80E0      		ldi r24,lo8(__c.1649)
 1027 0464 90E0      		ldi r25,hi8(__c.1649)
 1028 0466 9F93      		push r25
 1029 0468 8F93      		push r24
 1030 046a 81E0      		ldi r24,lo8(1)
 1031 046c 8F93      		push r24
 1032 046e 0E94 0000 		call rprintf1RamRom
 1033               		.stabn	68,0,177,.LM86-main
 1034               	.LM86:
GAS LISTING /var/tmp//cczS1EeW.s 			page 26


 1035 0472 0E94 0000 		call goCmdline
 1036 0476 0F90      		pop __tmp_reg__
 1037 0478 0F90      		pop __tmp_reg__
 1038 047a 0F90      	 	pop __tmp_reg__
 1039               		.stabn	68,0,180,.LM87-main
 1040               	.LM87:
 1041 047c 80E0      		ldi r24,lo8(0)
 1042 047e 90E0      		ldi r25,hi8(0)
 1043               	/* epilogue: frame size=0 */
 1044 0480 0C94 0000 		jmp exit
 1045               	/* epilogue end (size=2) */
 1046               	/* function main size 82 (76) */
 1047               		.size	main, .-main
 1048               	.Lscope7:
 1049               		.stabs	"",36,0,0,.Lscope7-main
 1050               		.stabd	78,0,0
 1051               		.stabs	"i2cSlaveReceiveService:F(0,15)",36,0,317,i2cSlaveReceiveService
 1052               		.stabs	"receiveDataLength:P(6,1)",64,0,316,25
 1053               		.stabs	"receiveData:P(0,16)=*(6,1)",64,0,316,26
 1054               	.global	i2cSlaveReceiveService
 1055               		.type	i2cSlaveReceiveService, @function
 1056               	i2cSlaveReceiveService:
 1057               		.stabd	46,0,0
 314:cmdlinetest.c **** }
 315:cmdlinetest.c **** // slave operations
 316:cmdlinetest.c **** void i2cSlaveReceiveService(u08 receiveDataLength, u08* receiveData)
 317:cmdlinetest.c **** {
 1058               		.stabn	68,0,317,.LM88-i2cSlaveReceiveService
 1059               	.LM88:
 1060               	/* prologue: frame size=0 */
 1061               	/* prologue end (size=0) */
 1062 0484 982F      		mov r25,r24
 1063 0486 DB01      		movw r26,r22
 1064 0488 20E0      		ldi r18,lo8(0)
 1065 048a 30E0      		ldi r19,hi8(0)
 1066 048c 07C0      		rjmp .L32
 1067               	.L33:
 318:cmdlinetest.c **** 	u08 i;
 319:cmdlinetest.c **** 
 320:cmdlinetest.c **** 	// this function will run when a master somewhere else on the bus
 321:cmdlinetest.c **** 	// addresses us and wishes to write data to us
 322:cmdlinetest.c **** 
 323:cmdlinetest.c **** 	// copy the received data to a local buffer
 324:cmdlinetest.c **** 	for(i=0; i<receiveDataLength; i++)
 325:cmdlinetest.c **** 	{
 326:cmdlinetest.c **** 		slaveBuffer[i] = *receiveData++;
 1068               		.stabn	68,0,326,.LM89-i2cSlaveReceiveService
 1069               	.LM89:
 1070 048e FF27      		clr r31
 1071 0490 E050      		subi r30,lo8(-(slaveBuffer))
 1072 0492 F040      		sbci r31,hi8(-(slaveBuffer))
 1073 0494 8D91      		ld r24,X+
 1074 0496 8083      		st Z,r24
 1075 0498 2F5F      		subi r18,lo8(-(1))
 1076 049a 3F4F      		sbci r19,hi8(-(1))
 1077               	.L32:
 1078 049c E22F      		mov r30,r18
GAS LISTING /var/tmp//cczS1EeW.s 			page 27


 1079               		.stabn	68,0,324,.LM90-i2cSlaveReceiveService
 1080               	.LM90:
 1081 049e 2917      		cp r18,r25
 1082 04a0 B0F3      		brlo .L33
 327:cmdlinetest.c **** 	}
 328:cmdlinetest.c **** 	slaveBufferLength = receiveDataLength;
 1083               		.stabn	68,0,328,.LM91-i2cSlaveReceiveService
 1084               	.LM91:
 1085 04a2 9093 0000 		sts slaveBufferLength,r25
 1086               	/* epilogue: frame size=0 */
 1087 04a6 0895      		ret
 1088               	/* epilogue end (size=1) */
 1089               	/* function i2cSlaveReceiveService size 18 (17) */
 1090               		.size	i2cSlaveReceiveService, .-i2cSlaveReceiveService
 1091               		.stabs	"i:r(6,1)",64,0,318,30
 1092               		.stabn	192,0,0,i2cSlaveReceiveService-i2cSlaveReceiveService
 1093               		.stabn	224,0,0,.Lscope8-i2cSlaveReceiveService
 1094               	.Lscope8:
 1095               		.stabs	"",36,0,0,.Lscope8-i2cSlaveReceiveService
 1096               		.stabd	78,0,0
 1097               		.stabs	"i2cSlaveTransmitService:F(6,1)",36,0,337,i2cSlaveTransmitService
 1098               		.stabs	"transmitDataLengthMax:P(6,1)",64,0,336,24
 1099               		.stabs	"transmitData:P(0,16)",64,0,336,22
 1100               	.global	i2cSlaveTransmitService
 1101               		.type	i2cSlaveTransmitService, @function
 1102               	i2cSlaveTransmitService:
 1103               		.stabd	46,0,0
 329:cmdlinetest.c **** 	// print the buffer
 330:cmdlinetest.c **** //	for(i=0;i<slaveBufferLength;i++)
 331:cmdlinetest.c **** //	{
 332:cmdlinetest.c **** //		putchar(slaveBuffer[i]);
 333:cmdlinetest.c **** //	}
 334:cmdlinetest.c **** }
 335:cmdlinetest.c **** 
 336:cmdlinetest.c **** u08 i2cSlaveTransmitService(u08 transmitDataLengthMax, u08* transmitData)
 337:cmdlinetest.c **** {
 1104               		.stabn	68,0,337,.LM92-i2cSlaveTransmitService
 1105               	.LM92:
 1106               	/* prologue: frame size=0 */
 1107               	/* prologue end (size=0) */
 338:cmdlinetest.c **** 	u08 i;
 339:cmdlinetest.c **** 
 340:cmdlinetest.c **** 	// this function will run when a master somewhere else on the bus
 341:cmdlinetest.c **** 	// addresses us and wishes to read data from us
 342:cmdlinetest.c **** 
 343:cmdlinetest.c **** 	cbi(PORTB, PB7);
 1108               		.stabn	68,0,343,.LM93-i2cSlaveTransmitService
 1109               	.LM93:
 1110 04a8 C798      		cbi 56-0x20,7
 1111 04aa DB01      		movw r26,r22
 1112 04ac 05C0      		rjmp .L37
 1113               	.L38:
 344:cmdlinetest.c **** 
 345:cmdlinetest.c **** 	// copy the local buffer to the transmit buffer
 346:cmdlinetest.c **** 	for(i=0; i<slaveBufferLength; i++)
 347:cmdlinetest.c **** 	{
 348:cmdlinetest.c **** 		*transmitData++ = slaveBuffer[i];
GAS LISTING /var/tmp//cczS1EeW.s 			page 28


 1114               		.stabn	68,0,348,.LM94-i2cSlaveTransmitService
 1115               	.LM94:
 1116 04ae FF27      		clr r31
 1117 04b0 E050      		subi r30,lo8(-(slaveBuffer))
 1118 04b2 F040      		sbci r31,hi8(-(slaveBuffer))
 1119 04b4 8081      		ld r24,Z
 1120 04b6 8D93      		st X+,r24
 1121               	.L37:
 1122 04b8 EA2F      		mov r30,r26
 1123 04ba E61B      		sub r30,r22
 1124               		.stabn	68,0,346,.LM95-i2cSlaveTransmitService
 1125               	.LM95:
 1126 04bc 9091 0000 		lds r25,slaveBufferLength
 1127 04c0 E917      		cp r30,r25
 1128 04c2 A8F3      		brlo .L38
 349:cmdlinetest.c **** 	}
 350:cmdlinetest.c **** 
 351:cmdlinetest.c **** 	slaveBuffer[0]++;
 1129               		.stabn	68,0,351,.LM96-i2cSlaveTransmitService
 1130               	.LM96:
 1131 04c4 8091 0000 		lds r24,slaveBuffer
 1132 04c8 8F5F      		subi r24,lo8(-(1))
 1133 04ca 8093 0000 		sts slaveBuffer,r24
 352:cmdlinetest.c **** 
 353:cmdlinetest.c **** 	return slaveBufferLength;
 354:cmdlinetest.c **** }
 1134               		.stabn	68,0,354,.LM97-i2cSlaveTransmitService
 1135               	.LM97:
 1136 04ce 892F      		mov r24,r25
 1137 04d0 9927      		clr r25
 1138               	/* epilogue: frame size=0 */
 1139 04d2 0895      		ret
 1140               	/* epilogue end (size=1) */
 1141               	/* function i2cSlaveTransmitService size 22 (21) */
 1142               		.size	i2cSlaveTransmitService, .-i2cSlaveTransmitService
 1143               		.stabs	"i:r(6,1)",64,0,338,30
 1144               		.stabn	192,0,0,i2cSlaveTransmitService-i2cSlaveTransmitService
 1145               		.stabn	224,0,0,.Lscope9-i2cSlaveTransmitService
 1146               	.Lscope9:
 1147               		.stabs	"",36,0,0,.Lscope9-i2cSlaveTransmitService
 1148               		.stabd	78,0,0
 1149               		.stabs	"i2cMasterSendDiag:F(0,15)",36,0,357,i2cMasterSendDiag
 1150               		.stabs	"deviceAddr:P(6,1)",64,0,356,17
 1151               		.stabs	"length:P(6,1)",64,0,356,16
 1152               		.stabs	"data:P(0,16)",64,0,356,28
 1153               	.global	i2cMasterSendDiag
 1154               		.type	i2cMasterSendDiag, @function
 1155               	i2cMasterSendDiag:
 1156               		.stabd	46,0,0
 355:cmdlinetest.c **** 
 356:cmdlinetest.c **** void i2cMasterSendDiag(u08 deviceAddr, u08 length, u08* data)
 357:cmdlinetest.c **** {
 1157               		.stabn	68,0,357,.LM98-i2cMasterSendDiag
 1158               	.LM98:
 1159               	/* prologue: frame size=0 */
 1160 04d4 0F93      		push r16
 1161 04d6 1F93      		push r17
GAS LISTING /var/tmp//cczS1EeW.s 			page 29


 1162 04d8 CF93      		push r28
 1163 04da DF93      		push r29
 1164               	/* prologue end (size=4) */
 1165 04dc 182F      		mov r17,r24
 1166 04de 062F      		mov r16,r22
 1167 04e0 EA01      		movw r28,r20
 358:cmdlinetest.c **** 	// this function is equivalent to the i2cMasterSendNI() in the I2C library
 359:cmdlinetest.c **** 	// except it will print information about transmission progress to the terminal
 360:cmdlinetest.c **** 
 361:cmdlinetest.c **** 	// disable TWI interrupt
 362:cmdlinetest.c **** 	cbi(TWCR, TWIE);
 1168               		.stabn	68,0,362,.LM99-i2cMasterSendDiag
 1169               	.LM99:
 1170 04e2 86B7      		in r24,86-0x20
 1171 04e4 8E7F      		andi r24,lo8(-2)
 1172 04e6 86BF      		out 86-0x20,r24
 363:cmdlinetest.c **** 
 364:cmdlinetest.c **** 	// send start condition
 365:cmdlinetest.c **** 	i2cSendStart();
 1173               		.stabn	68,0,365,.LM100-i2cMasterSendDiag
 1174               	.LM100:
 1175 04e8 0E94 0000 		call i2cSendStart
 366:cmdlinetest.c **** 	i2cWaitForComplete();
 1176               		.stabn	68,0,366,.LM101-i2cMasterSendDiag
 1177               	.LM101:
 1178 04ec 0E94 0000 		call i2cWaitForComplete
 367:cmdlinetest.c **** 	//rprintf(("STA-")));
 368:cmdlinetest.c **** 
 369:cmdlinetest.c **** 	// send device address with write
 370:cmdlinetest.c **** 	i2cSendByte( deviceAddr&0xFE );
 1179               		.stabn	68,0,370,.LM102-i2cMasterSendDiag
 1180               	.LM102:
 1181 04f0 812F      		mov r24,r17
 1182 04f2 8E7F      		andi r24,lo8(-2)
 1183 04f4 0E94 0000 		call i2cSendByte
 371:cmdlinetest.c **** 	i2cWaitForComplete();
 1184               		.stabn	68,0,371,.LM103-i2cMasterSendDiag
 1185               	.LM103:
 1186 04f8 0E94 0000 		call i2cWaitForComplete
 1187 04fc 10E0      		ldi r17,lo8(0)
 1188 04fe 06C0      		rjmp .L42
 1189               	.L43:
 372:cmdlinetest.c **** 	//rprintf(("SLA+W-")));
 373:cmdlinetest.c **** 	
 374:cmdlinetest.c **** 	// send data
 375:cmdlinetest.c **** 	while(length)
 376:cmdlinetest.c **** 	{
 377:cmdlinetest.c **** 		i2cSendByte( *data++ );
 1190               		.stabn	68,0,377,.LM104-i2cMasterSendDiag
 1191               	.LM104:
 1192 0500 8991      		ld r24,Y+
 1193 0502 0E94 0000 		call i2cSendByte
 378:cmdlinetest.c **** 		i2cWaitForComplete();
 1194               		.stabn	68,0,378,.LM105-i2cMasterSendDiag
 1195               	.LM105:
 1196 0506 0E94 0000 		call i2cWaitForComplete
 1197 050a 1150      		subi r17,lo8(-(-1))
GAS LISTING /var/tmp//cczS1EeW.s 			page 30


 1198               	.L42:
 1199               		.stabn	68,0,375,.LM106-i2cMasterSendDiag
 1200               	.LM106:
 1201 050c 802F      		mov r24,r16
 1202 050e 8195      		neg r24
 1203 0510 1817      		cp r17,r24
 1204 0512 B1F7      		brne .L43
 379:cmdlinetest.c **** 		//rprintf(("DATA-")));
 380:cmdlinetest.c **** 		length--;
 381:cmdlinetest.c **** 	}
 382:cmdlinetest.c **** 	
 383:cmdlinetest.c **** 	// transmit stop condition
 384:cmdlinetest.c **** 	// leave with TWEA on for slave receiving
 385:cmdlinetest.c **** 	i2cSendStop();
 1205               		.stabn	68,0,385,.LM107-i2cMasterSendDiag
 1206               	.LM107:
 1207 0514 0E94 0000 		call i2cSendStop
 1208               	.L45:
 386:cmdlinetest.c **** 	while( !(inb(TWCR) & BV(TWSTO)) );
 1209               		.stabn	68,0,386,.LM108-i2cMasterSendDiag
 1210               	.LM108:
 1211 0518 06B6      		in __tmp_reg__,86-0x20
 1212 051a 04FE      		sbrs __tmp_reg__,4
 1213 051c FDCF      		rjmp .L45
 387:cmdlinetest.c **** 	//rprintf(("STO")));
 388:cmdlinetest.c **** 
 389:cmdlinetest.c **** 	// enable TWI interrupt
 390:cmdlinetest.c **** 	sbi(TWCR, TWIE);
 1214               		.stabn	68,0,390,.LM109-i2cMasterSendDiag
 1215               	.LM109:
 1216 051e 86B7      		in r24,86-0x20
 1217 0520 8160      		ori r24,lo8(1)
 1218 0522 86BF      		out 86-0x20,r24
 1219               	/* epilogue: frame size=0 */
 1220 0524 DF91      		pop r29
 1221 0526 CF91      		pop r28
 1222 0528 1F91      		pop r17
 1223 052a 0F91      		pop r16
 1224 052c 0895      		ret
 1225               	/* epilogue end (size=5) */
 1226               	/* function i2cMasterSendDiag size 45 (36) */
 1227               		.size	i2cMasterSendDiag, .-i2cMasterSendDiag
 1228               	.Lscope10:
 1229               		.stabs	"",36,0,0,.Lscope10-i2cMasterSendDiag
 1230               		.stabd	78,0,0
 1231               		.stabs	"i2cMaster_Send:F(0,15)",36,0,394,i2cMaster_Send
 1232               	.global	i2cMaster_Send
 1233               		.type	i2cMaster_Send, @function
 1234               	i2cMaster_Send:
 1235               		.stabd	46,0,0
 391:cmdlinetest.c **** }
 392:cmdlinetest.c **** 
 393:cmdlinetest.c **** void i2cMaster_Send(void)
 394:cmdlinetest.c **** {
 1236               		.stabn	68,0,394,.LM110-i2cMaster_Send
 1237               	.LM110:
 1238               	/* prologue: frame size=20 */
GAS LISTING /var/tmp//cczS1EeW.s 			page 31


 1239 052e 0F93      		push r16
 1240 0530 1F93      		push r17
 1241 0532 CF93      		push r28
 1242 0534 DF93      		push r29
 1243 0536 CDB7      		in r28,__SP_L__
 1244 0538 DEB7      		in r29,__SP_H__
 1245 053a 6497      		sbiw r28,20
 1246 053c 0FB6      		in __tmp_reg__,__SREG__
 1247 053e F894      		cli
 1248 0540 DEBF      		out __SP_H__,r29
 1249 0542 0FBE      		out __SREG__,__tmp_reg__
 1250 0544 CDBF      		out __SP_L__,r28
 1251               	/* prologue end (size=12) */
 395:cmdlinetest.c **** 	u08 sendData[20];
 396:cmdlinetest.c **** 	strcpy(sendData, cmdlineGetArgStr(1));
 1252               		.stabn	68,0,396,.LM111-i2cMaster_Send
 1253               	.LM111:
 1254 0546 81E0      		ldi r24,lo8(1)
 1255 0548 0E94 0000 		call cmdlineGetArgStr
 1256 054c 8E01      		movw r16,r28
 1257 054e 0F5F      		subi r16,lo8(-(1))
 1258 0550 1F4F      		sbci r17,hi8(-(1))
 1259 0552 BC01      		movw r22,r24
 1260 0554 C801      		movw r24,r16
 1261 0556 0E94 0000 		call strcpy
 397:cmdlinetest.c **** 	i2cMasterSend(TARGET_ADDR, 0x02, sendData);
 1262               		.stabn	68,0,397,.LM112-i2cMaster_Send
 1263               	.LM112:
 1264 055a A801      		movw r20,r16
 1265 055c 62E0      		ldi r22,lo8(2)
 1266 055e 80EA      		ldi r24,lo8(-96)
 1267 0560 0E94 0000 		call i2cMasterSend
 1268               	/* epilogue: frame size=20 */
 1269 0564 6496      		adiw r28,20
 1270 0566 0FB6      		in __tmp_reg__,__SREG__
 1271 0568 F894      		cli
 1272 056a DEBF      		out __SP_H__,r29
 1273 056c 0FBE      		out __SREG__,__tmp_reg__
 1274 056e CDBF      		out __SP_L__,r28
 1275 0570 DF91      		pop r29
 1276 0572 CF91      		pop r28
 1277 0574 1F91      		pop r17
 1278 0576 0F91      		pop r16
 1279 0578 0895      		ret
 1280               	/* epilogue end (size=11) */
 1281               	/* function i2cMaster_Send size 38 (15) */
 1282               		.size	i2cMaster_Send, .-i2cMaster_Send
 1283               		.stabs	"sendData:(0,17)=ar(0,18)=r(0,18);0;0177777;;0;19;(6,1)",128,0,395,1
 1284               		.stabn	192,0,0,i2cMaster_Send-i2cMaster_Send
 1285               		.stabn	224,0,0,.Lscope11-i2cMaster_Send
 1286               	.Lscope11:
 1287               		.stabs	"",36,0,0,.Lscope11-i2cMaster_Send
 1288               		.stabd	78,0,0
 1289               		.stabs	"i2cMaster_Auto_Send:F(0,15)",36,0,401,i2cMaster_Auto_Send
 1290               		.stabs	"message:P(6,1)",64,0,400,24
 1291               	.global	i2cMaster_Auto_Send
 1292               		.type	i2cMaster_Auto_Send, @function
GAS LISTING /var/tmp//cczS1EeW.s 			page 32


 1293               	i2cMaster_Auto_Send:
 1294               		.stabd	46,0,0
 398:cmdlinetest.c **** //	putchar(sendData[0]);
 399:cmdlinetest.c **** }
 400:cmdlinetest.c **** void i2cMaster_Auto_Send(u08 message)
 401:cmdlinetest.c **** {
 1295               		.stabn	68,0,401,.LM113-i2cMaster_Auto_Send
 1296               	.LM113:
 1297               	/* prologue: frame size=2 */
 1298 057a CF93      		push r28
 1299 057c DF93      		push r29
 1300 057e CDB7      		in r28,__SP_L__
 1301 0580 DEB7      		in r29,__SP_H__
 1302 0582 2297      		sbiw r28,2
 1303 0584 0FB6      		in __tmp_reg__,__SREG__
 1304 0586 F894      		cli
 1305 0588 DEBF      		out __SP_H__,r29
 1306 058a 0FBE      		out __SREG__,__tmp_reg__
 1307 058c CDBF      		out __SP_L__,r28
 1308               	/* prologue end (size=10) */
 402:cmdlinetest.c **** 	u08 sendData[2];
 403:cmdlinetest.c **** 	sendData[0] = message;
 1309               		.stabn	68,0,403,.LM114-i2cMaster_Auto_Send
 1310               	.LM114:
 1311 058e 8983      		std Y+1,r24
 404:cmdlinetest.c **** 	sendData[1] = '\0';
 1312               		.stabn	68,0,404,.LM115-i2cMaster_Auto_Send
 1313               	.LM115:
 1314 0590 1A82      		std Y+2,__zero_reg__
 405:cmdlinetest.c **** 	i2cMasterSend(TARGET_ADDR, 0x02, sendData);
 1315               		.stabn	68,0,405,.LM116-i2cMaster_Auto_Send
 1316               	.LM116:
 1317 0592 AE01      		movw r20,r28
 1318 0594 4F5F      		subi r20,lo8(-(1))
 1319 0596 5F4F      		sbci r21,hi8(-(1))
 1320 0598 62E0      		ldi r22,lo8(2)
 1321 059a 80EA      		ldi r24,lo8(-96)
 1322 059c 0E94 0000 		call i2cMasterSend
 1323               	/* epilogue: frame size=2 */
 1324 05a0 2296      		adiw r28,2
 1325 05a2 0FB6      		in __tmp_reg__,__SREG__
 1326 05a4 F894      		cli
 1327 05a6 DEBF      		out __SP_H__,r29
 1328 05a8 0FBE      		out __SREG__,__tmp_reg__
 1329 05aa CDBF      		out __SP_L__,r28
 1330 05ac DF91      		pop r29
 1331 05ae CF91      		pop r28
 1332 05b0 0895      		ret
 1333               	/* epilogue end (size=9) */
 1334               	/* function i2cMaster_Auto_Send size 28 (9) */
 1335               		.size	i2cMaster_Auto_Send, .-i2cMaster_Auto_Send
 1336               		.stabs	"sendData:(0,19)=ar(0,18);0;1;(6,1)",128,0,402,1
 1337               		.stabn	192,0,0,i2cMaster_Auto_Send-i2cMaster_Auto_Send
 1338               		.stabn	224,0,0,.Lscope12-i2cMaster_Auto_Send
 1339               	.Lscope12:
 1340               		.stabs	"",36,0,0,.Lscope12-i2cMaster_Auto_Send
 1341               		.stabd	78,0,0
GAS LISTING /var/tmp//cczS1EeW.s 			page 33


 1342               		.section	.progmem.data
 1343               		.type	__c.1809, @object
 1344               		.size	__c.1809, 2
 1345               	__c.1809:
 1346 0235 2C00      		.string	","
 1347               		.text
 1348               		.stabs	"i2cMaster_Receive:F(0,15)",36,0,408,i2cMaster_Receive
 1349               	.global	i2cMaster_Receive
 1350               		.type	i2cMaster_Receive, @function
 1351               	i2cMaster_Receive:
 1352               		.stabd	46,0,0
 406:cmdlinetest.c **** }
 407:cmdlinetest.c **** void i2cMaster_Receive(void)
 408:cmdlinetest.c **** {	
 1353               		.stabn	68,0,408,.LM117-i2cMaster_Receive
 1354               	.LM117:
 1355               	/* prologue: frame size=20 */
 1356 05b2 0F93      		push r16
 1357 05b4 1F93      		push r17
 1358 05b6 CF93      		push r28
 1359 05b8 DF93      		push r29
 1360 05ba CDB7      		in r28,__SP_L__
 1361 05bc DEB7      		in r29,__SP_H__
 1362 05be 6497      		sbiw r28,20
 1363 05c0 0FB6      		in __tmp_reg__,__SREG__
 1364 05c2 F894      		cli
 1365 05c4 DEBF      		out __SP_H__,r29
 1366 05c6 0FBE      		out __SREG__,__tmp_reg__
 1367 05c8 CDBF      		out __SP_L__,r28
 1368               	/* prologue end (size=12) */
 409:cmdlinetest.c **** 	u08 command[20];
 410:cmdlinetest.c **** 	strcpy(command, cmdlineGetArgStr(1));
 1369               		.stabn	68,0,410,.LM118-i2cMaster_Receive
 1370               	.LM118:
 1371 05ca 81E0      		ldi r24,lo8(1)
 1372 05cc 0E94 0000 		call cmdlineGetArgStr
 1373 05d0 BC01      		movw r22,r24
 1374 05d2 CE01      		movw r24,r28
 1375 05d4 0196      		adiw r24,1
 1376 05d6 0E94 0000 		call strcpy
 411:cmdlinetest.c **** 	
 412:cmdlinetest.c **** 	i2cMasterReceive(TARGET_ADDR, slaveBufferLength, slaveBuffer);
 1377               		.stabn	68,0,412,.LM119-i2cMaster_Receive
 1378               	.LM119:
 1379 05da 00E0      		ldi r16,lo8(slaveBuffer)
 1380 05dc 10E0      		ldi r17,hi8(slaveBuffer)
 1381 05de A801      		movw r20,r16
 1382 05e0 6091 0000 		lds r22,slaveBufferLength
 1383 05e4 80EA      		ldi r24,lo8(-96)
 1384 05e6 0E94 0000 		call i2cMasterReceive
 413:cmdlinetest.c **** 	slaveBuffer[0x19] = 0;
 1385               		.stabn	68,0,413,.LM120-i2cMaster_Receive
 1386               	.LM120:
 1387 05ea 1092 0000 		sts slaveBuffer+25,__zero_reg__
 414:cmdlinetest.c **** 	//rprintfStr(command);
 415:cmdlinetest.c **** 	//rprintf(" ");
 416:cmdlinetest.c **** 	rprintfStr(slaveBuffer);
GAS LISTING /var/tmp//cczS1EeW.s 			page 34


 1388               		.stabn	68,0,416,.LM121-i2cMaster_Receive
 1389               	.LM121:
 1390 05ee C801      		movw r24,r16
 1391 05f0 0E94 0000 		call rprintfStr
 417:cmdlinetest.c **** 	rprintf(",");
 1392               		.stabn	68,0,417,.LM122-i2cMaster_Receive
 1393               	.LM122:
 1394 05f4 80E0      		ldi r24,lo8(__c.1809)
 1395 05f6 90E0      		ldi r25,hi8(__c.1809)
 1396 05f8 9F93      		push r25
 1397 05fa 8F93      		push r24
 1398 05fc 81E0      		ldi r24,lo8(1)
 1399 05fe 8F93      		push r24
 1400 0600 0E94 0000 		call rprintf1RamRom
 1401 0604 0F90      		pop __tmp_reg__
 1402 0606 0F90      		pop __tmp_reg__
 1403 0608 0F90      	 	pop __tmp_reg__
 1404               	/* epilogue: frame size=20 */
 1405 060a 6496      		adiw r28,20
 1406 060c 0FB6      		in __tmp_reg__,__SREG__
 1407 060e F894      		cli
 1408 0610 DEBF      		out __SP_H__,r29
 1409 0612 0FBE      		out __SREG__,__tmp_reg__
 1410 0614 CDBF      		out __SP_L__,r28
 1411 0616 DF91      		pop r29
 1412 0618 CF91      		pop r28
 1413 061a 1F91      		pop r17
 1414 061c 0F91      		pop r16
 1415 061e 0895      		ret
 1416               	/* epilogue end (size=11) */
 1417               	/* function i2cMaster_Receive size 55 (32) */
 1418               		.size	i2cMaster_Receive, .-i2cMaster_Receive
 1419               		.stabs	"command:(0,17)",128,0,409,1
 1420               		.stabn	192,0,0,i2cMaster_Receive-i2cMaster_Receive
 1421               		.stabn	224,0,0,.Lscope13-i2cMaster_Receive
 1422               	.Lscope13:
 1423               		.stabs	"",36,0,0,.Lscope13-i2cMaster_Receive
 1424               		.stabd	78,0,0
 1425               		.section	.progmem.data
 1426               		.type	__c.1819, @object
 1427               		.size	__c.1819, 2
 1428               	__c.1819:
 1429 0237 2C00      		.string	","
 1430               		.text
 1431               		.stabs	"i2cMaster_Auto_Receive:F(0,15)",36,0,421,i2cMaster_Auto_Receive
 1432               		.stabs	"command:P(6,1)",64,0,420,24
 1433               	.global	i2cMaster_Auto_Receive
 1434               		.type	i2cMaster_Auto_Receive, @function
 1435               	i2cMaster_Auto_Receive:
 1436               		.stabd	46,0,0
 418:cmdlinetest.c **** 	
 419:cmdlinetest.c **** }
 420:cmdlinetest.c **** void i2cMaster_Auto_Receive(u08 command)
 421:cmdlinetest.c **** {
 1437               		.stabn	68,0,421,.LM123-i2cMaster_Auto_Receive
 1438               	.LM123:
 1439               	/* prologue: frame size=0 */
GAS LISTING /var/tmp//cczS1EeW.s 			page 35


 1440 0620 0F93      		push r16
 1441 0622 1F93      		push r17
 1442               	/* prologue end (size=2) */
 422:cmdlinetest.c **** 	i2cMasterReceive(TARGET_ADDR, slaveBufferLength, slaveBuffer);
 1443               		.stabn	68,0,422,.LM124-i2cMaster_Auto_Receive
 1444               	.LM124:
 1445 0624 00E0      		ldi r16,lo8(slaveBuffer)
 1446 0626 10E0      		ldi r17,hi8(slaveBuffer)
 1447 0628 A801      		movw r20,r16
 1448 062a 6091 0000 		lds r22,slaveBufferLength
 1449 062e 80EA      		ldi r24,lo8(-96)
 1450 0630 0E94 0000 		call i2cMasterReceive
 423:cmdlinetest.c **** 	
 424:cmdlinetest.c **** 	slaveBuffer[0x19] = 0;
 1451               		.stabn	68,0,424,.LM125-i2cMaster_Auto_Receive
 1452               	.LM125:
 1453 0634 1092 0000 		sts slaveBuffer+25,__zero_reg__
 425:cmdlinetest.c **** 	//rprintfStr(command);
 426:cmdlinetest.c **** 	//rprintf(" ");
 427:cmdlinetest.c **** 	rprintfStr(slaveBuffer);
 1454               		.stabn	68,0,427,.LM126-i2cMaster_Auto_Receive
 1455               	.LM126:
 1456 0638 C801      		movw r24,r16
 1457 063a 0E94 0000 		call rprintfStr
 428:cmdlinetest.c **** 	rprintf(",");
 1458               		.stabn	68,0,428,.LM127-i2cMaster_Auto_Receive
 1459               	.LM127:
 1460 063e 80E0      		ldi r24,lo8(__c.1819)
 1461 0640 90E0      		ldi r25,hi8(__c.1819)
 1462 0642 9F93      		push r25
 1463 0644 8F93      		push r24
 1464 0646 81E0      		ldi r24,lo8(1)
 1465 0648 8F93      		push r24
 1466 064a 0E94 0000 		call rprintf1RamRom
 1467 064e 0F90      		pop __tmp_reg__
 1468 0650 0F90      		pop __tmp_reg__
 1469 0652 0F90      	 	pop __tmp_reg__
 1470               	/* epilogue: frame size=0 */
 1471 0654 1F91      		pop r17
 1472 0656 0F91      		pop r16
 1473 0658 0895      		ret
 1474               	/* epilogue end (size=3) */
 1475               	/* function i2cMaster_Auto_Receive size 29 (24) */
 1476               		.size	i2cMaster_Auto_Receive, .-i2cMaster_Auto_Receive
 1477               	.Lscope14:
 1478               		.stabs	"",36,0,0,.Lscope14-i2cMaster_Auto_Receive
 1479               		.stabd	78,0,0
 1480               		.stabs	"setLeftServo:F(0,15)",36,0,434,setLeftServo
 1481               	.global	setLeftServo
 1482               		.type	setLeftServo, @function
 1483               	setLeftServo:
 1484               		.stabd	46,0,0
 429:cmdlinetest.c **** }
 430:cmdlinetest.c **** 
 431:cmdlinetest.c **** 	//BELOW is the original left servo code -- would be right for plane, not for boat
 432:cmdlinetest.c **** 
 433:cmdlinetest.c **** void setLeftServo(void)
GAS LISTING /var/tmp//cczS1EeW.s 			page 36


 434:cmdlinetest.c **** {	
 1485               		.stabn	68,0,434,.LM128-setLeftServo
 1486               	.LM128:
 1487               	/* prologue: frame size=0 */
 1488               	/* prologue end (size=0) */
 435:cmdlinetest.c **** 	leftServoPos = (unsigned char) cmdlineGetArgInt(1);
 1489               		.stabn	68,0,435,.LM129-setLeftServo
 1490               	.LM129:
 1491 065a 81E0      		ldi r24,lo8(1)
 1492 065c 0E94 0000 		call cmdlineGetArgInt
 1493 0660 6093 0000 		sts leftServoPos,r22
 436:cmdlinetest.c **** 	servoSetPosition(LEFT_SERVO_CHAN, leftServoPos);
 1494               		.stabn	68,0,436,.LM130-setLeftServo
 1495               	.LM130:
 1496 0664 84E0      		ldi r24,lo8(4)
 1497 0666 0E94 0000 		call servoSetPosition
 1498               	/* epilogue: frame size=0 */
 1499 066a 0895      		ret
 1500               	/* epilogue end (size=1) */
 1501               	/* function setLeftServo size 9 (8) */
 1502               		.size	setLeftServo, .-setLeftServo
 1503               	.Lscope15:
 1504               		.stabs	"",36,0,0,.Lscope15-setLeftServo
 1505               		.stabd	78,0,0
 1506               		.stabs	"setRightServo:F(0,15)",36,0,443,setRightServo
 1507               	.global	setRightServo
 1508               		.type	setRightServo, @function
 1509               	setRightServo:
 1510               		.stabd	46,0,0
 437:cmdlinetest.c **** #ifdef DEBUG	
 438:cmdlinetest.c **** 		rprintf("e0\r\n");
 439:cmdlinetest.c **** #endif DEBUG
 440:cmdlinetest.c **** }
 441:cmdlinetest.c **** 	
 442:cmdlinetest.c **** void setRightServo(void)
 443:cmdlinetest.c **** {	
 1511               		.stabn	68,0,443,.LM131-setRightServo
 1512               	.LM131:
 1513               	/* prologue: frame size=0 */
 1514               	/* prologue end (size=0) */
 444:cmdlinetest.c **** 	rightServoPos = (unsigned char) cmdlineGetArgInt(1);
 1515               		.stabn	68,0,444,.LM132-setRightServo
 1516               	.LM132:
 1517 066c 81E0      		ldi r24,lo8(1)
 1518 066e 0E94 0000 		call cmdlineGetArgInt
 1519 0672 6093 0000 		sts rightServoPos,r22
 445:cmdlinetest.c **** 	servoSetPosition(RIGHT_SERVO_CHAN, rightServoPos);
 1520               		.stabn	68,0,445,.LM133-setRightServo
 1521               	.LM133:
 1522 0676 83E0      		ldi r24,lo8(3)
 1523 0678 0E94 0000 		call servoSetPosition
 1524               	/* epilogue: frame size=0 */
 1525 067c 0895      		ret
 1526               	/* epilogue end (size=1) */
 1527               	/* function setRightServo size 9 (8) */
 1528               		.size	setRightServo, .-setRightServo
 1529               	.Lscope16:
GAS LISTING /var/tmp//cczS1EeW.s 			page 37


 1530               		.stabs	"",36,0,0,.Lscope16-setRightServo
 1531               		.stabd	78,0,0
 1532               		.stabs	"setThrottleServo:F(0,15)",36,0,452,setThrottleServo
 1533               	.global	setThrottleServo
 1534               		.type	setThrottleServo, @function
 1535               	setThrottleServo:
 1536               		.stabd	46,0,0
 446:cmdlinetest.c **** #ifdef DEBUG
 447:cmdlinetest.c **** 		rprintf("e0\r\n");
 448:cmdlinetest.c **** #endif DEBUG
 449:cmdlinetest.c **** }
 450:cmdlinetest.c **** 
 451:cmdlinetest.c **** void setThrottleServo(void)
 452:cmdlinetest.c **** {
 1537               		.stabn	68,0,452,.LM134-setThrottleServo
 1538               	.LM134:
 1539               	/* prologue: frame size=0 */
 1540               	/* prologue end (size=0) */
 453:cmdlinetest.c **** 	throttleServoPos = (unsigned char) cmdlineGetArgInt(1);
 1541               		.stabn	68,0,453,.LM135-setThrottleServo
 1542               	.LM135:
 1543 067e 81E0      		ldi r24,lo8(1)
 1544 0680 0E94 0000 		call cmdlineGetArgInt
 1545 0684 6093 0000 		sts throttleServoPos,r22
 454:cmdlinetest.c **** 	servoSetPosition(THROTTLE_SERVO_CHAN, throttleServoPos);
 1546               		.stabn	68,0,454,.LM136-setThrottleServo
 1547               	.LM136:
 1548 0688 80E0      		ldi r24,lo8(0)
 1549 068a 0E94 0000 		call servoSetPosition
 1550               	/* epilogue: frame size=0 */
 1551 068e 0895      		ret
 1552               	/* epilogue end (size=1) */
 1553               	/* function setThrottleServo size 9 (8) */
 1554               		.size	setThrottleServo, .-setThrottleServo
 1555               	.Lscope17:
 1556               		.stabs	"",36,0,0,.Lscope17-setThrottleServo
 1557               		.stabd	78,0,0
 1558               		.stabs	"setFeedbackInterval:F(0,15)",36,0,460,setFeedbackInterval
 1559               	.global	setFeedbackInterval
 1560               		.type	setFeedbackInterval, @function
 1561               	setFeedbackInterval:
 1562               		.stabd	46,0,0
 455:cmdlinetest.c **** #ifdef DEBUG
 456:cmdlinetest.c **** 		rprintf("e0\r\n");
 457:cmdlinetest.c **** #endif DEBUG
 458:cmdlinetest.c **** }
 459:cmdlinetest.c **** void setFeedbackInterval(void)
 460:cmdlinetest.c **** {
 1563               		.stabn	68,0,460,.LM137-setFeedbackInterval
 1564               	.LM137:
 1565               	/* prologue: frame size=0 */
 1566               	/* prologue end (size=0) */
 461:cmdlinetest.c **** 	numTimesThrough = cmdlineGetArgInt(1);
 1567               		.stabn	68,0,461,.LM138-setFeedbackInterval
 1568               	.LM138:
 1569 0690 81E0      		ldi r24,lo8(1)
 1570 0692 0E94 0000 		call cmdlineGetArgInt
GAS LISTING /var/tmp//cczS1EeW.s 			page 38


 1571 0696 6093 0000 		sts numTimesThrough,r22
 1572 069a 7093 0000 		sts (numTimesThrough)+1,r23
 1573 069e 8093 0000 		sts (numTimesThrough)+2,r24
 1574 06a2 9093 0000 		sts (numTimesThrough)+3,r25
 1575               	/* epilogue: frame size=0 */
 1576 06a6 0895      		ret
 1577               	/* epilogue end (size=1) */
 1578               	/* function setFeedbackInterval size 12 (11) */
 1579               		.size	setFeedbackInterval, .-setFeedbackInterval
 1580               	.Lscope18:
 1581               		.stabs	"",36,0,0,.Lscope18-setFeedbackInterval
 1582               		.stabd	78,0,0
 1583               		.stabs	"setCamPanServo:F(0,15)",36,0,465,setCamPanServo
 1584               	.global	setCamPanServo
 1585               		.type	setCamPanServo, @function
 1586               	setCamPanServo:
 1587               		.stabd	46,0,0
 462:cmdlinetest.c **** }
 463:cmdlinetest.c **** 
 464:cmdlinetest.c **** void setCamPanServo(void)
 465:cmdlinetest.c **** {
 1588               		.stabn	68,0,465,.LM139-setCamPanServo
 1589               	.LM139:
 1590               	/* prologue: frame size=0 */
 1591               	/* prologue end (size=0) */
 466:cmdlinetest.c **** 	int rawPan;
 467:cmdlinetest.c **** 	
 468:cmdlinetest.c **** 	rawPan = cmdlineGetArgInt(1);
 1592               		.stabn	68,0,468,.LM140-setCamPanServo
 1593               	.LM140:
 1594 06a8 81E0      		ldi r24,lo8(1)
 1595 06aa 0E94 0000 		call cmdlineGetArgInt
 469:cmdlinetest.c **** 	
 470:cmdlinetest.c **** 	if( (0<= rawPan) && (rawPan <= 2) )
 1596               		.stabn	68,0,470,.LM141-setCamPanServo
 1597               	.LM141:
 1598 06ae 6330      		cpi r22,3
 1599 06b0 7105      		cpc r23,__zero_reg__
 1600 06b2 80F4      		brsh .L71
 471:cmdlinetest.c **** 	{
 472:cmdlinetest.c **** 		camPanServoPos = camPanServoPos + (rawPan - 1);
 1601               		.stabn	68,0,472,.LM142-setCamPanServo
 1602               	.LM142:
 1603 06b4 8091 0000 		lds r24,camPanServoPos
 1604 06b8 860F      		add r24,r22
 1605 06ba 8150      		subi r24,lo8(-(-1))
 1606 06bc 8093 0000 		sts camPanServoPos,r24
 473:cmdlinetest.c **** 		if(camPanServoPos < 1) camPanServoPos = 1;
 1607               		.stabn	68,0,473,.LM143-setCamPanServo
 1608               	.LM143:
 1609 06c0 8823      		tst r24
 1610 06c2 19F4      		brne .L69
 1611 06c4 81E0      		ldi r24,lo8(1)
 1612 06c6 8093 0000 		sts camPanServoPos,r24
 1613               	.L69:
 474:cmdlinetest.c **** 		if(camPanServoPos > 255) camPanServoPos = 255;
 475:cmdlinetest.c **** 	
GAS LISTING /var/tmp//cczS1EeW.s 			page 39


 476:cmdlinetest.c **** 		servoSetPosition(CAM_PAN_SERVO_CHAN, (char)camPanServoPos);
 1614               		.stabn	68,0,476,.LM144-setCamPanServo
 1615               	.LM144:
 1616 06ca 6091 0000 		lds r22,camPanServoPos
 1617 06ce 81E0      		ldi r24,lo8(1)
 1618 06d0 0E94 0000 		call servoSetPosition
 1619               	.L71:
 1620 06d4 0895      		ret
 1621               	/* epilogue: frame size=0 */
 1622               	/* epilogue: noreturn */
 1623               	/* epilogue end (size=0) */
 1624               	/* function setCamPanServo size 23 (23) */
 1625               		.size	setCamPanServo, .-setCamPanServo
 1626               		.stabs	"rawPan:r(0,1)",64,0,466,22
 1627               		.stabn	192,0,0,setCamPanServo-setCamPanServo
 1628               		.stabn	224,0,0,.Lscope19-setCamPanServo
 1629               	.Lscope19:
 1630               		.stabs	"",36,0,0,.Lscope19-setCamPanServo
 1631               		.stabd	78,0,0
 1632               		.stabs	"setCamTiltServo:F(0,15)",36,0,485,setCamTiltServo
 1633               	.global	setCamTiltServo
 1634               		.type	setCamTiltServo, @function
 1635               	setCamTiltServo:
 1636               		.stabd	46,0,0
 477:cmdlinetest.c **** #ifdef DEBUG
 478:cmdlinetest.c **** 			rprintf("e0\r\n");
 479:cmdlinetest.c **** #endif DEBUG
 480:cmdlinetest.c **** 
 481:cmdlinetest.c **** 	}
 482:cmdlinetest.c **** }
 483:cmdlinetest.c **** 
 484:cmdlinetest.c **** void setCamTiltServo(void)
 485:cmdlinetest.c **** {
 1637               		.stabn	68,0,485,.LM145-setCamTiltServo
 1638               	.LM145:
 1639               	/* prologue: frame size=0 */
 1640               	/* prologue end (size=0) */
 486:cmdlinetest.c **** 	int rawTilt;
 487:cmdlinetest.c **** 	
 488:cmdlinetest.c **** 	rawTilt = cmdlineGetArgInt(1);
 1641               		.stabn	68,0,488,.LM146-setCamTiltServo
 1642               	.LM146:
 1643 06d6 81E0      		ldi r24,lo8(1)
 1644 06d8 0E94 0000 		call cmdlineGetArgInt
 489:cmdlinetest.c **** 	if(( 0 <= rawTilt) && (rawTilt <= 2) )
 1645               		.stabn	68,0,489,.LM147-setCamTiltServo
 1646               	.LM147:
 1647 06dc 6330      		cpi r22,3
 1648 06de 7105      		cpc r23,__zero_reg__
 1649 06e0 80F4      		brsh .L77
 490:cmdlinetest.c **** 	{
 491:cmdlinetest.c **** 		camTiltServoPos = camTiltServoPos + (rawTilt - 1);
 1650               		.stabn	68,0,491,.LM148-setCamTiltServo
 1651               	.LM148:
 1652 06e2 8091 0000 		lds r24,camTiltServoPos
 1653 06e6 860F      		add r24,r22
 1654 06e8 8150      		subi r24,lo8(-(-1))
GAS LISTING /var/tmp//cczS1EeW.s 			page 40


 1655 06ea 8093 0000 		sts camTiltServoPos,r24
 492:cmdlinetest.c **** 		if(camTiltServoPos < 1) camTiltServoPos = 1;
 1656               		.stabn	68,0,492,.LM149-setCamTiltServo
 1657               	.LM149:
 1658 06ee 8823      		tst r24
 1659 06f0 19F4      		brne .L75
 1660 06f2 81E0      		ldi r24,lo8(1)
 1661 06f4 8093 0000 		sts camTiltServoPos,r24
 1662               	.L75:
 493:cmdlinetest.c **** 		if(camTiltServoPos > 255) camTiltServoPos = 255;
 494:cmdlinetest.c **** 	
 495:cmdlinetest.c **** 		servoSetPosition(CAM_TILT_SERVO_CHAN, (char)camTiltServoPos);
 1663               		.stabn	68,0,495,.LM150-setCamTiltServo
 1664               	.LM150:
 1665 06f8 6091 0000 		lds r22,camTiltServoPos
 1666 06fc 82E0      		ldi r24,lo8(2)
 1667 06fe 0E94 0000 		call servoSetPosition
 1668               	.L77:
 1669 0702 0895      		ret
 1670               	/* epilogue: frame size=0 */
 1671               	/* epilogue: noreturn */
 1672               	/* epilogue end (size=0) */
 1673               	/* function setCamTiltServo size 23 (23) */
 1674               		.size	setCamTiltServo, .-setCamTiltServo
 1675               		.stabs	"rawTilt:r(0,1)",64,0,486,22
 1676               		.stabn	192,0,0,setCamTiltServo-setCamTiltServo
 1677               		.stabn	224,0,0,.Lscope20-setCamTiltServo
 1678               	.Lscope20:
 1679               		.stabs	"",36,0,0,.Lscope20-setCamTiltServo
 1680               		.stabd	78,0,0
 1681               		.section	.progmem.data
 1682               		.type	__c.1879, @object
 1683               		.size	__c.1879, 2
 1684               	__c.1879:
 1685 0239 2C00      		.string	","
 1686               		.type	__c.1874, @object
 1687               		.size	__c.1874, 3
 1688               	__c.1874:
 1689 023b 2573 00   		.string	"%s"
 1690               		.type	__c.1872, @object
 1691               		.size	__c.1872, 3
 1692               	__c.1872:
 1693 023e 6220 00   		.string	"b "
 1694               		.text
 1695               		.stabs	"getA2D:F(0,15)",36,0,511,getA2D
 1696               	.global	getA2D
 1697               		.type	getA2D, @function
 1698               	getA2D:
 1699               		.stabd	46,0,0
 496:cmdlinetest.c **** #ifdef DEBUG	
 497:cmdlinetest.c **** 			rprintf("e0\r\n");
 498:cmdlinetest.c **** #endif DEBUG
 499:cmdlinetest.c **** 
 500:cmdlinetest.c **** 	}
 501:cmdlinetest.c **** }
 502:cmdlinetest.c **** 
 503:cmdlinetest.c **** //////////////////////////////////////////////////A2D ROUTINE/////////////////////////////
GAS LISTING /var/tmp//cczS1EeW.s 			page 41


 504:cmdlinetest.c **** //	Returns part of a full byte with analog values for each pin.  Might be overkill, but will hopefu
 505:cmdlinetest.c **** // 	battery life!
 506:cmdlinetest.c **** //	A0 = main battery
 507:cmdlinetest.c **** // 	A1 = secondary battery
 508:cmdlinetest.c **** //	A2 = temperature
 509:cmdlinetest.c **** 
 510:cmdlinetest.c **** void getA2D()
 511:cmdlinetest.c **** {
 1700               		.stabn	68,0,511,.LM151-getA2D
 1701               	.LM151:
 1702               	/* prologue: frame size=0 */
 1703 0704 1F93      		push r17
 1704 0706 CF93      		push r28
 1705 0708 DF93      		push r29
 1706               	/* prologue end (size=3) */
 512:cmdlinetest.c **** #define NUM_A2D_SENSORS 3
 513:cmdlinetest.c **** 	u08 i;	
 514:cmdlinetest.c **** 	rprintf("b ");
 1707               		.stabn	68,0,514,.LM152-getA2D
 1708               	.LM152:
 1709 070a 80E0      		ldi r24,lo8(__c.1872)
 1710 070c 90E0      		ldi r25,hi8(__c.1872)
 1711 070e 9F93      		push r25
 1712 0710 8F93      		push r24
 1713 0712 81E0      		ldi r24,lo8(1)
 1714 0714 8F93      		push r24
 1715 0716 0E94 0000 		call rprintf1RamRom
 1716 071a C0E0      		ldi r28,lo8(0)
 1717 071c D0E0      		ldi r29,hi8(0)
 1718 071e 0F90      		pop __tmp_reg__
 1719 0720 0F90      		pop __tmp_reg__
 1720 0722 0F90      	 	pop __tmp_reg__
 1721               	.L79:
 515:cmdlinetest.c **** 
 516:cmdlinetest.c **** 	for(i=0; i<NUM_A2D_SENSORS; i++)
 517:cmdlinetest.c **** 	{
 518:cmdlinetest.c **** 		rprintf("%s", i, a2dConvert8bit(i));
 1722               		.stabn	68,0,518,.LM153-getA2D
 1723               	.LM153:
 1724 0724 8C2F      		mov r24,r28
 1725 0726 0E94 0000 		call a2dConvert8bit
 1726 072a 9927      		clr r25
 1727 072c 9F93      		push r25
 1728 072e 8F93      		push r24
 1729 0730 DF93      		push r29
 1730 0732 CF93      		push r28
 1731 0734 80E0      		ldi r24,lo8(__c.1874)
 1732 0736 90E0      		ldi r25,hi8(__c.1874)
 1733 0738 9F93      		push r25
 1734 073a 8F93      		push r24
 1735 073c 11E0      		ldi r17,lo8(1)
 1736 073e 1F93      		push r17
 1737 0740 0E94 0000 		call rprintf1RamRom
 1738 0744 2196      		adiw r28,1
 1739               		.stabn	68,0,516,.LM154-getA2D
 1740               	.LM154:
 1741 0746 8DB7      		in r24,__SP_L__
GAS LISTING /var/tmp//cczS1EeW.s 			page 42


 1742 0748 9EB7      		in r25,__SP_H__
 1743 074a 0796      		adiw r24,7
 1744 074c 0FB6      		in __tmp_reg__,__SREG__
 1745 074e F894      		cli
 1746 0750 9EBF      		out __SP_H__,r25
 1747 0752 0FBE      		out __SREG__,__tmp_reg__
 1748 0754 8DBF      		out __SP_L__,r24
 1749 0756 C330      		cpi r28,3
 1750 0758 D105      		cpc r29,__zero_reg__
 1751 075a 21F7      		brne .L79
 519:cmdlinetest.c **** 	}
 520:cmdlinetest.c **** 	rprintf(",");
 1752               		.stabn	68,0,520,.LM155-getA2D
 1753               	.LM155:
 1754 075c 80E0      		ldi r24,lo8(__c.1879)
 1755 075e 90E0      		ldi r25,hi8(__c.1879)
 1756 0760 9F93      		push r25
 1757 0762 8F93      		push r24
 1758 0764 1F93      		push r17
 1759 0766 0E94 0000 		call rprintf1RamRom
 1760 076a 0F90      		pop __tmp_reg__
 1761 076c 0F90      		pop __tmp_reg__
 1762 076e 0F90      	 	pop __tmp_reg__
 1763               	/* epilogue: frame size=0 */
 1764 0770 DF91      		pop r29
 1765 0772 CF91      		pop r28
 1766 0774 1F91      		pop r17
 1767 0776 0895      		ret
 1768               	/* epilogue end (size=4) */
 1769               	/* function getA2D size 58 (51) */
 1770               		.size	getA2D, .-getA2D
 1771               	.Lscope21:
 1772               		.stabs	"",36,0,0,.Lscope21-getA2D
 1773               		.stabd	78,0,0
 1774               		.stabs	"slaveBuffer:G(0,20)=ar(0,18);0;20;(6,1)",32,0,84,0
 1775               		.stabs	"slaveBufferLength:G(6,1)",32,0,85,0
 1776               		.stabs	"masterBuffer:G(0,21)=ar(0,18);0;28;(0,11)",32,0,87,0
 1777               		.stabs	"masterBufferLength:G(0,11)",32,0,88,0
 1778               		.stabs	"Run:G(6,1)",32,0,90,0
 1779               		.stabs	"leftServoPos:G(6,1)",32,0,98,0
 1780               		.stabs	"multiplier:G(6,3)",32,0,100,0
 1781               		.stabs	"rightServoPos:G(6,1)",32,0,102,0
 1782               		.stabs	"throttleServoPos:G(6,1)",32,0,103,0
 1783               		.stabs	"camPanServoPos:G(6,1)",32,0,104,0
 1784               		.stabs	"camTiltServoPos:G(6,1)",32,0,105,0
 1785               		.stabs	"numTimesThrough:G(0,3)",32,0,107,0
 1786               		.comm camTiltServoPos,1,1
 1787               		.comm camPanServoPos,1,1
 1788               		.comm throttleServoPos,1,1
 1789               		.comm rightServoPos,1,1
 1790               		.comm Run,1,1
 1791               		.stabs	"",100,0,0,.Letext0
 1792               	.Letext0:
 1793               	/* File "cmdlinetest.c": code  956 = 0x03bc ( 803), prologues  72, epilogues  81 */
GAS LISTING /var/tmp//cczS1EeW.s 			page 43


DEFINED SYMBOLS
                            *ABS*:00000000 cmdlinetest.c
/var/tmp//cczS1EeW.s:3      *ABS*:0000003f __SREG__
/var/tmp//cczS1EeW.s:4      *ABS*:0000003e __SP_H__
/var/tmp//cczS1EeW.s:5      *ABS*:0000003d __SP_L__
/var/tmp//cczS1EeW.s:6      *ABS*:00000000 __tmp_reg__
/var/tmp//cczS1EeW.s:7      *ABS*:00000001 __zero_reg__
/var/tmp//cczS1EeW.s:131    .bss:00000000 numTimesThrough
/var/tmp//cczS1EeW.s:137    .data:00000000 multiplier
/var/tmp//cczS1EeW.s:142    .data:00000002 leftServoPos
/var/tmp//cczS1EeW.s:147    .data:00000003 masterBufferLength
/var/tmp//cczS1EeW.s:152    .data:00000004 masterBuffer
/var/tmp//cczS1EeW.s:157    .data:00000021 slaveBufferLength
/var/tmp//cczS1EeW.s:162    .data:00000022 slaveBuffer
/var/tmp//cczS1EeW.s:167    .progmem.data:00000000 __c.1670
/var/tmp//cczS1EeW.s:171    .progmem.data:00000012 __c.1665
/var/tmp//cczS1EeW.s:175    .progmem.data:00000023 __c.1660
/var/tmp//cczS1EeW.s:204    .text:00000000 goCmdline
/var/tmp//cczS1EeW.s:1483   .text:0000065a setLeftServo
/var/tmp//cczS1EeW.s:1509   .text:0000066c setRightServo
/var/tmp//cczS1EeW.s:1535   .text:0000067e setThrottleServo
/var/tmp//cczS1EeW.s:1586   .text:000006a8 setCamPanServo
/var/tmp//cczS1EeW.s:1635   .text:000006d6 setCamTiltServo
/var/tmp//cczS1EeW.s:1561   .text:00000690 setFeedbackInterval
/var/tmp//cczS1EeW.s:1698   .text:00000704 getA2D
/var/tmp//cczS1EeW.s:1234   .text:0000052e i2cMaster_Send
/var/tmp//cczS1EeW.s:1351   .text:000005b2 i2cMaster_Receive
/var/tmp//cczS1EeW.s:573    .text:000001da dumpArgsStr
/var/tmp//cczS1EeW.s:662    .text:00000252 dumpArgsInt
                            *COM*:00000001 Run
/var/tmp//cczS1EeW.s:435    .text:0000016e exitFunction
/var/tmp//cczS1EeW.s:455    .progmem.data:0000004f __c.1690
/var/tmp//cczS1EeW.s:459    .progmem.data:00000085 __c.1688
/var/tmp//cczS1EeW.s:463    .progmem.data:000000bf __c.1686
/var/tmp//cczS1EeW.s:467    .progmem.data:000000f0 __c.1684
/var/tmp//cczS1EeW.s:471    .progmem.data:0000011a __c.1682
/var/tmp//cczS1EeW.s:477    .text:00000174 helpFunction
/var/tmp//cczS1EeW.s:551    .progmem.data:00000134 __c.1703
/var/tmp//cczS1EeW.s:555    .progmem.data:0000013b __c.1701
/var/tmp//cczS1EeW.s:559    .progmem.data:00000142 __c.1699
/var/tmp//cczS1EeW.s:563    .progmem.data:00000149 __c.1697
/var/tmp//cczS1EeW.s:567    .progmem.data:00000150 __c.1695
/var/tmp//cczS1EeW.s:644    .progmem.data:0000016c __c.1722
/var/tmp//cczS1EeW.s:648    .progmem.data:0000017a __c.1720
/var/tmp//cczS1EeW.s:652    .progmem.data:00000188 __c.1718
/var/tmp//cczS1EeW.s:656    .progmem.data:00000196 __c.1716
/var/tmp//cczS1EeW.s:767    .progmem.data:000001b3 __c.1736
/var/tmp//cczS1EeW.s:771    .progmem.data:000001c1 __c.1734
/var/tmp//cczS1EeW.s:775    .progmem.data:000001cf __c.1732
/var/tmp//cczS1EeW.s:779    .progmem.data:000001dd __c.1730
/var/tmp//cczS1EeW.s:785    .text:0000030a dumpArgsHex
/var/tmp//cczS1EeW.s:890    .text:000003c2 i2cSetup
/var/tmp//cczS1EeW.s:1056   .text:00000484 i2cSlaveReceiveService
/var/tmp//cczS1EeW.s:1102   .text:000004a8 i2cSlaveTransmitService
/var/tmp//cczS1EeW.s:925    .progmem.data:000001fe __c.1649
/var/tmp//cczS1EeW.s:931    .text:000003e0 main
/var/tmp//cczS1EeW.s:1155   .text:000004d4 i2cMasterSendDiag
GAS LISTING /var/tmp//cczS1EeW.s 			page 44


/var/tmp//cczS1EeW.s:1293   .text:0000057a i2cMaster_Auto_Send
/var/tmp//cczS1EeW.s:1345   .progmem.data:00000235 __c.1809
/var/tmp//cczS1EeW.s:1428   .progmem.data:00000237 __c.1819
/var/tmp//cczS1EeW.s:1435   .text:00000620 i2cMaster_Auto_Receive
                            *COM*:00000001 rightServoPos
                            *COM*:00000001 throttleServoPos
                            *COM*:00000001 camPanServoPos
                            *COM*:00000001 camTiltServoPos
/var/tmp//cczS1EeW.s:1684   .progmem.data:00000239 __c.1879
/var/tmp//cczS1EeW.s:1688   .progmem.data:0000023b __c.1874
/var/tmp//cczS1EeW.s:1692   .progmem.data:0000023e __c.1872

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
vt100ClearScreen
vt100SetCursorPos
rprintfProgStr
cmdlineInit
uartSendByte
cmdlineSetOutputFunc
cmdlineAddCommand
cmdlineInputFunc
uartReceiveByte
cmdlineMainLoop
rprintf1RamRom
rprintfCRLF
cmdlineGetArgStr
rprintfStr
cmdlineGetArgInt
rprintfNum
cmdlineGetArgHex
i2cInit
i2cSetLocalDeviceAddr
i2cSetSlaveReceiveHandler
i2cSetSlaveTransmitHandler
__stack
uartInit
uartSetBaudRate
rprintfInit
a2dInit
a2dSetPrescaler
a2dSetReference
timerInit
vt100Init
timerPause
servoInit
servoSetChannelIO
exit
i2cSendStart
i2cWaitForComplete
i2cSendByte
i2cSendStop
strcpy
i2cMasterSend
i2cMasterReceive
servoSetPosition
GAS LISTING /var/tmp//cczS1EeW.s 			page 45


a2dConvert8bit
