GAS LISTING /var/tmp//cc112P7K.s 			page 1


   1               		.file	"gpstest.c"
   2               		.arch atmega32
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.stabs	"/Users/jlev/Schoolwork/FreedomFlies/gps/",100,0,0,.Ltext0
  11               		.stabs	"gpstest.c",100,0,0,.Ltext0
  12               		.text
  13               	.Ltext0:
  14               		.stabs	"gcc2_compiled.",60,0,0,0
  15               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  16               		.stabs	"char:t(0,2)=r(0,2);0;127;",128,0,0,0
  17               		.stabs	"long int:t(0,3)=@s32;r(0,3);0020000000000;0017777777777;",128,0,0,0
  18               		.stabs	"unsigned int:t(0,4)=r(0,4);0000000000000;0000000177777;",128,0,0,0
  19               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0000000000000;0037777777777;",128,0,0,0
  20               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  21               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0000000000000;01777777777777777777777;",128,0,0,
  22               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  23               		.stabs	"short unsigned int:t(0,9)=r(0,9);0000000000000;0000000177777;",128,0,0,0
  24               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  25               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  26               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  27               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  28               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"complex int:t(0,15)=s4real:(0,1),0,16;imag:(0,1),16,16;;",128,0,0,0
  30               		.stabs	"complex float:t(0,16)=R3;8;0;",128,0,0,0
  31               		.stabs	"complex double:t(0,17)=R3;8;0;",128,0,0,0
  32               		.stabs	"complex long double:t(0,18)=R3;8;0;",128,0,0,0
  33               		.stabs	"void:t(0,19)=(0,19)",128,0,0,0
  34               		.stabs	"__builtin_va_list:t(0,20)=*(0,19)",128,0,0,0
  35               		.stabs	"_Bool:t(0,21)=@s8;-16;",128,0,0,0
  36               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/avr/io.h",130,0,0,0
  37               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/avr/sfr_defs.h",130,0,0,0
  38               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/inttypes.h",130,0,0,0
  39               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdint.h",130,0,0,0
  40               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,65,0
  41               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,70,0
  42               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,104,0
  43               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,109,0
  44               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,120,0
  45               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,125,0
  46               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,136,0
  47               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,141,0
  48               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,155,0
  49               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,160,0
  50               		.stabn	162,0,0,0
  51               		.stabn	162,0,0,0
  52               		.stabn	162,0,0,0
  53               		.stabn	162,0,0,0
  54               		.stabs	"/opt/local/avr/avrlib/uart.h",130,0,0,0
  55               		.stabs	"./global.h",130,0,0,0
  56               		.stabs	"/opt/local/avr/avrlib/avrlibtypes.h",130,0,0,0
  57               		.stabs	"u08:t(7,1)=(0,11)",128,0,32,0
GAS LISTING /var/tmp//cc112P7K.s 			page 2


  58               		.stabs	"s08:t(7,2)=(0,10)",128,0,33,0
  59               		.stabs	"u16:t(7,3)=(0,9)",128,0,34,0
  60               		.stabs	"s16:t(7,4)=(0,8)",128,0,35,0
  61               		.stabs	"u32:t(7,5)=(0,5)",128,0,36,0
  62               		.stabs	"s32:t(7,6)=(0,3)",128,0,37,0
  63               		.stabs	"u64:t(7,7)=(0,7)",128,0,38,0
  64               		.stabs	"s64:t(7,8)=(0,6)",128,0,39,0
  65               		.stabs	"BOOL:t(7,9)=(0,11)",128,0,69,0
  66               		.stabs	"BYTE:t(7,10)=(0,11)",128,0,70,0
  67               		.stabs	"WORD:t(7,11)=(0,4)",128,0,71,0
  68               		.stabs	"DWORD:t(7,12)=(0,5)",128,0,72,0
  69               		.stabs	"UCHAR:t(7,13)=(0,11)",128,0,74,0
  70               		.stabs	"UINT:t(7,14)=(0,4)",128,0,75,0
  71               		.stabs	"USHORT:t(7,15)=(0,9)",128,0,76,0
  72               		.stabs	"ULONG:t(7,16)=(0,5)",128,0,77,0
  73               		.stabs	"CHAR:t(7,17)=(0,2)",128,0,79,0
  74               		.stabs	"INT:t(7,18)=(0,1)",128,0,80,0
  75               		.stabs	"LONG:t(7,19)=(0,3)",128,0,81,0
  76               		.stabn	162,0,0,0
  77               		.stabn	162,0,0,0
  78               		.stabs	"/opt/local/avr/avrlib/buffer.h",130,0,0,0
  79               		.stabs	"struct_cBuffer:T(8,1)=s8dataptr:(8,2)=*(0,11),0,16;size:(0,9),16,16;datalength:(0,9),32,16
  80               		.stabs	"cBuffer:t(8,3)=(8,1)",128,0,47,0
  81               		.stabn	162,0,0,0
  82               		.stabn	162,0,0,0
  83               		.stabs	"/opt/local/avr/avrlib/rprintf.h",130,0,0,0
  84               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/avr/pgmspace.h",130,0,0,0
  85               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/include/stddef.h",130,0,0,0
  86               		.stabs	"size_t:t(11,1)=(0,4)",128,0,213,0
  87               		.stabn	162,0,0,0
  88               		.stabs	"prog_void:t(10,1)=(10,2)=(10,2)",128,0,90,0
  89               		.stabs	"prog_char:t(10,3)=(10,4)=@s8;r(10,4);-128;127;",128,0,91,0
  90               		.stabs	"prog_uchar:t(10,5)=(10,6)=@s8;r(10,6);0;255;",128,0,92,0
  91               		.stabs	"prog_int8_t:t(10,7)=(10,8)=(0,10)",128,0,94,0
  92               		.stabs	"prog_uint8_t:t(10,9)=(10,10)=@s8;r(10,10);0;255;",128,0,95,0
  93               		.stabs	"prog_int16_t:t(10,11)=(10,12)=(0,1)",128,0,96,0
  94               		.stabs	"prog_uint16_t:t(10,13)=(10,14)=(0,4)",128,0,97,0
  95               		.stabs	"prog_int32_t:t(10,15)=(10,16)=(0,3)",128,0,99,0
  96               		.stabs	"prog_uint32_t:t(10,17)=(10,18)=(0,5)",128,0,100,0
  97               		.stabs	"prog_int64_t:t(10,19)=(10,20)=(0,6)",128,0,103,0
  98               		.stabs	"prog_uint64_t:t(10,21)=(10,22)=(0,7)",128,0,104,0
  99               		.stabn	162,0,0,0
 100               		.stabn	162,0,0,0
 101               		.stabs	"nmeap.h",130,0,0,0
 102               		.stabs	"nmeap_callout_t:t(12,1)=(12,2)=*(12,3)=f(0,19)",128,0,75,0
 103               		.stabs	"nmeap_sentence_parser_t:t(12,4)=(12,5)=*(12,6)=f(0,1)",128,0,87,0
 104               		.stabs	"nmeap_def.h",130,0,0,0
 105               		.stabs	"nmeap_sentence:T(13,1)=s14name:(13,2)=ar(13,3)=r(13,3);0000000000000;0000000177777;;0;5;(0
 106               		.stabs	"nmeap_sentence_t:t(13,5)=(13,1)",128,0,34,0
 107               		.stabs	"nmeap_context:T(13,6)=s718sentence:(13,7)=ar(13,3);0;7;(13,5),0,896;sentence_count:(0,1),8
 108               		.stabs	"nmeap_context_t:t(13,11)=(13,6)",128,0,70,0
 109               		.stabn	162,0,0,0
 110               		.stabs	"nmeap_gga:T(12,7)=s28latitude:(0,13),0,32;longitude:(0,13),32,32;altitude:(0,13),64,32;tim
 111               		.stabs	"nmeap_gga_t:t(12,8)=(12,7)",128,0,114,0
 112               		.stabs	"nmeap_rmc:T(12,9)=s29time:(0,5),0,32;warn:(0,2),32,8;latitude:(0,13),40,32;longitude:(0,13
 113               		.stabs	"nmeap_rmc_t:t(12,10)=(12,9)",128,0,128,0
 114               		.stabn	162,0,0,0
GAS LISTING /var/tmp//cc112P7K.s 			page 3


 115               		.stabs	"nmeap01.c",130,0,0,0
 116               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdio.h",130,0,0,0
 117               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/include/stdarg.h",130,0,0,0
 118               		.stabs	"__gnuc_va_list:t(16,1)=(0,20)",128,0,43,0
 119               		.stabs	"va_list:t(16,2)=(16,1)",128,0,105,0
 120               		.stabn	162,0,0,0
 121               		.stabn	162,0,0,0
 122               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",130,0,0,0
 123               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/include/stddef.h",130,0,0,0
 124               		.stabs	"wchar_t:t(18,1)=(0,1)",128,0,325,0
 125               		.stabn	162,0,0,0
 126               		.stabs	"div_t:t(17,1)=(17,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,69,0
 127               		.stabs	"ldiv_t:t(17,3)=(17,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,75,0
 128               		.stabs	"__compar_fn_t:t(17,5)=(17,6)=*(17,7)=f(0,1)",128,0,78,0
 129               		.stabn	162,0,0,0
 130               		.stabn	162,0,0,0
 131               		.stabs	"gpsmath.c",130,0,0,0
 132               		.stabs	"./gpsmath.h",130,0,0,0
 133               		.stabs	"waypoint:T(20,1)=s8lat:(0,13),0,32;lon:(0,13),32,32;;",128,0,0,0
 134               		.stabn	162,0,0,0
 135               		.stabn	162,0,0,0
 136               		.stabs	"nmeap_latitude:F(0,13)",36,0,58,nmeap_latitude
 137               		.stabs	"plat:P(0,22)=*(0,23)=k(0,2)",64,0,57,30
 138               		.stabs	"phem:P(0,22)",64,0,57,26
 139               	.global	nmeap_latitude
 140               		.type	nmeap_latitude, @function
 141               	nmeap_latitude:
 142               		.stabs	"nmeap01.c",132,0,0,.Ltext1
 143               	.Ltext1:
   1:nmeap01.c     **** /*
   2:nmeap01.c     **** Copyright (c) 2005, David M Howard (daveh at dmh2000.com)
   3:nmeap01.c     **** All rights reserved.
   4:nmeap01.c     **** 
   5:nmeap01.c     **** This product is licensed for use and distribution under the BSD Open Source License.
   6:nmeap01.c     **** see the file COPYING for more details.
   7:nmeap01.c     **** 
   8:nmeap01.c     **** THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" 
   9:nmeap01.c     **** AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
  10:nmeap01.c     **** IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
  11:nmeap01.c     **** ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
  12:nmeap01.c     **** LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, 
  13:nmeap01.c     **** OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT 
  14:nmeap01.c     **** OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
  15:nmeap01.c     **** OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
  16:nmeap01.c     **** WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE 
  17:nmeap01.c     **** OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
  18:nmeap01.c     **** EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
  19:nmeap01.c     **** 
  20:nmeap01.c     **** */
  21:nmeap01.c     **** 
  22:nmeap01.c     **** /**
  23:nmeap01.c     ****  * nmeap01.c
  24:nmeap01.c     ****  * nmeap gps data parser
  25:nmeap01.c     ****  * 
  26:nmeap01.c     ****  * see the file COPYING for terms of the licnese
  27:nmeap01.c     **** */ 
  28:nmeap01.c     ****  
GAS LISTING /var/tmp//cc112P7K.s 			page 4


  29:nmeap01.c     ****  
  30:nmeap01.c     **** #include <stdio.h>
  31:nmeap01.c     **** #include <stdlib.h>
  32:nmeap01.c     **** #include <string.h>
  33:nmeap01.c     **** #include <ctype.h>
  34:nmeap01.c     **** #include "nmeap.h"#include "assert.h" 
  35:nmeap01.c     **** #include <math.h>
  36:nmeap01.c     **** 
  37:nmeap01.c     **** /* this only works if you are sure you have an upper case hex digit */
  38:nmeap01.c     **** #define HEXTOBIN(ch) ((ch <= '9') ? ch - '0' : ch - ('A' - 10))
  39:nmeap01.c     **** 
  40:nmeap01.c     **** /* forward references */
  41:nmeap01.c     **** int nmeap_init(nmeap_context_t *context,void *user_data);
  42:nmeap01.c     **** int nmeap_addParser(nmeap_context_t         *context,
  43:nmeap01.c     **** 					 const char             *sentence_name,
  44:nmeap01.c     **** 					 nmeap_sentence_parser_t sentence_parser,
  45:nmeap01.c     **** 					 nmeap_callout_t         sentence_callout,
  46:nmeap01.c     ****                      void                  *sentence_data
  47:nmeap01.c     **** 					 );
  48:nmeap01.c     **** int nmeap_tokenize(nmeap_context_t *context);
  49:nmeap01.c     **** int nmeap_process(nmeap_context_t *context);
  50:nmeap01.c     **** int nmeap_parse(nmeap_context_t *context,char ch);
  51:nmeap01.c     **** int nmeap_parseBuffer(nmeap_context_t *context,const char *buffer,int *length);
  52:nmeap01.c     **** 
  53:nmeap01.c     **** /**
  54:nmeap01.c     ****  * get a latitude out of a pair of nmea tokens 
  55:nmeap01.c     ****  */
  56:nmeap01.c     **** double nmeap_latitude(const char *plat,const char *phem)
  57:nmeap01.c     **** {
  58:nmeap01.c     ****     double lat;
 144               		.stabn 68,0,58,.LM1-nmeap_latitude
 145               	.LM1:
 146               	/* prologue: frame size=0 */
 147 0000 AF92      		push r10
 148 0002 BF92      		push r11
 149 0004 CF92      		push r12
 150 0006 DF92      		push r13
 151 0008 EF92      		push r14
 152 000a FF92      		push r15
 153 000c 0F93      		push r16
 154 000e 1F93      		push r17
 155 0010 CF93      		push r28
 156 0012 DF93      		push r29
 157               	/* prologue end (size=10) */
 158 0014 FC01      		movw r30,r24
 159 0016 DB01      		movw r26,r22
  59:nmeap01.c     ****     int    deg;
  60:nmeap01.c     ****     double min;
  61:nmeap01.c     ****     int    ns;
  62:nmeap01.c     ****     
  63:nmeap01.c     ****     assert(plat != 0);
  64:nmeap01.c     ****     assert(phem != 0);
 160               		.stabn 68,0,64,.LM2-nmeap_latitude
 161               	.LM2:
 162 0018 892B      		or r24,r25
 163 001a 09F4      		brne .L3
 164               	.L4:
GAS LISTING /var/tmp//cc112P7K.s 			page 5


 165               	.LBB2:
 166               	.LBB3:
 167               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext2
 168               	.Ltext2:
   1:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    Copyright (c) 2004, Joerg Wunsch
   3:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
   4:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    Portions of documentation Copyright (c) 1990, 1991, 1993, 1994
   5:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    The Regents of the University of California.
   6:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
   7:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    All rights reserved.
   8:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
   9:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    Redistribution and use in source and binary forms, with or without
  10:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    modification, are permitted provided that the following conditions are met:
  11:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  12:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    * Redistributions of source code must retain the above copyright
  13:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      notice, this list of conditions and the following disclaimer.
  14:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  15:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    * Redistributions in binary form must reproduce the above copyright
  16:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      notice, this list of conditions and the following disclaimer in
  17:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      the documentation and/or other materials provided with the
  18:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      distribution.
  19:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  20:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****    * Neither the name of the copyright holders nor the names of
  21:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      contributors may be used to endorse or promote products derived
  22:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****      from this software without specific prior written permission.
  23:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  24:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  25:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  26:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  27:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  28:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  29:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  30:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  31:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  32:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  33:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  34:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   POSSIBILITY OF SUCH DAMAGE.
  35:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  36:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****   $Id: stdlib.h,v 1.22 2004/12/14 22:56:51 joerg_wunsch Exp $
  37:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** */
  38:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  39:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef _STDLIB_H_
  40:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define	_STDLIB_H_ 1
  41:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  42:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ASSEMBLER__
  43:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  44:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __need_NULL
  45:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __need_size_t
  46:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __need_wchar_t
  47:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #include <stddef.h>
  48:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  49:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ptr_t
  50:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __ptr_t void *
  51:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  52:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  53:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifdef __cplusplus
GAS LISTING /var/tmp//cc112P7K.s 			page 6


  54:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** extern "C" {
  55:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  56:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  57:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /** \defgroup avr_stdlib General utilities
  58:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****     \code #include <stdlib.h> \endcode
  59:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  60:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****     This file declares some basic C macros and functions as
  61:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****     defined by the ISO standard, plus some AVR-specific extensions.
  62:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** */
  63:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  64:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /*@{*/
  65:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /** Result type for function div(). */
  66:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** typedef struct {
  67:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 	int quot;                   /**< The Quotient. */
  68:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 	int rem;                    /**< The Remainder. */
  69:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** } div_t;
  70:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  71:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /** Result type for function ldiv(). */
  72:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** typedef struct {
  73:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 	long quot;                  /**< The Quotient. */
  74:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 	long rem;                   /**< The Remainder. */
  75:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** } ldiv_t;
  76:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  77:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /** Comparision function type for qsort(), just for convenience. */
  78:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** typedef int (*__compar_fn_t)(const void *, const void *);
  79:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  80:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef DOXYGEN
  81:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  82:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ATTR_CONST__
  83:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __ATTR_CONST__ __attribute__((__const__))
  84:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  85:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  86:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ATTR_MALLOC__
  87:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __ATTR_MALLOC__ __attribute__((__malloc__))
  88:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  89:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  90:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ATTR_NORETURN__
  91:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __ATTR_NORETURN__ __attribute__((__noreturn__))
  92:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  93:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  94:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #ifndef __ATTR_PURE__
  95:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #define __ATTR_PURE__ __attribute__((__pure__))
  96:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  97:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
  98:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** #endif
  99:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
 100:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** extern __inline__ void abort(void) __ATTR_NORETURN__;
 101:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 
 102:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** /** The abort() function causes abnormal program termination to occur.
 103:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****     In the limited AVR environment, execution is effectively halted
 104:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h ****     by entering an infinite loop. */
 105:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** extern __inline__ void
 106:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** abort(void)
 107:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** {
 108:/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h **** 	for (;;);
 169               		.stabn 68,0,108,.LM3-nmeap_latitude
 170               	.LM3:
GAS LISTING /var/tmp//cc112P7K.s 			page 7


 171 001c FFCF      		rjmp .L4
 172               	.L3:
 173               	.LBE3:
 174               	.LBE2:
 175               		.stabs	"nmeap01.c",132,0,0,.Ltext3
 176               	.Ltext3:
  65:nmeap01.c     ****     
 177               		.stabn 68,0,65,.LM4-nmeap_latitude
 178               	.LM4:
 179 001e 672B      		or r22,r23
 180 0020 09F4      		brne .L8
 181               	.L9:
 182               	.LBB4:
 183               	.LBB5:
 184               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext4
 185               	.Ltext4:
 186               		.stabn 68,0,108,.LM5-nmeap_latitude
 187               	.LM5:
 188 0022 FFCF      		rjmp .L9
 189               	.L8:
 190               	.LBE5:
 191               	.LBE4:
 192               		.stabs	"nmeap01.c",132,0,0,.Ltext5
 193               	.Ltext5:
  66:nmeap01.c     ****     if (*plat == 0) {
  67:nmeap01.c     ****         return 0.0;
 194               		.stabn 68,0,67,.LM6-nmeap_latitude
 195               	.LM6:
 196 0024 8081      		ld r24,Z
 197 0026 8823      		tst r24
 198 0028 19F0      		breq .L16
  68:nmeap01.c     ****     }
  69:nmeap01.c     ****     if (*phem == 0) {
  70:nmeap01.c     ****         return 0.0;
 199               		.stabn 68,0,70,.LM7-nmeap_latitude
 200               	.LM7:
 201 002a 6C91      		ld r22,X
 202 002c 6623      		tst r22
 203 002e 29F4      		brne .L13
 204               	.L16:
  71:nmeap01.c     ****     }
 205               		.stabn 68,0,71,.LM8-nmeap_latitude
 206               	.LM8:
 207 0030 60E0      		ldi r22,lo8(0x0)
 208 0032 70E0      		ldi r23,hi8(0x0)
 209 0034 80E0      		ldi r24,hlo8(0x0)
 210 0036 90E0      		ldi r25,hhi8(0x0)
 211 0038 5BC0      		rjmp .L1
 212               	.L13:
  72:nmeap01.c     ****     
  73:nmeap01.c     ****     /* north lat is +, south lat is - */
  74:nmeap01.c     ****     if (*phem == 'N') {
  75:nmeap01.c     ****         ns = 1;
 213               		.stabn 68,0,75,.LM9-nmeap_latitude
 214               	.LM9:
 215 003a 6E34      		cpi r22,lo8(78)
 216 003c 19F4      		brne .L14
GAS LISTING /var/tmp//cc112P7K.s 			page 8


  76:nmeap01.c     ****     }
 217               		.stabn 68,0,76,.LM10-nmeap_latitude
 218               	.LM10:
 219 003e C1E0      		ldi r28,lo8(1)
 220 0040 D0E0      		ldi r29,hi8(1)
 221 0042 02C0      		rjmp .L15
 222               	.L14:
  77:nmeap01.c     ****     else {
  78:nmeap01.c     ****         ns = -1;
  79:nmeap01.c     ****     }
 223               		.stabn 68,0,79,.LM11-nmeap_latitude
 224               	.LM11:
 225 0044 CFEF      		ldi r28,lo8(-1)
 226 0046 DFEF      		ldi r29,hi8(-1)
 227               	.L15:
  80:nmeap01.c     ****     
  81:nmeap01.c     ****     /* latitude is degrees, minutes, fractional minutes */
  82:nmeap01.c     ****     /* no validation is performed on the token. it better be good.*/
  83:nmeap01.c     ****     /* if it comes back 0.0 then probably the token was bad */
  84:nmeap01.c     ****     lat = atof(plat);
  85:nmeap01.c     ****     
 228               		.stabn 68,0,85,.LM12-nmeap_latitude
 229               	.LM12:
 230 0048 CF01      		movw r24,r30
 231 004a 0E94 0000 		call atof
 232 004e 5B01      		movw r10,r22
 233 0050 6C01      		movw r12,r24
  86:nmeap01.c     ****     /* extract the degree part */
  87:nmeap01.c     ****     deg = (int)(lat / 100.0);
  88:nmeap01.c     ****     
 234               		.stabn 68,0,88,.LM13-nmeap_latitude
 235               	.LM13:
 236 0052 20E0      		ldi r18,lo8(0x42c80000)
 237 0054 30E0      		ldi r19,hi8(0x42c80000)
 238 0056 48EC      		ldi r20,hlo8(0x42c80000)
 239 0058 52E4      		ldi r21,hhi8(0x42c80000)
 240 005a 0E94 0000 		call __divsf3
 241 005e DC01      		movw r26,r24
 242 0060 CB01      		movw r24,r22
 243 0062 BC01      		movw r22,r24
 244 0064 CD01      		movw r24,r26
 245 0066 0E94 0000 		call __fixsfsi
 246 006a DC01      		movw r26,r24
 247 006c CB01      		movw r24,r22
  89:nmeap01.c     ****     /* mask out the degrees */
  90:nmeap01.c     ****     min = lat - (deg * 100.0);
  91:nmeap01.c     ****     
 248               		.stabn 68,0,91,.LM14-nmeap_latitude
 249               	.LM14:
 250 006e AA27      		clr r26
 251 0070 97FD      		sbrc r25,7
 252 0072 A095      		com r26
 253 0074 BA2F      		mov r27,r26
 254 0076 BC01      		movw r22,r24
 255 0078 CD01      		movw r24,r26
 256 007a 0E94 0000 		call __floatsisf
 257 007e 7B01      		movw r14,r22
GAS LISTING /var/tmp//cc112P7K.s 			page 9


 258 0080 8C01      		movw r16,r24
 259 0082 20E0      		ldi r18,lo8(0x42c80000)
 260 0084 30E0      		ldi r19,hi8(0x42c80000)
 261 0086 48EC      		ldi r20,hlo8(0x42c80000)
 262 0088 52E4      		ldi r21,hhi8(0x42c80000)
 263 008a 0E94 0000 		call __mulsf3
 264 008e DC01      		movw r26,r24
 265 0090 CB01      		movw r24,r22
 266 0092 9C01      		movw r18,r24
 267 0094 AD01      		movw r20,r26
 268 0096 C601      		movw r24,r12
 269 0098 B501      		movw r22,r10
 270 009a 0E94 0000 		call __subsf3
 271 009e DC01      		movw r26,r24
 272 00a0 CB01      		movw r24,r22
  92:nmeap01.c     ****     /* compute the actual latitude in degrees.decimal-degrees */
  93:nmeap01.c     ****     lat = (deg + (min / 60.0)) * ns;
  94:nmeap01.c     ****     
 273               		.stabn 68,0,94,.LM15-nmeap_latitude
 274               	.LM15:
 275 00a2 20E0      		ldi r18,lo8(0x42700000)
 276 00a4 30E0      		ldi r19,hi8(0x42700000)
 277 00a6 40E7      		ldi r20,hlo8(0x42700000)
 278 00a8 52E4      		ldi r21,hhi8(0x42700000)
 279 00aa BC01      		movw r22,r24
 280 00ac CD01      		movw r24,r26
 281 00ae 0E94 0000 		call __divsf3
 282 00b2 DC01      		movw r26,r24
 283 00b4 CB01      		movw r24,r22
 284 00b6 9C01      		movw r18,r24
 285 00b8 AD01      		movw r20,r26
 286 00ba C801      		movw r24,r16
 287 00bc B701      		movw r22,r14
 288 00be 0E94 0000 		call __addsf3
 289 00c2 7B01      		movw r14,r22
 290 00c4 8C01      		movw r16,r24
 291 00c6 CE01      		movw r24,r28
 292 00c8 AA27      		clr r26
 293 00ca 97FD      		sbrc r25,7
 294 00cc A095      		com r26
 295 00ce BA2F      		mov r27,r26
 296 00d0 BC01      		movw r22,r24
 297 00d2 CD01      		movw r24,r26
 298 00d4 0E94 0000 		call __floatsisf
 299 00d8 DC01      		movw r26,r24
 300 00da CB01      		movw r24,r22
 301 00dc 9C01      		movw r18,r24
 302 00de AD01      		movw r20,r26
 303 00e0 C801      		movw r24,r16
 304 00e2 B701      		movw r22,r14
 305 00e4 0E94 0000 		call __mulsf3
 306 00e8 DC01      		movw r26,r24
 307 00ea CB01      		movw r24,r22
  95:nmeap01.c     ****     return lat;
  96:nmeap01.c     **** }
 308               		.stabn 68,0,96,.LM16-nmeap_latitude
 309               	.LM16:
GAS LISTING /var/tmp//cc112P7K.s 			page 10


 310 00ec BC01      		movw r22,r24
 311 00ee CD01      		movw r24,r26
 312               	.L1:
 313               	/* epilogue: frame size=0 */
 314 00f0 DF91      		pop r29
 315 00f2 CF91      		pop r28
 316 00f4 1F91      		pop r17
 317 00f6 0F91      		pop r16
 318 00f8 FF90      		pop r15
 319 00fa EF90      		pop r14
 320 00fc DF90      		pop r13
 321 00fe CF90      		pop r12
 322 0100 BF90      		pop r11
 323 0102 AF90      		pop r10
 324 0104 0895      		ret
 325               	/* epilogue end (size=11) */
 326               	/* function nmeap_latitude size 131 (110) */
 327               		.size	nmeap_latitude, .-nmeap_latitude
 328               		.stabs	"lat:r(0,13)",64,0,59,10
 329               		.stabs	"deg:r(0,1)",64,0,60,24
 330               		.stabs	"ns:r(0,1)",64,0,62,28
 331               		.stabn	192,0,0,nmeap_latitude-nmeap_latitude
 332               		.stabn	224,0,0,.Lscope0-nmeap_latitude
 333               	.Lscope0:
 334               		.stabs	"",36,0,0,.Lscope0-nmeap_latitude
 335               		.stabs	"nmeap_longitude:F(0,13)",36,0,105,nmeap_longitude
 336               		.stabs	"plon:P(0,22)",64,0,104,30
 337               		.stabs	"phem:P(0,22)",64,0,104,26
 338               	.global	nmeap_longitude
 339               		.type	nmeap_longitude, @function
 340               	nmeap_longitude:
  97:nmeap01.c     **** 
  98:nmeap01.c     **** 
  99:nmeap01.c     **** 
 100:nmeap01.c     **** /**
 101:nmeap01.c     ****  * get a longitude out of a pair of nmea tokens 
 102:nmeap01.c     ****  */
 103:nmeap01.c     **** double nmeap_longitude(const char *plon,const char *phem)
 104:nmeap01.c     **** {
 105:nmeap01.c     ****     double lon;
 341               		.stabn 68,0,105,.LM17-nmeap_longitude
 342               	.LM17:
 343               	/* prologue: frame size=0 */
 344 0106 AF92      		push r10
 345 0108 BF92      		push r11
 346 010a CF92      		push r12
 347 010c DF92      		push r13
 348 010e EF92      		push r14
 349 0110 FF92      		push r15
 350 0112 0F93      		push r16
 351 0114 1F93      		push r17
 352 0116 CF93      		push r28
 353 0118 DF93      		push r29
 354               	/* prologue end (size=10) */
 355 011a FC01      		movw r30,r24
 356 011c DB01      		movw r26,r22
 106:nmeap01.c     ****     int    deg;
GAS LISTING /var/tmp//cc112P7K.s 			page 11


 107:nmeap01.c     ****     double min;
 108:nmeap01.c     ****     int    ew;
 109:nmeap01.c     ****     
 110:nmeap01.c     ****     assert(plon != 0);
 111:nmeap01.c     ****     assert(phem != 0);
 357               		.stabn 68,0,111,.LM18-nmeap_longitude
 358               	.LM18:
 359 011e 892B      		or r24,r25
 360 0120 09F4      		brne .L19
 361               	.L20:
 362               	.LBB6:
 363               	.LBB7:
 364               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext6
 365               	.Ltext6:
 366               		.stabn 68,0,108,.LM19-nmeap_longitude
 367               	.LM19:
 368 0122 FFCF      		rjmp .L20
 369               	.L19:
 370               	.LBE7:
 371               	.LBE6:
 372               		.stabs	"nmeap01.c",132,0,0,.Ltext7
 373               	.Ltext7:
 112:nmeap01.c     ****     
 374               		.stabn 68,0,112,.LM20-nmeap_longitude
 375               	.LM20:
 376 0124 672B      		or r22,r23
 377 0126 09F4      		brne .L24
 378               	.L25:
 379               	.LBB8:
 380               	.LBB9:
 381               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext8
 382               	.Ltext8:
 383               		.stabn 68,0,108,.LM21-nmeap_longitude
 384               	.LM21:
 385 0128 FFCF      		rjmp .L25
 386               	.L24:
 387               	.LBE9:
 388               	.LBE8:
 389               		.stabs	"nmeap01.c",132,0,0,.Ltext9
 390               	.Ltext9:
 113:nmeap01.c     ****     if (*plon == 0) {
 114:nmeap01.c     ****         return 0.0;
 391               		.stabn 68,0,114,.LM22-nmeap_longitude
 392               	.LM22:
 393 012a 8081      		ld r24,Z
 394 012c 8823      		tst r24
 395 012e 19F0      		breq .L32
 115:nmeap01.c     ****     }
 116:nmeap01.c     ****     if (*phem == 0) {
 117:nmeap01.c     ****         return 0.0;
 396               		.stabn 68,0,117,.LM23-nmeap_longitude
 397               	.LM23:
 398 0130 6C91      		ld r22,X
 399 0132 6623      		tst r22
 400 0134 29F4      		brne .L29
 401               	.L32:
 118:nmeap01.c     ****     }
GAS LISTING /var/tmp//cc112P7K.s 			page 12


 402               		.stabn 68,0,118,.LM24-nmeap_longitude
 403               	.LM24:
 404 0136 60E0      		ldi r22,lo8(0x0)
 405 0138 70E0      		ldi r23,hi8(0x0)
 406 013a 80E0      		ldi r24,hlo8(0x0)
 407 013c 90E0      		ldi r25,hhi8(0x0)
 408 013e 5BC0      		rjmp .L17
 409               	.L29:
 119:nmeap01.c     ****     
 120:nmeap01.c     ****     /* west long is negative, east long is positive */
 121:nmeap01.c     ****     if (*phem == 'E') {
 122:nmeap01.c     ****         ew = 1;
 410               		.stabn 68,0,122,.LM25-nmeap_longitude
 411               	.LM25:
 412 0140 6534      		cpi r22,lo8(69)
 413 0142 19F4      		brne .L30
 123:nmeap01.c     ****     }
 414               		.stabn 68,0,123,.LM26-nmeap_longitude
 415               	.LM26:
 416 0144 C1E0      		ldi r28,lo8(1)
 417 0146 D0E0      		ldi r29,hi8(1)
 418 0148 02C0      		rjmp .L31
 419               	.L30:
 124:nmeap01.c     ****     else {
 125:nmeap01.c     ****         ew = -1;
 126:nmeap01.c     ****     }
 420               		.stabn 68,0,126,.LM27-nmeap_longitude
 421               	.LM27:
 422 014a CFEF      		ldi r28,lo8(-1)
 423 014c DFEF      		ldi r29,hi8(-1)
 424               	.L31:
 127:nmeap01.c     ****     
 128:nmeap01.c     ****     /* longitude is degrees, minutes, fractional minutes */
 129:nmeap01.c     ****     /* no validation is performed on the token. it better be good.*/
 130:nmeap01.c     ****     /* if it comes back 0.0 then probably the token was bad */
 131:nmeap01.c     ****     lon = atof(plon);
 132:nmeap01.c     ****     
 425               		.stabn 68,0,132,.LM28-nmeap_longitude
 426               	.LM28:
 427 014e CF01      		movw r24,r30
 428 0150 0E94 0000 		call atof
 429 0154 5B01      		movw r10,r22
 430 0156 6C01      		movw r12,r24
 133:nmeap01.c     ****     /* extract the degree part */
 134:nmeap01.c     ****     deg = (int)(lon / 100.0);
 135:nmeap01.c     ****     
 431               		.stabn 68,0,135,.LM29-nmeap_longitude
 432               	.LM29:
 433 0158 20E0      		ldi r18,lo8(0x42c80000)
 434 015a 30E0      		ldi r19,hi8(0x42c80000)
 435 015c 48EC      		ldi r20,hlo8(0x42c80000)
 436 015e 52E4      		ldi r21,hhi8(0x42c80000)
 437 0160 0E94 0000 		call __divsf3
 438 0164 DC01      		movw r26,r24
 439 0166 CB01      		movw r24,r22
 440 0168 BC01      		movw r22,r24
 441 016a CD01      		movw r24,r26
GAS LISTING /var/tmp//cc112P7K.s 			page 13


 442 016c 0E94 0000 		call __fixsfsi
 443 0170 DC01      		movw r26,r24
 444 0172 CB01      		movw r24,r22
 136:nmeap01.c     ****     /* mask out the degrees */
 137:nmeap01.c     ****     min = lon - (deg * 100.0);
 138:nmeap01.c     ****     
 445               		.stabn 68,0,138,.LM30-nmeap_longitude
 446               	.LM30:
 447 0174 AA27      		clr r26
 448 0176 97FD      		sbrc r25,7
 449 0178 A095      		com r26
 450 017a BA2F      		mov r27,r26
 451 017c BC01      		movw r22,r24
 452 017e CD01      		movw r24,r26
 453 0180 0E94 0000 		call __floatsisf
 454 0184 7B01      		movw r14,r22
 455 0186 8C01      		movw r16,r24
 456 0188 20E0      		ldi r18,lo8(0x42c80000)
 457 018a 30E0      		ldi r19,hi8(0x42c80000)
 458 018c 48EC      		ldi r20,hlo8(0x42c80000)
 459 018e 52E4      		ldi r21,hhi8(0x42c80000)
 460 0190 0E94 0000 		call __mulsf3
 461 0194 DC01      		movw r26,r24
 462 0196 CB01      		movw r24,r22
 463 0198 9C01      		movw r18,r24
 464 019a AD01      		movw r20,r26
 465 019c C601      		movw r24,r12
 466 019e B501      		movw r22,r10
 467 01a0 0E94 0000 		call __subsf3
 468 01a4 DC01      		movw r26,r24
 469 01a6 CB01      		movw r24,r22
 139:nmeap01.c     ****     /* compute the actual lonitude in degrees.decimal-degrees */
 140:nmeap01.c     ****     lon = (deg + (min / 60.0)) * ew;
 141:nmeap01.c     **** 
 470               		.stabn 68,0,141,.LM31-nmeap_longitude
 471               	.LM31:
 472 01a8 20E0      		ldi r18,lo8(0x42700000)
 473 01aa 30E0      		ldi r19,hi8(0x42700000)
 474 01ac 40E7      		ldi r20,hlo8(0x42700000)
 475 01ae 52E4      		ldi r21,hhi8(0x42700000)
 476 01b0 BC01      		movw r22,r24
 477 01b2 CD01      		movw r24,r26
 478 01b4 0E94 0000 		call __divsf3
 479 01b8 DC01      		movw r26,r24
 480 01ba CB01      		movw r24,r22
 481 01bc 9C01      		movw r18,r24
 482 01be AD01      		movw r20,r26
 483 01c0 C801      		movw r24,r16
 484 01c2 B701      		movw r22,r14
 485 01c4 0E94 0000 		call __addsf3
 486 01c8 7B01      		movw r14,r22
 487 01ca 8C01      		movw r16,r24
 488 01cc CE01      		movw r24,r28
 489 01ce AA27      		clr r26
 490 01d0 97FD      		sbrc r25,7
 491 01d2 A095      		com r26
 492 01d4 BA2F      		mov r27,r26
GAS LISTING /var/tmp//cc112P7K.s 			page 14


 493 01d6 BC01      		movw r22,r24
 494 01d8 CD01      		movw r24,r26
 495 01da 0E94 0000 		call __floatsisf
 496 01de DC01      		movw r26,r24
 497 01e0 CB01      		movw r24,r22
 498 01e2 9C01      		movw r18,r24
 499 01e4 AD01      		movw r20,r26
 500 01e6 C801      		movw r24,r16
 501 01e8 B701      		movw r22,r14
 502 01ea 0E94 0000 		call __mulsf3
 503 01ee DC01      		movw r26,r24
 504 01f0 CB01      		movw r24,r22
 142:nmeap01.c     ****     
 143:nmeap01.c     ****     return lon;
 144:nmeap01.c     **** }
 505               		.stabn 68,0,144,.LM32-nmeap_longitude
 506               	.LM32:
 507 01f2 BC01      		movw r22,r24
 508 01f4 CD01      		movw r24,r26
 509               	.L17:
 510               	/* epilogue: frame size=0 */
 511 01f6 DF91      		pop r29
 512 01f8 CF91      		pop r28
 513 01fa 1F91      		pop r17
 514 01fc 0F91      		pop r16
 515 01fe FF90      		pop r15
 516 0200 EF90      		pop r14
 517 0202 DF90      		pop r13
 518 0204 CF90      		pop r12
 519 0206 BF90      		pop r11
 520 0208 AF90      		pop r10
 521 020a 0895      		ret
 522               	/* epilogue end (size=11) */
 523               	/* function nmeap_longitude size 131 (110) */
 524               		.size	nmeap_longitude, .-nmeap_longitude
 525               		.stabs	"lon:r(0,13)",64,0,106,10
 526               		.stabs	"deg:r(0,1)",64,0,107,24
 527               		.stabs	"ew:r(0,1)",64,0,109,28
 528               		.stabn	192,0,0,nmeap_longitude-nmeap_longitude
 529               		.stabn	224,0,0,.Lscope1-nmeap_longitude
 530               	.Lscope1:
 531               		.stabs	"",36,0,0,.Lscope1-nmeap_longitude
 532               		.stabs	"nmeap_altitude:F(0,13)",36,0,152,nmeap_altitude
 533               		.stabs	"palt:P(0,22)",64,0,151,30
 534               		.stabs	"punits:P(0,22)",64,0,151,28
 535               	.global	nmeap_altitude
 536               		.type	nmeap_altitude, @function
 537               	nmeap_altitude:
 145:nmeap01.c     **** 
 146:nmeap01.c     **** /**
 147:nmeap01.c     ****  * get an altitude longitude out of a pair of nmea tokens
 148:nmeap01.c     ****  * ALTITUDE is returned in METERS 
 149:nmeap01.c     ****  */
 150:nmeap01.c     **** double nmeap_altitude(const char *palt,const char *punits)
 151:nmeap01.c     **** {
 152:nmeap01.c     ****     double alt;
 538               		.stabn 68,0,152,.LM33-nmeap_altitude
GAS LISTING /var/tmp//cc112P7K.s 			page 15


 539               	.LM33:
 540               	/* prologue: frame size=0 */
 541 020c CF93      		push r28
 542 020e DF93      		push r29
 543               	/* prologue end (size=2) */
 544 0210 FC01      		movw r30,r24
 545 0212 EB01      		movw r28,r22
 153:nmeap01.c     ****     
 154:nmeap01.c     ****     if (*palt == 0) {
 155:nmeap01.c     ****         return 0.0;
 546               		.stabn 68,0,155,.LM34-nmeap_altitude
 547               	.LM34:
 548 0214 8081      		ld r24,Z
 549 0216 8823      		tst r24
 550 0218 29F4      		brne .L34
 156:nmeap01.c     ****     }
 551               		.stabn 68,0,156,.LM35-nmeap_altitude
 552               	.LM35:
 553 021a 60E0      		ldi r22,lo8(0x0)
 554 021c 70E0      		ldi r23,hi8(0x0)
 555 021e 80E0      		ldi r24,hlo8(0x0)
 556 0220 90E0      		ldi r25,hhi8(0x0)
 557 0222 0EC0      		rjmp .L33
 558               	.L34:
 157:nmeap01.c     ****     
 158:nmeap01.c     ****     /* convert with no error checking */
 159:nmeap01.c     ****     alt = atof(palt);
 160:nmeap01.c     ****     
 559               		.stabn 68,0,160,.LM36-nmeap_altitude
 560               	.LM36:
 561 0224 CF01      		movw r24,r30
 562 0226 0E94 0000 		call atof
 161:nmeap01.c     ****     if (*punits == 'M') {
 162:nmeap01.c     ****         /* already in meters */ 
 563               		.stabn 68,0,162,.LM37-nmeap_altitude
 564               	.LM37:
 565 022a 2881      		ld r18,Y
 566 022c 2D34      		cpi r18,lo8(77)
 567 022e 41F0      		breq .L33
 163:nmeap01.c     ****     }
 164:nmeap01.c     ****     else if (*punits == 'F') {
 165:nmeap01.c     ****         /* convert to feet */
 568               		.stabn 68,0,165,.LM38-nmeap_altitude
 569               	.LM38:
 570 0230 2634      		cpi r18,lo8(70)
 571 0232 31F4      		brne .L33
 166:nmeap01.c     ****         alt = alt * 3.2808399;
 167:nmeap01.c     ****     }
 572               		.stabn 68,0,167,.LM39-nmeap_altitude
 573               	.LM39:
 574 0234 28E4      		ldi r18,lo8(0x4051f948)
 575 0236 39EF      		ldi r19,hi8(0x4051f948)
 576 0238 41E5      		ldi r20,hlo8(0x4051f948)
 577 023a 50E4      		ldi r21,hhi8(0x4051f948)
 578 023c 0E94 0000 		call __mulsf3
 579               	.L33:
 580               	/* epilogue: frame size=0 */
GAS LISTING /var/tmp//cc112P7K.s 			page 16


 581 0240 DF91      		pop r29
 582 0242 CF91      		pop r28
 583 0244 0895      		ret
 584               	/* epilogue end (size=3) */
 585               	/* function nmeap_altitude size 29 (24) */
 586               		.size	nmeap_altitude, .-nmeap_altitude
 587               		.stabs	"alt:r(0,13)",64,0,153,22
 588               		.stabn	192,0,0,nmeap_altitude-nmeap_altitude
 589               		.stabn	224,0,0,.Lscope2-nmeap_altitude
 590               	.Lscope2:
 591               		.stabs	"",36,0,0,.Lscope2-nmeap_altitude
 592               		.stabs	"nmeap_init:F(0,1)",36,0,177,nmeap_init
 593               		.stabs	"context:P(0,24)=*(13,11)",64,0,176,30
 594               		.stabs	"user_data:P(13,4)",64,0,176,22
 595               	.global	nmeap_init
 596               		.type	nmeap_init, @function
 597               	nmeap_init:
 168:nmeap01.c     ****     
 169:nmeap01.c     ****     return alt;
 170:nmeap01.c     **** }
 171:nmeap01.c     **** 
 172:nmeap01.c     **** /**
 173:nmeap01.c     ****  * initialize an NMEA parser
 174:nmeap01.c     ****  */
 175:nmeap01.c     **** int nmeap_init(nmeap_context_t *context,void *user_data)
 176:nmeap01.c     **** {
 177:nmeap01.c     ****     assert(context != 0);
 598               		.stabn 68,0,177,.LM40-nmeap_init
 599               	.LM40:
 600               	/* prologue: frame size=0 */
 601               	/* prologue end (size=0) */
 602 0246 FC01      		movw r30,r24
 178:nmeap01.c     **** 
 603               		.stabn 68,0,178,.LM41-nmeap_init
 604               	.LM41:
 605 0248 892B      		or r24,r25
 606 024a 09F4      		brne .L40
 607               	.L41:
 608               	.LBB10:
 609               	.LBB11:
 610               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext10
 611               	.Ltext10:
 612               		.stabn 68,0,108,.LM42-nmeap_init
 613               	.LM42:
 614 024c FFCF      		rjmp .L41
 615               	.L40:
 616               	.LBE11:
 617               	.LBE10:
 618               		.stabs	"nmeap01.c",132,0,0,.Ltext11
 619               	.Ltext11:
 179:nmeap01.c     ****     memset(context,0,sizeof(*context));
 180:nmeap01.c     **** 
 620               		.stabn 68,0,180,.LM43-nmeap_init
 621               	.LM43:
 622 024e 8EEC      		ldi r24,lo8(718)
 623 0250 92E0      		ldi r25,hi8(718)
 624 0252 DF01      		movw r26,r30
GAS LISTING /var/tmp//cc112P7K.s 			page 17


 625 0254 1D92      		st X+,__zero_reg__
 626 0256 0197      		sbiw r24,1
 627 0258 E9F7      		brne .-6
 181:nmeap01.c     ****     context->user_data = user_data;
 182:nmeap01.c     **** 
 628               		.stabn 68,0,182,.LM44-nmeap_init
 629               	.LM44:
 630 025a E453      		subi r30,lo8(-(716))
 631 025c FD4F      		sbci r31,hi8(-(716))
 632 025e 7183      		std Z+1,r23
 633 0260 6083      		st Z,r22
 183:nmeap01.c     ****     return 0;    
 184:nmeap01.c     **** }
 185:nmeap01.c     **** 
 634               		.stabn 68,0,185,.LM45-nmeap_init
 635               	.LM45:
 636 0262 80E0      		ldi r24,lo8(0)
 637 0264 90E0      		ldi r25,hi8(0)
 638               	/* epilogue: frame size=0 */
 639 0266 0895      		ret
 640               	/* epilogue end (size=1) */
 641               	/* function nmeap_init size 17 (16) */
 642               		.size	nmeap_init, .-nmeap_init
 643               	.Lscope3:
 644               		.stabs	"",36,0,0,.Lscope3-nmeap_init
 645               		.stabs	"nmeap_addParser:F(0,1)",36,0,197,nmeap_addParser
 646               		.stabs	"context:P(0,24)",64,0,191,30
 647               		.stabs	"sentence_name:P(0,22)",64,0,192,22
 648               		.stabs	"sentence_parser:P(12,4)",64,0,193,28
 649               		.stabs	"sentence_callout:P(12,1)",64,0,194,14
 650               		.stabs	"sentence_data:P(13,4)",64,0,196,12
 651               	.global	nmeap_addParser
 652               		.type	nmeap_addParser, @function
 653               	nmeap_addParser:
 186:nmeap01.c     ****  
 187:nmeap01.c     **** /**
 188:nmeap01.c     ****  * register an NMEA sentence parser
 189:nmeap01.c     ****  */
 190:nmeap01.c     **** int nmeap_addParser(nmeap_context_t         *context,
 191:nmeap01.c     **** 					 const char             *sentence_name,
 192:nmeap01.c     **** 					 nmeap_sentence_parser_t sentence_parser,
 193:nmeap01.c     **** 					 nmeap_callout_t         sentence_callout,
 194:nmeap01.c     ****                      void                  *sentence_data
 195:nmeap01.c     **** 					 )
 196:nmeap01.c     **** {
 197:nmeap01.c     ****     nmeap_sentence_t *s = 0;
 654               		.stabn 68,0,197,.LM46-nmeap_addParser
 655               	.LM46:
 656               	/* prologue: frame size=0 */
 657 0268 CF92      		push r12
 658 026a DF92      		push r13
 659 026c EF92      		push r14
 660 026e FF92      		push r15
 661 0270 0F93      		push r16
 662 0272 1F93      		push r17
 663 0274 CF93      		push r28
 664 0276 DF93      		push r29
GAS LISTING /var/tmp//cc112P7K.s 			page 18


 665               	/* prologue end (size=8) */
 666 0278 FC01      		movw r30,r24
 667 027a EA01      		movw r28,r20
 668 027c 7901      		movw r14,r18
 669 027e 6801      		movw r12,r16
 198:nmeap01.c     ****     
 199:nmeap01.c     ****     /* runtime error */
 200:nmeap01.c     ****     assert(context != 0);
 201:nmeap01.c     ****     
 670               		.stabn 68,0,201,.LM47-nmeap_addParser
 671               	.LM47:
 672 0280 0097      		sbiw r24,0
 673 0282 09F4      		brne .L46
 674               	.L47:
 675               	.LBB12:
 676               	.LBB13:
 677               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext12
 678               	.Ltext12:
 679               		.stabn 68,0,108,.LM48-nmeap_addParser
 680               	.LM48:
 681 0284 FFCF      		rjmp .L47
 682               	.L46:
 683               	.LBE13:
 684               	.LBE12:
 685               		.stabs	"nmeap01.c",132,0,0,.Ltext13
 686               	.Ltext13:
 202:nmeap01.c     ****     /* sentence capacity overflow */
 203:nmeap01.c     ****     if (context->sentence_count >= NMEAP_MAX_SENTENCES) {
 204:nmeap01.c     ****         return -1;
 687               		.stabn 68,0,204,.LM49-nmeap_addParser
 688               	.LM49:
 689 0286 DC01      		movw r26,r24
 690 0288 A059      		subi r26,lo8(-(112))
 691 028a BF4F      		sbci r27,hi8(-(112))
 692 028c 2D91      		ld r18,X+
 693 028e 3C91      		ld r19,X
 694 0290 1197      		sbiw r26,1
 695 0292 2830      		cpi r18,8
 696 0294 3105      		cpc r19,__zero_reg__
 697 0296 1CF0      		brlt .L50
 205:nmeap01.c     ****     }
 698               		.stabn 68,0,205,.LM50-nmeap_addParser
 699               	.LM50:
 700 0298 8FEF      		ldi r24,lo8(-1)
 701 029a 9FEF      		ldi r25,hi8(-1)
 702 029c 22C0      		rjmp .L44
 703               	.L50:
 206:nmeap01.c     ****     
 207:nmeap01.c     ****     /* point at next empty sentence buffer */
 208:nmeap01.c     ****     s = &context->sentence[context->sentence_count];
 209:nmeap01.c     ****     
 704               		.stabn 68,0,209,.LM51-nmeap_addParser
 705               	.LM51:
 706 029e 8EE0      		ldi r24,lo8(14)
 707 02a0 90E0      		ldi r25,hi8(14)
 708 02a2 289F      		mul r18,r24
 709 02a4 8001      		movw r16,r0
GAS LISTING /var/tmp//cc112P7K.s 			page 19


 710 02a6 299F      		mul r18,r25
 711 02a8 100D      		add r17,r0
 712 02aa 389F      		mul r19,r24
 713 02ac 100D      		add r17,r0
 714 02ae 1124      		clr r1
 715 02b0 0E0F      		add r16,r30
 716 02b2 1F1F      		adc r17,r31
 210:nmeap01.c     ****     /* advance sentence data count */
 211:nmeap01.c     ****     context->sentence_count++;
 212:nmeap01.c     ****     
 717               		.stabn 68,0,212,.LM52-nmeap_addParser
 718               	.LM52:
 719 02b4 2F5F      		subi r18,lo8(-(1))
 720 02b6 3F4F      		sbci r19,hi8(-(1))
 721 02b8 2D93      		st X+,r18
 722 02ba 3C93      		st X,r19
 213:nmeap01.c     ****     /* clear the sentence data */
 214:nmeap01.c     ****     memset(s,0,sizeof(*s));
 215:nmeap01.c     ****     
 723               		.stabn 68,0,215,.LM53-nmeap_addParser
 724               	.LM53:
 725 02bc 8EE0      		ldi r24,lo8(14)
 726 02be F801      		movw r30,r16
 727 02c0 1192      		st Z+,__zero_reg__
 728 02c2 8A95      	        dec r24
 729 02c4 E9F7      		brne .-6
 216:nmeap01.c     ****     /* name */
 217:nmeap01.c     ****     strncpy(s->name,sentence_name,NMEAP_MAX_SENTENCE_NAME_LENGTH);
 218:nmeap01.c     ****     
 730               		.stabn 68,0,218,.LM54-nmeap_addParser
 731               	.LM54:
 732 02c6 45E0      		ldi r20,lo8(5)
 733 02c8 50E0      		ldi r21,hi8(5)
 734 02ca C801      		movw r24,r16
 735 02cc 0E94 0000 		call strncpy
 219:nmeap01.c     ****     /* parser */
 220:nmeap01.c     ****     s->parser = sentence_parser;
 221:nmeap01.c     ****     
 736               		.stabn 68,0,221,.LM55-nmeap_addParser
 737               	.LM55:
 738 02d0 F801      		movw r30,r16
 739 02d2 D187      		std Z+9,r29
 740 02d4 C087      		std Z+8,r28
 222:nmeap01.c     ****     /* callout */
 223:nmeap01.c     ****     s->callout = sentence_callout;
 224:nmeap01.c     ****     
 741               		.stabn 68,0,224,.LM56-nmeap_addParser
 742               	.LM56:
 743 02d6 F386      		std Z+11,r15
 744 02d8 E286      		std Z+10,r14
 225:nmeap01.c     ****     /* data */
 226:nmeap01.c     ****     s->data    = sentence_data;
 227:nmeap01.c     **** 
 745               		.stabn 68,0,227,.LM57-nmeap_addParser
 746               	.LM57:
 747 02da D586      		std Z+13,r13
 748 02dc C486      		std Z+12,r12
GAS LISTING /var/tmp//cc112P7K.s 			page 20


 228:nmeap01.c     ****     return 0;
 229:nmeap01.c     **** }
 749               		.stabn 68,0,229,.LM58-nmeap_addParser
 750               	.LM58:
 751 02de 80E0      		ldi r24,lo8(0)
 752 02e0 90E0      		ldi r25,hi8(0)
 753               	.L44:
 754               	/* epilogue: frame size=0 */
 755 02e2 DF91      		pop r29
 756 02e4 CF91      		pop r28
 757 02e6 1F91      		pop r17
 758 02e8 0F91      		pop r16
 759 02ea FF90      		pop r15
 760 02ec EF90      		pop r14
 761 02ee DF90      		pop r13
 762 02f0 CF90      		pop r12
 763 02f2 0895      		ret
 764               	/* epilogue end (size=9) */
 765               	/* function nmeap_addParser size 70 (53) */
 766               		.size	nmeap_addParser, .-nmeap_addParser
 767               		.stabs	"s:r(0,25)=*(13,5)",64,0,198,16
 768               		.stabn	192,0,0,nmeap_addParser-nmeap_addParser
 769               		.stabn	224,0,0,.Lscope4-nmeap_addParser
 770               	.Lscope4:
 771               		.stabs	"",36,0,0,.Lscope4-nmeap_addParser
 772               		.stabs	"nmeap_tokenize:F(0,1)",36,0,236,nmeap_tokenize
 773               		.stabs	"context:P(0,24)",64,0,235,30
 774               	.global	nmeap_tokenize
 775               		.type	nmeap_tokenize, @function
 776               	nmeap_tokenize:
 230:nmeap01.c     **** 
 231:nmeap01.c     **** /** 
 232:nmeap01.c     ****  * tokenize a buffer
 233:nmeap01.c     ****  */
 234:nmeap01.c     **** int nmeap_tokenize(nmeap_context_t *context)
 235:nmeap01.c     **** {
 236:nmeap01.c     ****     char *s;
 777               		.stabn 68,0,236,.LM59-nmeap_tokenize
 778               	.LM59:
 779               	/* prologue: frame size=0 */
 780               	/* prologue end (size=0) */
 781 02f4 FC01      		movw r30,r24
 237:nmeap01.c     ****     int   tokens;
 238:nmeap01.c     ****     int   state;
 239:nmeap01.c     ****     
 240:nmeap01.c     ****     /* first token is header. assume it is there */
 241:nmeap01.c     ****     tokens = 0;
 242:nmeap01.c     ****     s = context->input;
 243:nmeap01.c     ****     context->token[tokens] = s;
 782               		.stabn 68,0,243,.LM60-nmeap_tokenize
 783               	.LM60:
 784 02f6 DC01      		movw r26,r24
 785 02f8 AE58      		subi r26,lo8(-(114))
 786 02fa BF4F      		sbci r27,hi8(-(114))
 244:nmeap01.c     ****     
 787               		.stabn 68,0,244,.LM61-nmeap_tokenize
 788               	.LM61:
GAS LISTING /var/tmp//cc112P7K.s 			page 21


 789 02fc E258      		subi r30,lo8(-(382))
 790 02fe FE4F      		sbci r31,hi8(-(382))
 791 0300 B183      		std Z+1,r27
 792 0302 A083      		st Z,r26
 793 0304 EE57      		subi r30,lo8(-(-382))
 794 0306 F140      		sbci r31,hi8(-(-382))
 245:nmeap01.c     ****     /* get rest of tokens */
 246:nmeap01.c     ****     tokens = 1;
 247:nmeap01.c     ****     state = 0;
 795               		.stabn 68,0,247,.LM62-nmeap_tokenize
 796               	.LM62:
 797 0308 41E0      		ldi r20,lo8(1)
 798 030a 50E0      		ldi r21,hi8(1)
 248:nmeap01.c     ****     while((*s != 0)&&(tokens < NMEAP_MAX_TOKENS)) {
 799               		.stabn 68,0,248,.LM63-nmeap_tokenize
 800               	.LM63:
 801 030c 20E0      		ldi r18,lo8(0)
 802 030e 30E0      		ldi r19,hi8(0)
 249:nmeap01.c     ****         switch(state) {
 250:nmeap01.c     ****         case 0:
 251:nmeap01.c     ****             /* looking for end of a token */
 252:nmeap01.c     ****             if (*s == ',') {
 253:nmeap01.c     ****                 /* delimit at the comma */
 254:nmeap01.c     ****                 *s    = 0;
 255:nmeap01.c     ****                 /* new token */
 256:nmeap01.c     ****                 state = 1;
 257:nmeap01.c     ****             }
 258:nmeap01.c     ****             break;
 259:nmeap01.c     ****         case 1:
 260:nmeap01.c     ****             /* start of next token, might be another comma */
 261:nmeap01.c     ****             context->token[tokens++] = s;
 262:nmeap01.c     ****             if (*s == ',') {
 263:nmeap01.c     ****                 /* delimit at the comma */
 264:nmeap01.c     ****                 *s    = 0;
 265:nmeap01.c     ****             }
 266:nmeap01.c     ****             else {   
 267:nmeap01.c     ****                 /* not a comma */
 268:nmeap01.c     ****                 state = 0;
 269:nmeap01.c     ****             }
 270:nmeap01.c     ****             break;
 271:nmeap01.c     ****         default:
 272:nmeap01.c     ****             state = 0;
 273:nmeap01.c     ****             break;
 274:nmeap01.c     ****         }
 275:nmeap01.c     ****         
 276:nmeap01.c     ****         // next character
 277:nmeap01.c     ****         s++;
 278:nmeap01.c     ****     }
 803               		.stabn 68,0,278,.LM64-nmeap_tokenize
 804               	.LM64:
 805 0310 8C91      		ld r24,X
 806 0312 8823      		tst r24
 807 0314 11F1      		breq .L53
 808 0316 E058      		subi r30,lo8(-(384))
 809 0318 FE4F      		sbci r31,hi8(-(384))
 810               	.L61:
 811               		.stabn 68,0,250,.LM65-nmeap_tokenize
GAS LISTING /var/tmp//cc112P7K.s 			page 22


 812               	.LM65:
 813 031a 2115      		cp r18,__zero_reg__
 814 031c 3105      		cpc r19,__zero_reg__
 815 031e 21F0      		breq .L55
 816 0320 2130      		cpi r18,1
 817 0322 3105      		cpc r19,__zero_reg__
 818 0324 41F0      		breq .L57
 819 0326 10C0      		rjmp .L60
 820               	.L55:
 821               		.stabn 68,0,253,.LM66-nmeap_tokenize
 822               	.LM66:
 823 0328 8C91      		ld r24,X
 824 032a 8C32      		cpi r24,lo8(44)
 825 032c 79F4      		brne .L54
 826               		.stabn 68,0,255,.LM67-nmeap_tokenize
 827               	.LM67:
 828 032e 1C92      		st X,__zero_reg__
 829               		.stabn 68,0,257,.LM68-nmeap_tokenize
 830               	.LM68:
 831 0330 21E0      		ldi r18,lo8(1)
 832 0332 30E0      		ldi r19,hi8(1)
 833               		.stabn 68,0,259,.LM69-nmeap_tokenize
 834               	.LM69:
 835 0334 0BC0      		rjmp .L54
 836               	.L57:
 837               		.stabn 68,0,262,.LM70-nmeap_tokenize
 838               	.LM70:
 839 0336 A193      		st Z+,r26
 840 0338 B193      		st Z+,r27
 841 033a 4F5F      		subi r20,lo8(-(1))
 842 033c 5F4F      		sbci r21,hi8(-(1))
 843               		.stabn 68,0,263,.LM71-nmeap_tokenize
 844               	.LM71:
 845 033e 8C91      		ld r24,X
 846 0340 8C32      		cpi r24,lo8(44)
 847 0342 11F4      		brne .L60
 848               		.stabn 68,0,265,.LM72-nmeap_tokenize
 849               	.LM72:
 850 0344 1C92      		st X,__zero_reg__
 851 0346 02C0      		rjmp .L54
 852               	.L60:
 853               		.stabn 68,0,273,.LM73-nmeap_tokenize
 854               	.LM73:
 855 0348 20E0      		ldi r18,lo8(0)
 856 034a 30E0      		ldi r19,hi8(0)
 857               	.L54:
 858               		.stabn 68,0,278,.LM74-nmeap_tokenize
 859               	.LM74:
 860 034c 1196      		adiw r26,1
 861 034e 8C91      		ld r24,X
 862 0350 8823      		tst r24
 863 0352 19F0      		breq .L53
 864 0354 4831      		cpi r20,24
 865 0356 5105      		cpc r21,__zero_reg__
 866 0358 04F3      		brlt .L61
 867               	.L53:
 279:nmeap01.c     ****     return tokens;
GAS LISTING /var/tmp//cc112P7K.s 			page 23


 280:nmeap01.c     **** }
 281:nmeap01.c     **** 
 868               		.stabn 68,0,281,.LM75-nmeap_tokenize
 869               	.LM75:
 870 035a CA01      		movw r24,r20
 871               	/* epilogue: frame size=0 */
 872 035c 0895      		ret
 873               	/* epilogue end (size=1) */
 874               	/* function nmeap_tokenize size 53 (52) */
 875               		.size	nmeap_tokenize, .-nmeap_tokenize
 876               		.stabs	"s:r(13,10)",64,0,237,26
 877               		.stabs	"tokens:r(0,1)",64,0,238,20
 878               		.stabs	"state:r(0,1)",64,0,239,18
 879               		.stabn	192,0,0,nmeap_tokenize-nmeap_tokenize
 880               		.stabn	224,0,0,.Lscope5-nmeap_tokenize
 881               	.Lscope5:
 882               		.stabs	"",36,0,0,.Lscope5-nmeap_tokenize
 883               		.stabs	"nmeap_process:F(0,1)",36,0,287,nmeap_process
 884               		.stabs	"context:P(0,24)",64,0,286,28
 885               	.global	nmeap_process
 886               		.type	nmeap_process, @function
 887               	nmeap_process:
 282:nmeap01.c     **** /**
 283:nmeap01.c     ****  * process a sentence 
 284:nmeap01.c     ****  */
 285:nmeap01.c     **** int nmeap_process(nmeap_context_t *context)
 286:nmeap01.c     **** {
 287:nmeap01.c     ****     int id = 0;
 888               		.stabn 68,0,287,.LM76-nmeap_process
 889               	.LM76:
 890               	/* prologue: frame size=0 */
 891 035e AF92      		push r10
 892 0360 BF92      		push r11
 893 0362 CF92      		push r12
 894 0364 DF92      		push r13
 895 0366 EF92      		push r14
 896 0368 FF92      		push r15
 897 036a 0F93      		push r16
 898 036c 1F93      		push r17
 899 036e CF93      		push r28
 900 0370 DF93      		push r29
 901               	/* prologue end (size=10) */
 902 0372 EC01      		movw r28,r24
 288:nmeap01.c     ****     int i;
 903               		.stabn 68,0,288,.LM77-nmeap_process
 904               	.LM77:
 905 0374 EE24      		clr r14
 906 0376 FF24      		clr r15
 289:nmeap01.c     ****     nmeap_sentence_t *s;
 290:nmeap01.c     **** 	
 291:nmeap01.c     ****     /* copy the input to a debug buffer */
 292:nmeap01.c     ****     /* remove debug_input when everything is working. */
 293:nmeap01.c     ****     strncpy(context->debug_input,context->input,sizeof(context->debug_input));
 294:nmeap01.c     ****     
 907               		.stabn 68,0,294,.LM78-nmeap_process
 908               	.LM78:
 909 0378 8E58      		subi r24,lo8(-(114))
GAS LISTING /var/tmp//cc112P7K.s 			page 24


 910 037a 9F4F      		sbci r25,hi8(-(114))
 911 037c 40E0      		ldi r20,lo8(256)
 912 037e 51E0      		ldi r21,hi8(256)
 913 0380 BC01      		movw r22,r24
 914 0382 CE01      		movw r24,r28
 915 0384 8453      		subi r24,lo8(-(460))
 916 0386 9E4F      		sbci r25,hi8(-(460))
 917 0388 0E94 0000 		call strncpy
 295:nmeap01.c     ****     /* tokenize the input */
 296:nmeap01.c     ****     context->tokens = nmeap_tokenize(context);
 297:nmeap01.c     ****     
 918               		.stabn 68,0,297,.LM79-nmeap_process
 919               	.LM79:
 920 038c CE01      		movw r24,r28
 921 038e 0E94 0000 		call nmeap_tokenize
 922 0392 C255      		subi r28,lo8(-(430))
 923 0394 DE4F      		sbci r29,hi8(-(430))
 924 0396 9983      		std Y+1,r25
 925 0398 8883      		st Y,r24
 926 039a CE5A      		subi r28,lo8(-(-430))
 927 039c D140      		sbci r29,hi8(-(-430))
 298:nmeap01.c     ****     /* try to find a matching sentence parser */
 299:nmeap01.c     ****     /* this search is O(n). it has a lot of potential for optimization, at the expense of complexit
 300:nmeap01.c     ****     /* binary search instead of linear (have to keep sentences in sorted order) O(NlogN) */
 301:nmeap01.c     ****     /* OR, when sentences are added, create a TRIE structure to find the names with a constant time
 302:nmeap01.c     ****     for(i=0;i<context->sentence_count;i++) {
 303:nmeap01.c     ****         s = &context->sentence[i];
 928               		.stabn 68,0,303,.LM80-nmeap_process
 929               	.LM80:
 930 039e 6701      		movw r12,r14
 931 03a0 80E7      		ldi r24,lo8(112)
 932 03a2 A82E      		mov r10,r24
 933 03a4 B12C      		mov r11,__zero_reg__
 934 03a6 AC0E      		add r10,r28
 935 03a8 BD1E      		adc r11,r29
 936 03aa F501      		movw r30,r10
 937 03ac 8081      		ld r24,Z
 938 03ae 9181      		ldd r25,Z+1
 939 03b0 E816      		cp r14,r24
 940 03b2 F906      		cpc r15,r25
 941 03b4 2CF5      		brge .L65
 942 03b6 8E01      		movw r16,r28
 943               	.L74:
 304:nmeap01.c     ****         assert(s != 0);
 305:nmeap01.c     ****         if (strncmp(context->input_name,s->name,5) == 0) {
 944               		.stabn 68,0,305,.LM81-nmeap_process
 945               	.LM81:
 946 03b8 0115      		cp r16,__zero_reg__
 947 03ba 1105      		cpc r17,__zero_reg__
 948 03bc 09F4      		brne .L68
 949               	.L69:
 950               	.LBB14:
 951               	.LBB15:
 952               		.stabs	"/opt/local/lib/gcc/avr/3.4.4/../../../../avr/include/stdlib.h",132,0,0,.Ltext14
 953               	.Ltext14:
 954               		.stabn 68,0,108,.LM82-nmeap_process
 955               	.LM82:
GAS LISTING /var/tmp//cc112P7K.s 			page 25


 956 03be FFCF      		rjmp .L69
 957               	.L68:
 958               	.LBE15:
 959               	.LBE14:
 960               		.stabs	"nmeap01.c",132,0,0,.Ltext15
 961               	.Ltext15:
 306:nmeap01.c     ****             /* found a match, call its parser */
 962               		.stabn 68,0,306,.LM83-nmeap_process
 963               	.LM83:
 964 03c0 45E0      		ldi r20,lo8(5)
 965 03c2 50E0      		ldi r21,hi8(5)
 966 03c4 B801      		movw r22,r16
 967 03c6 CE01      		movw r24,r28
 968 03c8 8A58      		subi r24,lo8(-(374))
 969 03ca 9E4F      		sbci r25,hi8(-(374))
 970 03cc 0E94 0000 		call strncmp
 971 03d0 892B      		or r24,r25
 972 03d2 59F4      		brne .L66
 307:nmeap01.c     ****             id = (*context->sentence[i].parser)(context,s);
 308:nmeap01.c     ****             if (id > 0) {
 973               		.stabn 68,0,308,.LM84-nmeap_process
 974               	.LM84:
 975 03d4 F801      		movw r30,r16
 976 03d6 2085      		ldd r18,Z+8
 977 03d8 3185      		ldd r19,Z+9
 978 03da B801      		movw r22,r16
 979 03dc CE01      		movw r24,r28
 980 03de F901      		movw r30,r18
 981 03e0 0995      		icall
 982 03e2 7C01      		movw r14,r24
 309:nmeap01.c     ****                 break;
 983               		.stabn 68,0,309,.LM85-nmeap_process
 984               	.LM85:
 985 03e4 1816      		cp __zero_reg__,r24
 986 03e6 1906      		cpc __zero_reg__,r25
 987 03e8 5CF0      		brlt .L65
 988               	.L66:
 989               		.stabn 68,0,303,.LM86-nmeap_process
 990               	.LM86:
 991 03ea 0894      		sec
 992 03ec C11C      		adc r12,__zero_reg__
 993 03ee D11C      		adc r13,__zero_reg__
 994 03f0 025F      		subi r16,lo8(-(14))
 995 03f2 1F4F      		sbci r17,hi8(-(14))
 996 03f4 F501      		movw r30,r10
 997 03f6 8081      		ld r24,Z
 998 03f8 9181      		ldd r25,Z+1
 999 03fa C816      		cp r12,r24
 1000 03fc D906      		cpc r13,r25
 1001 03fe E4F2      		brlt .L74
 1002               	.L65:
 310:nmeap01.c     ****             }
 311:nmeap01.c     ****         }
 312:nmeap01.c     ****     }
 313:nmeap01.c     ****         
 314:nmeap01.c     ****     return id;
 315:nmeap01.c     **** }
GAS LISTING /var/tmp//cc112P7K.s 			page 26


 316:nmeap01.c     **** 
 1003               		.stabn 68,0,316,.LM87-nmeap_process
 1004               	.LM87:
 1005 0400 C701      		movw r24,r14
 1006               	/* epilogue: frame size=0 */
 1007 0402 DF91      		pop r29
 1008 0404 CF91      		pop r28
 1009 0406 1F91      		pop r17
 1010 0408 0F91      		pop r16
 1011 040a FF90      		pop r15
 1012 040c EF90      		pop r14
 1013 040e DF90      		pop r13
 1014 0410 CF90      		pop r12
 1015 0412 BF90      		pop r11
 1016 0414 AF90      		pop r10
 1017 0416 0895      		ret
 1018               	/* epilogue end (size=11) */
 1019               	/* function nmeap_process size 94 (73) */
 1020               		.size	nmeap_process, .-nmeap_process
 1021               		.stabs	"id:r(0,1)",64,0,288,14
 1022               		.stabs	"i:r(0,1)",64,0,289,12
 1023               		.stabn	192,0,0,nmeap_process-nmeap_process
 1024               		.stabn	224,0,0,.Lscope6-nmeap_process
 1025               	.Lscope6:
 1026               		.stabs	"",36,0,0,.Lscope6-nmeap_process
 1027               		.stabs	"nmeap_parse:F(0,1)",36,0,342,nmeap_parse
 1028               		.stabs	"context:P(0,24)",64,0,341,28
 1029               		.stabs	"ch:P(0,2)",64,0,341,13
 1030               	.global	nmeap_parse
 1031               		.type	nmeap_parse, @function
 1032               	nmeap_parse:
 317:nmeap01.c     **** /**
 318:nmeap01.c     ****                  +-5-+              +---+
 319:nmeap01.c     ****                  v   |              v   |
 320:nmeap01.c     ****  +------+       +------+           +------+         +------+         +------+
 321:nmeap01.c     ****  |   0  |--$--> |1-hdr |--alnum--> |2-data|----\r-->| 6-LF |---\n--->| done |--> 0
 322:nmeap01.c     ****  +------+       +------+           +------+         +------+         +------+
 323:nmeap01.c     ****                                     |                 ^
 324:nmeap01.c     ****                                     *                 +--------\r-------+
 325:nmeap01.c     ****                                     V                                   |
 326:nmeap01.c     ****                                  +------+           +------+         +------+
 327:nmeap01.c     ****                                  |3-cks |--xdigit-->|4-cks |-xdigit->| 5-CR |
 328:nmeap01.c     ****                                  +------+           +------+         +------+
 329:nmeap01.c     ****                                  
 330:nmeap01.c     **** return to start conditions:
 331:nmeap01.c     **** 1. buffer overflow
 332:nmeap01.c     **** 2. invalid character for state
 333:nmeap01.c     **** 
 334:nmeap01.c     **** checksum calculation
 335:nmeap01.c     **** two hex digits represent the XOR of all characters between, but not
 336:nmeap01.c     **** including, the "$" and "*".  A checksum is required on some
 337:nmeap01.c     **** sentences.
 338:nmeap01.c     **** 
 339:nmeap01.c     **** */
 340:nmeap01.c     **** int nmeap_parse(nmeap_context_t *context,char ch)
 341:nmeap01.c     **** {
 342:nmeap01.c     ****     int status = 0;
GAS LISTING /var/tmp//cc112P7K.s 			page 27


 1033               		.stabn 68,0,342,.LM88-nmeap_parse
 1034               	.LM88:
 1035               	/* prologue: frame size=0 */
 1036 0418 8F92      		push r8
 1037 041a 9F92      		push r9
 1038 041c AF92      		push r10
 1039 041e BF92      		push r11
 1040 0420 DF92      		push r13
 1041 0422 EF92      		push r14
 1042 0424 FF92      		push r15
 1043 0426 0F93      		push r16
 1044 0428 1F93      		push r17
 1045 042a CF93      		push r28
 1046 042c DF93      		push r29
 1047               	/* prologue end (size=11) */
 1048 042e EC01      		movw r28,r24
 1049 0430 D62E      		mov r13,r22
 343:nmeap01.c     ****     
 1050               		.stabn 68,0,343,.LM89-nmeap_parse
 1051               	.LM89:
 1052 0432 8824      		clr r8
 1053 0434 9924      		clr r9
 344:nmeap01.c     ****     /* check for input buffer overrun first to avoid duplicating code in the
 345:nmeap01.c     ****     individual states
 346:nmeap01.c     ****     */
 347:nmeap01.c     ****     if (context->input_count >= (sizeof(context->input)-1)) {
 348:nmeap01.c     ****         /* input buffer overrun, restart state machine */
 1054               		.stabn 68,0,348,.LM90-nmeap_parse
 1055               	.LM90:
 1056 0436 22E7      		ldi r18,lo8(370)
 1057 0438 A22E      		mov r10,r18
 1058 043a 21E0      		ldi r18,hi8(370)
 1059 043c B22E      		mov r11,r18
 1060 043e A80E      		add r10,r24
 1061 0440 B91E      		adc r11,r25
 1062 0442 F501      		movw r30,r10
 1063 0444 8081      		ld r24,Z
 1064 0446 9181      		ldd r25,Z+1
 1065 0448 8F3F      		cpi r24,255
 1066 044a 9105      		cpc r25,__zero_reg__
 1067 044c 40F0      		brlo .L77
 349:nmeap01.c     ****         context->input_state = 0;
 350:nmeap01.c     ****         /* reset input count */
 1068               		.stabn 68,0,350,.LM91-nmeap_parse
 1069               	.LM91:
 1070 044e CC58      		subi r28,lo8(-(372))
 1071 0450 DE4F      		sbci r29,hi8(-(372))
 1072 0452 9982      		std Y+1,r9
 1073 0454 8882      		st Y,r8
 1074 0456 C457      		subi r28,lo8(-(-372))
 1075 0458 D140      		sbci r29,hi8(-(-372))
 351:nmeap01.c     ****         context->input_count = 0;
 352:nmeap01.c     ****     }
 1076               		.stabn 68,0,352,.LM92-nmeap_parse
 1077               	.LM92:
 1078 045a 9182      		std Z+1,r9
 1079 045c 8082      		st Z,r8
GAS LISTING /var/tmp//cc112P7K.s 			page 28


 1080               	.L77:
 353:nmeap01.c     ****     
 354:nmeap01.c     ****     /* store the byte */
 355:nmeap01.c     ****     context->input[context->input_count] = ch;
 356:nmeap01.c     ****     
 1081               		.stabn 68,0,356,.LM93-nmeap_parse
 1082               	.LM93:
 1083 045e F501      		movw r30,r10
 1084 0460 8081      		ld r24,Z
 1085 0462 9181      		ldd r25,Z+1
 1086 0464 FC01      		movw r30,r24
 1087 0466 EC0F      		add r30,r28
 1088 0468 FD1F      		adc r31,r29
 1089 046a EE58      		subi r30,lo8(-(114))
 1090 046c FF4F      		sbci r31,hi8(-(114))
 1091 046e D082      		st Z,r13
 357:nmeap01.c     ****     /* next buffer position */
 358:nmeap01.c     ****     context->input_count++;
 359:nmeap01.c     ****     
 1092               		.stabn 68,0,359,.LM94-nmeap_parse
 1093               	.LM94:
 1094 0470 8C01      		movw r16,r24
 1095 0472 0F5F      		subi r16,lo8(-(1))
 1096 0474 1F4F      		sbci r17,hi8(-(1))
 1097 0476 F501      		movw r30,r10
 1098 0478 1183      		std Z+1,r17
 1099 047a 0083      		st Z,r16
 360:nmeap01.c     ****     /* run it through the lexical scanner */
 361:nmeap01.c     ****     switch(context->input_state) {
 362:nmeap01.c     ****     /* LOOKING FOR $ */
 1100               		.stabn 68,0,362,.LM95-nmeap_parse
 1101               	.LM95:
 1102 047c 94E7      		ldi r25,lo8(372)
 1103 047e E92E      		mov r14,r25
 1104 0480 91E0      		ldi r25,hi8(372)
 1105 0482 F92E      		mov r15,r25
 1106 0484 EC0E      		add r14,r28
 1107 0486 FD1E      		adc r15,r29
 1108 0488 F701      		movw r30,r14
 1109 048a 8081      		ld r24,Z
 1110 048c 9181      		ldd r25,Z+1
 1111 048e 8330      		cpi r24,3
 1112 0490 9105      		cpc r25,__zero_reg__
 1113 0492 09F4      		brne .+2
 1114 0494 5EC0      		rjmp .L91
 1115 0496 8430      		cpi r24,4
 1116 0498 9105      		cpc r25,__zero_reg__
 1117 049a 54F4      		brge .L110
 1118 049c 8130      		cpi r24,1
 1119 049e 9105      		cpc r25,__zero_reg__
 1120 04a0 29F1      		breq .L82
 1121 04a2 8230      		cpi r24,2
 1122 04a4 9105      		cpc r25,__zero_reg__
 1123 04a6 0CF0      		brlt .+2
 1124 04a8 40C0      		rjmp .L86
 1125 04aa 892B      		or r24,r25
 1126 04ac 69F0      		breq .L79
GAS LISTING /var/tmp//cc112P7K.s 			page 29


 1127 04ae E2C0      		rjmp .L109
 1128               	.L110:
 1129 04b0 8530      		cpi r24,5
 1130 04b2 9105      		cpc r25,__zero_reg__
 1131 04b4 09F4      		brne .+2
 1132 04b6 91C0      		rjmp .L101
 1133 04b8 8530      		cpi r24,5
 1134 04ba 9105      		cpc r25,__zero_reg__
 1135 04bc 0CF4      		brge .+2
 1136 04be 6BC0      		rjmp .L96
 1137 04c0 0697      		sbiw r24,6
 1138 04c2 09F4      		brne .+2
 1139 04c4 93C0      		rjmp .L104
 1140 04c6 D6C0      		rjmp .L109
 1141               	.L79:
 363:nmeap01.c     ****     case 0:
 364:nmeap01.c     ****         if (ch == '$') {
 365:nmeap01.c     ****             /*look for id */
 1142               		.stabn 68,0,365,.LM96-nmeap_parse
 1143               	.LM96:
 1144 04c8 F4E2      		ldi r31,lo8(36)
 1145 04ca DF16      		cp r13,r31
 1146 04cc 59F4      		brne .L80
 366:nmeap01.c     ****             context->input_state = 1;
 367:nmeap01.c     ****             context->ccks        = 0;
 1147               		.stabn 68,0,367,.LM97-nmeap_parse
 1148               	.LM97:
 1149 04ce 81E0      		ldi r24,lo8(1)
 1150 04d0 90E0      		ldi r25,hi8(1)
 1151 04d2 F701      		movw r30,r14
 1152 04d4 9183      		std Z+1,r25
 1153 04d6 8083      		st Z,r24
 368:nmeap01.c     **** 			context->icks        = 0;
 1154               		.stabn 68,0,368,.LM98-nmeap_parse
 1155               	.LM98:
 1156 04d8 C358      		subi r28,lo8(-(381))
 1157 04da DE4F      		sbci r29,hi8(-(381))
 1158 04dc 1882      		st Y,__zero_reg__
 369:nmeap01.c     ****         }
 1159               		.stabn 68,0,369,.LM99-nmeap_parse
 1160               	.LM99:
 1161 04de FE01      		movw r30,r28
 1162 04e0 1292      		st -Z,__zero_reg__
 1163 04e2 D9C0      		rjmp .L78
 1164               	.L80:
 370:nmeap01.c     ****         else {
 371:nmeap01.c     ****             /* header error, start over */
 372:nmeap01.c     ****             context->err_hdr++;
 373:nmeap01.c     ****             context->input_state = 0;
 1165               		.stabn 68,0,373,.LM100-nmeap_parse
 1166               	.LM100:
 1167 04e4 FE01      		movw r30,r28
 1168 04e6 EC54      		subi r30,lo8(-(436))
 1169 04e8 FE4F      		sbci r31,hi8(-(436))
 1170 04ea B2C0      		rjmp .L116
 1171               	.L82:
 374:nmeap01.c     ****             context->input_count = 0;
GAS LISTING /var/tmp//cc112P7K.s 			page 30


 375:nmeap01.c     ****         }
 376:nmeap01.c     ****         break;
 377:nmeap01.c     ****     /* LOOKING FOR 5 CHARACTER SENTENCE ID */
 378:nmeap01.c     ****     case 1:
 379:nmeap01.c     ****         /* allow numbers even though it isn't usually done */
 380:nmeap01.c     ****         /* a proprietary id might have a numeral */
 381:nmeap01.c     ****         if (isalnum(ch)) {
 382:nmeap01.c     ****             /* store name separately */
 1172               		.stabn 68,0,382,.LM101-nmeap_parse
 1173               	.LM101:
 1174 04ec 8D2D      		mov r24,r13
 1175 04ee 9927      		clr r25
 1176 04f0 87FD      		sbrc r24,7
 1177 04f2 9095      		com r25
 1178 04f4 0E94 0000 		call isalnum
 1179 04f8 892B      		or r24,r25
 1180 04fa 99F0      		breq .L83
 383:nmeap01.c     ****             context->input_name[context->input_count - 2] = ch;
 384:nmeap01.c     ****             /* checksum */
 1181               		.stabn 68,0,384,.LM102-nmeap_parse
 1182               	.LM102:
 1183 04fc F801      		movw r30,r16
 1184 04fe EC0F      		add r30,r28
 1185 0500 FD1F      		adc r31,r29
 1186 0502 EC58      		subi r30,lo8(-(372))
 1187 0504 FE4F      		sbci r31,hi8(-(372))
 1188 0506 D082      		st Z,r13
 385:nmeap01.c     ****             context->ccks ^= ch;
 386:nmeap01.c     ****             /* end of header? */
 1189               		.stabn 68,0,386,.LM103-nmeap_parse
 1190               	.LM103:
 1191 0508 FE01      		movw r30,r28
 1192 050a E358      		subi r30,lo8(-(381))
 1193 050c FE4F      		sbci r31,hi8(-(381))
 1194 050e 8081      		ld r24,Z
 1195 0510 8D25      		eor r24,r13
 1196 0512 8083      		st Z,r24
 387:nmeap01.c     ****             if (context->input_count >= 6) {
 388:nmeap01.c     ****                 /* yes, get body */
 1197               		.stabn 68,0,388,.LM104-nmeap_parse
 1198               	.LM104:
 1199 0514 0630      		cpi r16,6
 1200 0516 1105      		cpc r17,__zero_reg__
 1201 0518 0CF4      		brge .+2
 1202 051a BDC0      		rjmp .L78
 389:nmeap01.c     ****                 context->input_state = 2;
 390:nmeap01.c     ****             }
 1203               		.stabn 68,0,390,.LM105-nmeap_parse
 1204               	.LM105:
 1205 051c 82E0      		ldi r24,lo8(2)
 1206 051e 90E0      		ldi r25,hi8(2)
 1207 0520 61C0      		rjmp .L115
 1208               	.L83:
 391:nmeap01.c     ****         }
 392:nmeap01.c     ****         else {
 393:nmeap01.c     ****             /* bad character, start over */
 394:nmeap01.c     ****             context->err_id++;
GAS LISTING /var/tmp//cc112P7K.s 			page 31


 395:nmeap01.c     ****             context->input_state = 0;
 1209               		.stabn 68,0,395,.LM106-nmeap_parse
 1210               	.LM106:
 1211 0522 FE01      		movw r30,r28
 1212 0524 E054      		subi r30,lo8(-(448))
 1213 0526 FE4F      		sbci r31,hi8(-(448))
 1214 0528 93C0      		rjmp .L116
 1215               	.L86:
 396:nmeap01.c     ****             context->input_count = 0;
 397:nmeap01.c     ****         }
 398:nmeap01.c     ****         break;
 399:nmeap01.c     ****     /* LOOKING FOR CR OR CHECKSUM INDICATOR */
 400:nmeap01.c     ****     case 2:
 401:nmeap01.c     ****         if (ch == '*') {
 402:nmeap01.c     ****             /* this sentence has a checksum */
 1216               		.stabn 68,0,402,.LM107-nmeap_parse
 1217               	.LM107:
 1218 052a FAE2      		ldi r31,lo8(42)
 1219 052c DF16      		cp r13,r31
 1220 052e 19F4      		brne .L87
 403:nmeap01.c     ****             context->input_state = 3;
 404:nmeap01.c     ****         }
 1221               		.stabn 68,0,404,.LM108-nmeap_parse
 1222               	.LM108:
 1223 0530 83E0      		ldi r24,lo8(3)
 1224 0532 90E0      		ldi r25,hi8(3)
 1225 0534 57C0      		rjmp .L115
 1226               	.L87:
 1227 0536 FE01      		movw r30,r28
 1228 0538 E358      		subi r30,lo8(-(381))
 1229 053a FE4F      		sbci r31,hi8(-(381))
 405:nmeap01.c     ****         else if (ch == '\r') {
 406:nmeap01.c     ****             /* carriage return, no checksum, force a match */
 1230               		.stabn 68,0,406,.LM109-nmeap_parse
 1231               	.LM109:
 1232 053c 2DE0      		ldi r18,lo8(13)
 1233 053e D216      		cp r13,r18
 1234 0540 29F4      		brne .L89
 407:nmeap01.c     **** 			context->icks = 0;
 408:nmeap01.c     **** 			context->ccks = 0;
 1235               		.stabn 68,0,408,.LM110-nmeap_parse
 1236               	.LM110:
 1237 0542 C458      		subi r28,lo8(-(380))
 1238 0544 DE4F      		sbci r29,hi8(-(380))
 1239 0546 1882      		st Y,__zero_reg__
 409:nmeap01.c     ****             context->input_state = 6;
 1240               		.stabn 68,0,409,.LM111-nmeap_parse
 1241               	.LM111:
 1242 0548 1082      		st Z,__zero_reg__
 1243 054a 4AC0      		rjmp .L114
 1244               	.L89:
 410:nmeap01.c     ****         }
 411:nmeap01.c     ****         else {
 412:nmeap01.c     ****             /* continue accumulating data */
 413:nmeap01.c     ****             /* checksum */
 414:nmeap01.c     ****             context->ccks ^= ch;
 415:nmeap01.c     ****         }
GAS LISTING /var/tmp//cc112P7K.s 			page 32


 1245               		.stabn 68,0,415,.LM112-nmeap_parse
 1246               	.LM112:
 1247 054c 8081      		ld r24,Z
 1248 054e 8D25      		eor r24,r13
 1249 0550 42C0      		rjmp .L99
 1250               	.L91:
 416:nmeap01.c     ****         break;
 417:nmeap01.c     ****     /* LOOKING FOR FIRST CHECKSUM CHARACTER */
 418:nmeap01.c     ****     case 3:
 419:nmeap01.c     ****         /* must be upper case hex digit */
 420:nmeap01.c     ****         if (isxdigit(ch) && (ch <= 'F')) {
 421:nmeap01.c     ****             /* got first checksum byte */
 1251               		.stabn 68,0,421,.LM113-nmeap_parse
 1252               	.LM113:
 1253 0552 0D2D      		mov r16,r13
 1254 0554 1127      		clr r17
 1255 0556 07FD      		sbrc r16,7
 1256 0558 1095      		com r17
 1257 055a C801      		movw r24,r16
 1258 055c 0E94 0000 		call isxdigit
 1259 0560 892B      		or r24,r25
 1260 0562 09F4      		brne .+2
 1261 0564 5FC0      		rjmp .L106
 1262 0566 F6E4      		ldi r31,lo8(70)
 1263 0568 FD15      		cp r31,r13
 1264 056a 0CF4      		brge .+2
 1265 056c 5BC0      		rjmp .L106
 422:nmeap01.c     ****             context->input_state = 4;
 423:nmeap01.c     ****             context->icks = HEXTOBIN(ch) << 4;
 1266               		.stabn 68,0,423,.LM114-nmeap_parse
 1267               	.LM114:
 1268 056e 84E0      		ldi r24,lo8(4)
 1269 0570 90E0      		ldi r25,hi8(4)
 1270 0572 F701      		movw r30,r14
 1271 0574 9183      		std Z+1,r25
 1272 0576 8083      		st Z,r24
 424:nmeap01.c     ****         }
 1273               		.stabn 68,0,424,.LM115-nmeap_parse
 1274               	.LM115:
 1275 0578 FE01      		movw r30,r28
 1276 057a E458      		subi r30,lo8(-(380))
 1277 057c FE4F      		sbci r31,hi8(-(380))
 1278 057e 29E3      		ldi r18,lo8(57)
 1279 0580 2D15      		cp r18,r13
 1280 0582 1CF0      		brlt .L93
 1281 0584 0053      		subi r16,lo8(-(-48))
 1282 0586 1040      		sbci r17,hi8(-(-48))
 1283 0588 02C0      		rjmp .L111
 1284               	.L93:
 1285 058a 0753      		subi r16,lo8(-(-55))
 1286 058c 1040      		sbci r17,hi8(-(-55))
 1287               	.L111:
 1288 058e 802F      		mov r24,r16
 1289 0590 8295      		swap r24
 1290 0592 807F      		andi r24,0xf0
 1291 0594 20C0      		rjmp .L99
 1292               	.L96:
GAS LISTING /var/tmp//cc112P7K.s 			page 33


 425:nmeap01.c     ****         else {
 426:nmeap01.c     ****             /* input error, restart */
 427:nmeap01.c     ****             context->err_cks++;
 428:nmeap01.c     ****             context->input_state = 0;
 429:nmeap01.c     ****             context->input_count = 0;
 430:nmeap01.c     ****         }
 431:nmeap01.c     ****         break;
 432:nmeap01.c     ****         /* LOOKING FOR SECOND CHECKSUM CHARACTER */
 433:nmeap01.c     ****     case 4:
 434:nmeap01.c     ****         /* must be upper case hex digit */
 435:nmeap01.c     ****         if (isxdigit(ch) && (ch <= 'F')) {
 436:nmeap01.c     ****             /* got second checksum byte */
 1293               		.stabn 68,0,436,.LM116-nmeap_parse
 1294               	.LM116:
 1295 0596 0D2D      		mov r16,r13
 1296 0598 1127      		clr r17
 1297 059a 07FD      		sbrc r16,7
 1298 059c 1095      		com r17
 1299 059e C801      		movw r24,r16
 1300 05a0 0E94 0000 		call isxdigit
 1301 05a4 892B      		or r24,r25
 1302 05a6 F1F1      		breq .L106
 1303 05a8 F6E4      		ldi r31,lo8(70)
 1304 05aa FD15      		cp r31,r13
 1305 05ac DCF1      		brlt .L106
 437:nmeap01.c     ****             context->input_state = 5;
 438:nmeap01.c     ****             context->icks += HEXTOBIN(ch);
 1306               		.stabn 68,0,438,.LM117-nmeap_parse
 1307               	.LM117:
 1308 05ae 85E0      		ldi r24,lo8(5)
 1309 05b0 90E0      		ldi r25,hi8(5)
 1310 05b2 F701      		movw r30,r14
 1311 05b4 9183      		std Z+1,r25
 1312 05b6 8083      		st Z,r24
 439:nmeap01.c     ****         }
 1313               		.stabn 68,0,439,.LM118-nmeap_parse
 1314               	.LM118:
 1315 05b8 FE01      		movw r30,r28
 1316 05ba E458      		subi r30,lo8(-(380))
 1317 05bc FE4F      		sbci r31,hi8(-(380))
 1318 05be 8081      		ld r24,Z
 1319 05c0 9927      		clr r25
 1320 05c2 87FD      		sbrc r24,7
 1321 05c4 9095      		com r25
 1322 05c6 800F      		add r24,r16
 1323 05c8 911F      		adc r25,r17
 1324 05ca 29E3      		ldi r18,lo8(57)
 1325 05cc 2D15      		cp r18,r13
 1326 05ce 14F0      		brlt .L98
 1327 05d0 8053      		subi r24,lo8(-(-48))
 1328 05d2 01C0      		rjmp .L99
 1329               	.L98:
 1330 05d4 8753      		subi r24,lo8(-(-55))
 1331               	.L99:
 1332 05d6 8083      		st Z,r24
 1333 05d8 5EC0      		rjmp .L78
 1334               	.L101:
GAS LISTING /var/tmp//cc112P7K.s 			page 34


 440:nmeap01.c     ****         else {
 441:nmeap01.c     ****             /* input error, restart */
 442:nmeap01.c     ****             context->err_cks++;
 443:nmeap01.c     ****             context->input_state = 0;
 444:nmeap01.c     ****             context->input_count = 0;
 445:nmeap01.c     ****         }
 446:nmeap01.c     ****         break;
 447:nmeap01.c     ****     /* LOOKING FOR CR */
 448:nmeap01.c     ****     case 5:
 449:nmeap01.c     ****         if (ch == '\r') {
 450:nmeap01.c     ****             /* carriage return */
 1335               		.stabn 68,0,450,.LM119-nmeap_parse
 1336               	.LM119:
 1337 05da FDE0      		ldi r31,lo8(13)
 1338 05dc DF16      		cp r13,r31
 1339 05de A9F5      		brne .L105
 1340               	.L114:
 451:nmeap01.c     ****             context->input_state = 6;
 452:nmeap01.c     ****         }
 1341               		.stabn 68,0,452,.LM120-nmeap_parse
 1342               	.LM120:
 1343 05e0 86E0      		ldi r24,lo8(6)
 1344 05e2 90E0      		ldi r25,hi8(6)
 1345               	.L115:
 1346 05e4 F701      		movw r30,r14
 1347 05e6 9183      		std Z+1,r25
 1348 05e8 8083      		st Z,r24
 1349 05ea 55C0      		rjmp .L78
 1350               	.L104:
 453:nmeap01.c     ****         else {
 454:nmeap01.c     ****             /* input error, restart */
 455:nmeap01.c     ****             context->err_crl++;
 456:nmeap01.c     ****             context->input_state = 0;
 457:nmeap01.c     ****             context->input_count = 0;
 458:nmeap01.c     ****         }
 459:nmeap01.c     ****         break;
 460:nmeap01.c     ****     /* LOOKING FOR LINE FEED */
 461:nmeap01.c     ****     case 6:
 462:nmeap01.c     ****         if (ch == '\n') {
 463:nmeap01.c     ****             /* linefeed, line complete */
 1351               		.stabn 68,0,463,.LM121-nmeap_parse
 1352               	.LM121:
 1353 05ec FAE0      		ldi r31,lo8(10)
 1354 05ee DF16      		cp r13,r31
 1355 05f0 61F5      		brne .L105
 464:nmeap01.c     ****             
 465:nmeap01.c     ****             /* delimit buffer */
 466:nmeap01.c     ****             context->input[context->input_count] = 0;
 467:nmeap01.c     ****             
 1356               		.stabn 68,0,467,.LM122-nmeap_parse
 1357               	.LM122:
 1358 05f2 0C0F      		add r16,r28
 1359 05f4 1D1F      		adc r17,r29
 1360 05f6 0E58      		subi r16,lo8(-(114))
 1361 05f8 1F4F      		sbci r17,hi8(-(114))
 1362 05fa F801      		movw r30,r16
 1363 05fc 1082      		st Z,__zero_reg__
GAS LISTING /var/tmp//cc112P7K.s 			page 35


 468:nmeap01.c     ****             /* if the checksums match, process the sentence */
 469:nmeap01.c     **** 			if (context->ccks == context->icks) {
 470:nmeap01.c     **** 				/* process */
 1364               		.stabn 68,0,470,.LM123-nmeap_parse
 1365               	.LM123:
 1366 05fe FE01      		movw r30,r28
 1367 0600 E358      		subi r30,lo8(-(381))
 1368 0602 FE4F      		sbci r31,hi8(-(381))
 1369 0604 C458      		subi r28,lo8(-(380))
 1370 0606 DE4F      		sbci r29,hi8(-(380))
 1371 0608 9081      		ld r25,Z
 1372 060a 8881      		ld r24,Y
 1373 060c CC57      		subi r28,lo8(-(-380))
 1374 060e D140      		sbci r29,hi8(-(-380))
 1375 0610 9817      		cp r25,r24
 1376 0612 41F4      		brne .L106
 471:nmeap01.c     **** 				status = nmeap_process(context);
 472:nmeap01.c     **** 				
 1377               		.stabn 68,0,472,.LM124-nmeap_parse
 1378               	.LM124:
 1379 0614 CE01      		movw r24,r28
 1380 0616 0E94 0000 		call nmeap_process
 1381 061a 4C01      		movw r8,r24
 473:nmeap01.c     **** 				/* count good messages */
 474:nmeap01.c     **** 				context->msgs++;
 475:nmeap01.c     **** 			}
 1382               		.stabn 68,0,475,.LM125-nmeap_parse
 1383               	.LM125:
 1384 061c FE01      		movw r30,r28
 1385 061e E055      		subi r30,lo8(-(432))
 1386 0620 FE4F      		sbci r31,hi8(-(432))
 1387 0622 03C0      		rjmp .L112
 1388               	.L106:
 476:nmeap01.c     **** 			else {
 477:nmeap01.c     **** 				/* count checksum errors */
 478:nmeap01.c     **** 				context->err_cks++;
 479:nmeap01.c     **** 			}
 1389               		.stabn 68,0,479,.LM126-nmeap_parse
 1390               	.LM126:
 1391 0624 FE01      		movw r30,r28
 1392 0626 EC53      		subi r30,lo8(-(452))
 1393 0628 FE4F      		sbci r31,hi8(-(452))
 1394               	.L112:
 1395 062a 8081      		ld r24,Z
 1396 062c 9181      		ldd r25,Z+1
 1397 062e A281      		ldd r26,Z+2
 1398 0630 B381      		ldd r27,Z+3
 1399 0632 0196      		adiw r24,1
 1400 0634 A11D      		adc r26,__zero_reg__
 1401 0636 B11D      		adc r27,__zero_reg__
 1402 0638 8083      		st Z,r24
 1403 063a 9183      		std Z+1,r25
 1404 063c A283      		std Z+2,r26
 1405 063e B383      		std Z+3,r27
 480:nmeap01.c     ****             
 481:nmeap01.c     ****             /* restart next time */
 482:nmeap01.c     ****             context->input_state = 0;
GAS LISTING /var/tmp//cc112P7K.s 			page 36


 483:nmeap01.c     ****             context->input_count = 0;
 1406               		.stabn 68,0,483,.LM127-nmeap_parse
 1407               	.LM127:
 1408 0640 F701      		movw r30,r14
 1409 0642 1182      		std Z+1,__zero_reg__
 1410 0644 1082      		st Z,__zero_reg__
 484:nmeap01.c     ****         }
 1411               		.stabn 68,0,484,.LM128-nmeap_parse
 1412               	.LM128:
 1413 0646 F501      		movw r30,r10
 1414 0648 24C0      		rjmp .L113
 1415               	.L105:
 485:nmeap01.c     ****         else {
 486:nmeap01.c     ****             /* input error, restart */
 487:nmeap01.c     ****             context->err_crl++;
 488:nmeap01.c     ****             context->input_state = 0;
 1416               		.stabn 68,0,488,.LM129-nmeap_parse
 1417               	.LM129:
 1418 064a FE01      		movw r30,r28
 1419 064c E853      		subi r30,lo8(-(456))
 1420 064e FE4F      		sbci r31,hi8(-(456))
 1421               	.L116:
 1422 0650 8081      		ld r24,Z
 1423 0652 9181      		ldd r25,Z+1
 1424 0654 A281      		ldd r26,Z+2
 1425 0656 B381      		ldd r27,Z+3
 1426 0658 0196      		adiw r24,1
 1427 065a A11D      		adc r26,__zero_reg__
 1428 065c B11D      		adc r27,__zero_reg__
 1429 065e 8083      		st Z,r24
 1430 0660 9183      		std Z+1,r25
 1431 0662 A283      		std Z+2,r26
 1432 0664 B383      		std Z+3,r27
 489:nmeap01.c     ****             context->input_count = 0;
 1433               		.stabn 68,0,489,.LM130-nmeap_parse
 1434               	.LM130:
 1435 0666 F701      		movw r30,r14
 1436 0668 9182      		std Z+1,r9
 1437 066a 8082      		st Z,r8
 490:nmeap01.c     ****         }
 1438               		.stabn 68,0,490,.LM131-nmeap_parse
 1439               	.LM131:
 1440 066c F501      		movw r30,r10
 1441 066e 9182      		std Z+1,r9
 1442 0670 8082      		st Z,r8
 491:nmeap01.c     ****         break;
 492:nmeap01.c     ****     default:
 1443               		.stabn 68,0,492,.LM132-nmeap_parse
 1444               	.LM132:
 1445 0672 11C0      		rjmp .L78
 1446               	.L109:
 493:nmeap01.c     ****         context->err_unk++;
 494:nmeap01.c     ****         context->input_state = 0;
 1447               		.stabn 68,0,494,.LM133-nmeap_parse
 1448               	.LM133:
 1449 0674 FE01      		movw r30,r28
 1450 0676 E454      		subi r30,lo8(-(444))
GAS LISTING /var/tmp//cc112P7K.s 			page 37


 1451 0678 FE4F      		sbci r31,hi8(-(444))
 1452 067a 8081      		ld r24,Z
 1453 067c 9181      		ldd r25,Z+1
 1454 067e A281      		ldd r26,Z+2
 1455 0680 B381      		ldd r27,Z+3
 1456 0682 0196      		adiw r24,1
 1457 0684 A11D      		adc r26,__zero_reg__
 1458 0686 B11D      		adc r27,__zero_reg__
 1459 0688 8083      		st Z,r24
 1460 068a 9183      		std Z+1,r25
 1461 068c A283      		std Z+2,r26
 1462 068e B383      		std Z+3,r27
 495:nmeap01.c     ****         break;
 1463               		.stabn 68,0,495,.LM134-nmeap_parse
 1464               	.LM134:
 1465 0690 F701      		movw r30,r14
 1466               	.L113:
 1467 0692 1182      		std Z+1,__zero_reg__
 1468 0694 1082      		st Z,__zero_reg__
 1469               	.L78:
 496:nmeap01.c     ****     }
 497:nmeap01.c     ****             
 498:nmeap01.c     **** 	return status;
 499:nmeap01.c     **** }
 500:nmeap01.c     **** 
 1470               		.stabn 68,0,500,.LM135-nmeap_parse
 1471               	.LM135:
 1472 0696 C401      		movw r24,r8
 1473               	/* epilogue: frame size=0 */
 1474 0698 DF91      		pop r29
 1475 069a CF91      		pop r28
 1476 069c 1F91      		pop r17
 1477 069e 0F91      		pop r16
 1478 06a0 FF90      		pop r15
 1479 06a2 EF90      		pop r14
 1480 06a4 DF90      		pop r13
 1481 06a6 BF90      		pop r11
 1482 06a8 AF90      		pop r10
 1483 06aa 9F90      		pop r9
 1484 06ac 8F90      		pop r8
 1485 06ae 0895      		ret
 1486               	/* epilogue end (size=12) */
 1487               	/* function nmeap_parse size 333 (310) */
 1488               		.size	nmeap_parse, .-nmeap_parse
 1489               		.stabs	"status:r(0,1)",64,0,343,8
 1490               		.stabn	192,0,0,nmeap_parse-nmeap_parse
 1491               		.stabn	224,0,0,.Lscope7-nmeap_parse
 1492               	.Lscope7:
 1493               		.stabs	"",36,0,0,.Lscope7-nmeap_parse
 1494               		.stabs	"nmeap_parseBuffer:F(0,1)",36,0,506,nmeap_parseBuffer
 1495               		.stabs	"context:P(0,24)",64,0,505,8
 1496               		.stabs	"buffer:P(0,22)",64,0,505,22
 1497               		.stabs	"length:P(0,26)=*(0,1)",64,0,505,12
 1498               	.global	nmeap_parseBuffer
 1499               		.type	nmeap_parseBuffer, @function
 1500               	nmeap_parseBuffer:
 501:nmeap01.c     **** /** 
GAS LISTING /var/tmp//cc112P7K.s 			page 38


 502:nmeap01.c     ****  * parse a buffer of nmea data
 503:nmeap01.c     ****  */
 504:nmeap01.c     **** int nmeap_parseBuffer(nmeap_context_t *context,const char *buffer,int *length)
 505:nmeap01.c     **** {
 506:nmeap01.c     ****     int  i;
 1501               		.stabn 68,0,506,.LM136-nmeap_parseBuffer
 1502               	.LM136:
 1503               	/* prologue: frame size=0 */
 1504 06b0 8F92      		push r8
 1505 06b2 9F92      		push r9
 1506 06b4 AF92      		push r10
 1507 06b6 BF92      		push r11
 1508 06b8 CF92      		push r12
 1509 06ba DF92      		push r13
 1510 06bc EF92      		push r14
 1511 06be FF92      		push r15
 1512 06c0 0F93      		push r16
 1513 06c2 1F93      		push r17
 1514 06c4 CF93      		push r28
 1515 06c6 DF93      		push r29
 1516               	/* prologue end (size=12) */
 1517 06c8 4C01      		movw r8,r24
 1518 06ca 6A01      		movw r12,r20
 507:nmeap01.c     ****     int  status;
 508:nmeap01.c     ****     int  rem;
 509:nmeap01.c     ****     int  tlen;
 510:nmeap01.c     ****     
 511:nmeap01.c     ****     tlen   = *length;
 512:nmeap01.c     ****     rem    = *length;
 1519               		.stabn 68,0,512,.LM137-nmeap_parseBuffer
 1520               	.LM137:
 1521 06cc FA01      		movw r30,r20
 1522 06ce C081      		ld r28,Z
 1523 06d0 D181      		ldd r29,Z+1
 513:nmeap01.c     ****     status = 0;
 1524               		.stabn 68,0,513,.LM138-nmeap_parseBuffer
 1525               	.LM138:
 1526 06d2 5E01      		movw r10,r28
 514:nmeap01.c     ****     /* for each byte in the buffer */
 1527               		.stabn 68,0,514,.LM139-nmeap_parseBuffer
 1528               	.LM139:
 1529 06d4 80E0      		ldi r24,lo8(0)
 1530 06d6 90E0      		ldi r25,hi8(0)
 515:nmeap01.c     ****     for(i=0;i<tlen;i++) {
 516:nmeap01.c     ****         /* decrement remaining byte count */
 1531               		.stabn 68,0,516,.LM140-nmeap_parseBuffer
 1532               	.LM140:
 1533 06d8 8C01      		movw r16,r24
 1534 06da 8C17      		cp r24,r28
 1535 06dc 9D07      		cpc r25,r29
 1536 06de 7CF4      		brge .L119
 1537 06e0 7B01      		movw r14,r22
 1538               	.L122:
 517:nmeap01.c     ****         rem--;
 518:nmeap01.c     ****         /* parse the byte */
 1539               		.stabn 68,0,518,.LM141-nmeap_parseBuffer
 1540               	.LM141:
GAS LISTING /var/tmp//cc112P7K.s 			page 39


 1541 06e2 2197      		sbiw r28,1
 519:nmeap01.c     ****         status = nmeap_parse(context,buffer[i]);
 520:nmeap01.c     ****         if (status != 0) {
 1542               		.stabn 68,0,520,.LM142-nmeap_parseBuffer
 1543               	.LM142:
 1544 06e4 F701      		movw r30,r14
 1545 06e6 6191      		ld r22,Z+
 1546 06e8 7F01      		movw r14,r30
 1547 06ea C401      		movw r24,r8
 1548 06ec 0E94 0000 		call nmeap_parse
 521:nmeap01.c     ****             /* message found or error */
 1549               		.stabn 68,0,521,.LM143-nmeap_parseBuffer
 1550               	.LM143:
 1551 06f0 0097      		sbiw r24,0
 1552 06f2 29F4      		brne .L119
 1553               		.stabn 68,0,516,.LM144-nmeap_parseBuffer
 1554               	.LM144:
 1555 06f4 0F5F      		subi r16,lo8(-(1))
 1556 06f6 1F4F      		sbci r17,hi8(-(1))
 1557 06f8 0A15      		cp r16,r10
 1558 06fa 1B05      		cpc r17,r11
 1559 06fc 94F3      		brlt .L122
 1560               	.L119:
 522:nmeap01.c     ****             break;
 523:nmeap01.c     ****         }
 524:nmeap01.c     ****     }
 525:nmeap01.c     **** 	
 526:nmeap01.c     ****     /* return remaining byte count */
 527:nmeap01.c     ****     *length = rem;
 528:nmeap01.c     **** 	
 1561               		.stabn 68,0,528,.LM145-nmeap_parseBuffer
 1562               	.LM145:
 1563 06fe F601      		movw r30,r12
 1564 0700 D183      		std Z+1,r29
 1565 0702 C083      		st Z,r28
 1566               	/* epilogue: frame size=0 */
 1567 0704 DF91      		pop r29
 1568 0706 CF91      		pop r28
 1569 0708 1F91      		pop r17
 1570 070a 0F91      		pop r16
 1571 070c FF90      		pop r15
 1572 070e EF90      		pop r14
 1573 0710 DF90      		pop r13
 1574 0712 CF90      		pop r12
 1575 0714 BF90      		pop r11
 1576 0716 AF90      		pop r10
 1577 0718 9F90      		pop r9
 1578 071a 8F90      		pop r8
 1579 071c 0895      		ret
 1580               	/* epilogue end (size=13) */
 1581               	/* function nmeap_parseBuffer size 55 (30) */
 1582               		.size	nmeap_parseBuffer, .-nmeap_parseBuffer
 1583               		.stabs	"i:r(0,1)",64,0,507,16
 1584               		.stabs	"status:r(0,1)",64,0,508,24
 1585               		.stabs	"rem:r(0,1)",64,0,509,28
 1586               		.stabs	"tlen:r(0,1)",64,0,510,10
 1587               		.stabn	192,0,0,nmeap_parseBuffer-nmeap_parseBuffer
GAS LISTING /var/tmp//cc112P7K.s 			page 40


 1588               		.stabn	224,0,0,.Lscope8-nmeap_parseBuffer
 1589               	.Lscope8:
 1590               		.stabs	"",36,0,0,.Lscope8-nmeap_parseBuffer
 1591               		.data
 1592               	.LC0:
 1593 0000 2573 00   		.string	"%s"
 1594               	.LC1:
 1595 0003 2573 3D3D 		.string	"%s==%s %02x==%02x\n"
 1595      2573 2025 
 1595      3032 783D 
 1595      3D25 3032 
 1595      780A 00
 1596               	.LC2:
 1597 0016 2564 3A25 		.string	"%d:%s\n"
 1597      730A 00
 1598               		.text
 1599               		.stabs	"nmeap_gpgga:F(0,1)",36,0,537,nmeap_gpgga
 1600               		.stabs	"context:P(0,24)",64,0,536,28
 1601               		.stabs	"sentence:P(0,25)",64,0,536,8
 1602               	.global	nmeap_gpgga
 1603               		.type	nmeap_gpgga, @function
 1604               	nmeap_gpgga:
 529:nmeap01.c     ****     return status;
 530:nmeap01.c     **** }
 531:nmeap01.c     **** 
 532:nmeap01.c     **** /** 
 533:nmeap01.c     ****  * standard GPGGA sentence parser 
 534:nmeap01.c     ****  */
 535:nmeap01.c     **** int nmeap_gpgga(nmeap_context_t *context,nmeap_sentence_t *sentence)
 536:nmeap01.c     **** {
 537:nmeap01.c     **** #ifndef NDEBUG	
 1605               		.stabn 68,0,537,.LM146-nmeap_gpgga
 1606               	.LM146:
 1607               	/* prologue: frame size=0 */
 1608 071e 8F92      		push r8
 1609 0720 9F92      		push r9
 1610 0722 AF92      		push r10
 1611 0724 BF92      		push r11
 1612 0726 CF92      		push r12
 1613 0728 DF92      		push r13
 1614 072a EF92      		push r14
 1615 072c FF92      		push r15
 1616 072e 0F93      		push r16
 1617 0730 1F93      		push r17
 1618 0732 CF93      		push r28
 1619 0734 DF93      		push r29
 1620               	/* prologue end (size=12) */
 1621 0736 EC01      		movw r28,r24
 1622 0738 4B01      		movw r8,r22
 538:nmeap01.c     ****     int i;
 539:nmeap01.c     **** #endif
 540:nmeap01.c     ****     
 541:nmeap01.c     ****     /* get pointer to sentence data */
 542:nmeap01.c     ****     nmeap_gga_t *gga = (nmeap_gga_t *)sentence->data;
 543:nmeap01.c     ****     
 1623               		.stabn 68,0,543,.LM147-nmeap_gpgga
 1624               	.LM147:
GAS LISTING /var/tmp//cc112P7K.s 			page 41


 1625 073a FB01      		movw r30,r22
 1626 073c 0485      		ldd r16,Z+12
 1627 073e 1585      		ldd r17,Z+13
 544:nmeap01.c     ****     /* if there is a data element, extract data from the tokens */
 545:nmeap01.c     **** 	if (gga != 0) {
 546:nmeap01.c     **** 		gga->latitude  = nmeap_latitude(context->token[2],context->token[3]);
 1628               		.stabn 68,0,546,.LM148-nmeap_gpgga
 1629               	.LM148:
 1630 0740 0115      		cp r16,__zero_reg__
 1631 0742 1105      		cpc r17,__zero_reg__
 1632 0744 09F4      		brne .+2
 1633 0746 7EC0      		rjmp .L125
 547:nmeap01.c     **** 		gga->longitude = nmeap_longitude(context->token[4],context->token[5]);
 1634               		.stabn 68,0,547,.LM149-nmeap_gpgga
 1635               	.LM149:
 1636 0748 FC01      		movw r30,r24
 1637 074a EC57      		subi r30,lo8(-(388))
 1638 074c FE4F      		sbci r31,hi8(-(388))
 1639 074e DC01      		movw r26,r24
 1640 0750 AE57      		subi r26,lo8(-(386))
 1641 0752 BE4F      		sbci r27,hi8(-(386))
 1642 0754 6081      		ld r22,Z
 1643 0756 7181      		ldd r23,Z+1
 1644 0758 8D91      		ld r24,X+
 1645 075a 9C91      		ld r25,X
 1646 075c 0E94 0000 		call nmeap_latitude
 1647 0760 DC01      		movw r26,r24
 1648 0762 CB01      		movw r24,r22
 1649 0764 F801      		movw r30,r16
 1650 0766 8083      		st Z,r24
 1651 0768 9183      		std Z+1,r25
 1652 076a A283      		std Z+2,r26
 1653 076c B383      		std Z+3,r27
 548:nmeap01.c     **** 		gga->altitude  = nmeap_altitude(context->token[9],context->token[10]);
 1654               		.stabn 68,0,548,.LM150-nmeap_gpgga
 1655               	.LM150:
 1656 076e FE01      		movw r30,r28
 1657 0770 E857      		subi r30,lo8(-(392))
 1658 0772 FE4F      		sbci r31,hi8(-(392))
 1659 0774 DE01      		movw r26,r28
 1660 0776 AA57      		subi r26,lo8(-(390))
 1661 0778 BE4F      		sbci r27,hi8(-(390))
 1662 077a 6081      		ld r22,Z
 1663 077c 7181      		ldd r23,Z+1
 1664 077e 8D91      		ld r24,X+
 1665 0780 9C91      		ld r25,X
 1666 0782 0E94 0000 		call nmeap_longitude
 1667 0786 DC01      		movw r26,r24
 1668 0788 CB01      		movw r24,r22
 1669 078a F801      		movw r30,r16
 1670 078c 8483      		std Z+4,r24
 1671 078e 9583      		std Z+5,r25
 1672 0790 A683      		std Z+6,r26
 1673 0792 B783      		std Z+7,r27
 549:nmeap01.c     **** 		gga->time       = atoi(context->token[1]);
 1674               		.stabn 68,0,549,.LM151-nmeap_gpgga
 1675               	.LM151:
GAS LISTING /var/tmp//cc112P7K.s 			page 42


 1676 0794 FE01      		movw r30,r28
 1677 0796 EE56      		subi r30,lo8(-(402))
 1678 0798 FE4F      		sbci r31,hi8(-(402))
 1679 079a DE01      		movw r26,r28
 1680 079c A057      		subi r26,lo8(-(400))
 1681 079e BE4F      		sbci r27,hi8(-(400))
 1682 07a0 6081      		ld r22,Z
 1683 07a2 7181      		ldd r23,Z+1
 1684 07a4 8D91      		ld r24,X+
 1685 07a6 9C91      		ld r25,X
 1686 07a8 0E94 0000 		call nmeap_altitude
 1687 07ac DC01      		movw r26,r24
 1688 07ae CB01      		movw r24,r22
 1689 07b0 F801      		movw r30,r16
 1690 07b2 8087      		std Z+8,r24
 1691 07b4 9187      		std Z+9,r25
 1692 07b6 A287      		std Z+10,r26
 1693 07b8 B387      		std Z+11,r27
 550:nmeap01.c     **** 		gga->satellites = atoi(context->token[7]);
 1694               		.stabn 68,0,550,.LM152-nmeap_gpgga
 1695               	.LM152:
 1696 07ba FE01      		movw r30,r28
 1697 07bc E058      		subi r30,lo8(-(384))
 1698 07be FE4F      		sbci r31,hi8(-(384))
 1699 07c0 8081      		ld r24,Z
 1700 07c2 9181      		ldd r25,Z+1
 1701 07c4 0E94 0000 		call atoi
 1702 07c8 AA27      		clr r26
 1703 07ca 97FD      		sbrc r25,7
 1704 07cc A095      		com r26
 1705 07ce BA2F      		mov r27,r26
 1706 07d0 F801      		movw r30,r16
 1707 07d2 8487      		std Z+12,r24
 1708 07d4 9587      		std Z+13,r25
 1709 07d6 A687      		std Z+14,r26
 1710 07d8 B787      		std Z+15,r27
 551:nmeap01.c     **** 		gga->quality    = atoi(context->token[6]);
 1711               		.stabn 68,0,551,.LM153-nmeap_gpgga
 1712               	.LM153:
 1713 07da FE01      		movw r30,r28
 1714 07dc E457      		subi r30,lo8(-(396))
 1715 07de FE4F      		sbci r31,hi8(-(396))
 1716 07e0 8081      		ld r24,Z
 1717 07e2 9181      		ldd r25,Z+1
 1718 07e4 0E94 0000 		call atoi
 1719 07e8 F801      		movw r30,r16
 1720 07ea 918B      		std Z+17,r25
 1721 07ec 808B      		std Z+16,r24
 552:nmeap01.c     **** 		gga->hdop       = atof(context->token[8]);
 1722               		.stabn 68,0,552,.LM154-nmeap_gpgga
 1723               	.LM154:
 1724 07ee FE01      		movw r30,r28
 1725 07f0 E657      		subi r30,lo8(-(394))
 1726 07f2 FE4F      		sbci r31,hi8(-(394))
 1727 07f4 8081      		ld r24,Z
 1728 07f6 9181      		ldd r25,Z+1
 1729 07f8 0E94 0000 		call atoi
GAS LISTING /var/tmp//cc112P7K.s 			page 43


 1730 07fc F801      		movw r30,r16
 1731 07fe 938B      		std Z+19,r25
 1732 0800 828B      		std Z+18,r24
 553:nmeap01.c     **** 		gga->geoid      = nmeap_altitude(context->token[11],context->token[12]);
 1733               		.stabn 68,0,553,.LM155-nmeap_gpgga
 1734               	.LM155:
 1735 0802 FE01      		movw r30,r28
 1736 0804 E257      		subi r30,lo8(-(398))
 1737 0806 FE4F      		sbci r31,hi8(-(398))
 1738 0808 8081      		ld r24,Z
 1739 080a 9181      		ldd r25,Z+1
 1740 080c 0E94 0000 		call atof
 1741 0810 DC01      		movw r26,r24
 1742 0812 CB01      		movw r24,r22
 1743 0814 F801      		movw r30,r16
 1744 0816 848B      		std Z+20,r24
 1745 0818 958B      		std Z+21,r25
 1746 081a A68B      		std Z+22,r26
 1747 081c B78B      		std Z+23,r27
 554:nmeap01.c     **** 	}
 1748               		.stabn 68,0,554,.LM156-nmeap_gpgga
 1749               	.LM156:
 1750 081e FE01      		movw r30,r28
 1751 0820 EA56      		subi r30,lo8(-(406))
 1752 0822 FE4F      		sbci r31,hi8(-(406))
 1753 0824 DE01      		movw r26,r28
 1754 0826 AC56      		subi r26,lo8(-(404))
 1755 0828 BE4F      		sbci r27,hi8(-(404))
 1756 082a 6081      		ld r22,Z
 1757 082c 7181      		ldd r23,Z+1
 1758 082e 8D91      		ld r24,X+
 1759 0830 9C91      		ld r25,X
 1760 0832 0E94 0000 		call nmeap_altitude
 1761 0836 DC01      		movw r26,r24
 1762 0838 CB01      		movw r24,r22
 1763 083a F801      		movw r30,r16
 1764 083c 808F      		std Z+24,r24
 1765 083e 918F      		std Z+25,r25
 1766 0840 A28F      		std Z+26,r26
 1767 0842 B38F      		std Z+27,r27
 1768               	.L125:
 555:nmeap01.c     **** 
 556:nmeap01.c     **** #ifndef NDEBUG    
 557:nmeap01.c     ****     /* print raw input string */
 558:nmeap01.c     ****     printf("%s",context->debug_input);
 559:nmeap01.c     ****     
 1769               		.stabn 68,0,559,.LM157-nmeap_gpgga
 1770               	.LM157:
 1771 0844 C453      		subi r28,lo8(-(460))
 1772 0846 DE4F      		sbci r29,hi8(-(460))
 1773 0848 DF93      		push r29
 1774 084a CF93      		push r28
 1775 084c 80E0      		ldi r24,lo8(.LC0)
 1776 084e 90E0      		ldi r25,hi8(.LC0)
 1777 0850 9F93      		push r25
 1778 0852 8F93      		push r24
 1779 0854 0E94 0000 		call printf
GAS LISTING /var/tmp//cc112P7K.s 			page 44


 560:nmeap01.c     ****     /* print some validation data */
 561:nmeap01.c     ****     printf("%s==%s %02x==%02x\n",context->input_name,sentence->name,context->icks,context->ccks);
 562:nmeap01.c     ****     
 1780               		.stabn 68,0,562,.LM158-nmeap_gpgga
 1781               	.LM158:
 1782 0858 CF54      		subi r28,lo8(-(-79))
 1783 085a D040      		sbci r29,hi8(-(-79))
 1784 085c 8881      		ld r24,Y
 1785 085e 9927      		clr r25
 1786 0860 87FD      		sbrc r24,7
 1787 0862 9095      		com r25
 1788 0864 9F93      		push r25
 1789 0866 8F93      		push r24
 1790 0868 8A91      		ld r24,-Y
 1791 086a 9927      		clr r25
 1792 086c 87FD      		sbrc r24,7
 1793 086e 9095      		com r25
 1794 0870 9F93      		push r25
 1795 0872 8F93      		push r24
 1796 0874 9F92      		push r9
 1797 0876 8F92      		push r8
 1798 0878 2697      		sbiw r28,6
 1799 087a DF93      		push r29
 1800 087c CF93      		push r28
 1801 087e C657      		subi r28,lo8(-(-374))
 1802 0880 D140      		sbci r29,hi8(-(-374))
 1803 0882 80E0      		ldi r24,lo8(.LC1)
 1804 0884 90E0      		ldi r25,hi8(.LC1)
 1805 0886 9F93      		push r25
 1806 0888 8F93      		push r24
 1807 088a 0E94 0000 		call printf
 563:nmeap01.c     ****     /* print the tokens */
 564:nmeap01.c     ****     for(i=0;i<context->tokens;i++) {
 565:nmeap01.c     ****         printf("%d:%s\n",i,context->token[i]);
 1808               		.stabn 68,0,565,.LM159-nmeap_gpgga
 1809               	.LM159:
 1810 088e EE24      		clr r14
 1811 0890 FF24      		clr r15
 1812 0892 8DB7      		in r24,__SP_L__
 1813 0894 9EB7      		in r25,__SP_H__
 1814 0896 0E96      		adiw r24,14
 1815 0898 0FB6      		in __tmp_reg__,__SREG__
 1816 089a F894      		cli
 1817 089c 9EBF      		out __SP_H__,r25
 1818 089e 0FBE      		out __SREG__,__tmp_reg__
 1819 08a0 8DBF      		out __SP_L__,r24
 1820 08a2 4EEA      		ldi r20,lo8(430)
 1821 08a4 A42E      		mov r10,r20
 1822 08a6 41E0      		ldi r20,hi8(430)
 1823 08a8 B42E      		mov r11,r20
 1824 08aa AC0E      		add r10,r28
 1825 08ac BD1E      		adc r11,r29
 1826 08ae F501      		movw r30,r10
 1827 08b0 8081      		ld r24,Z
 1828 08b2 9181      		ldd r25,Z+1
 1829 08b4 E816      		cp r14,r24
 1830 08b6 F906      		cpc r15,r25
GAS LISTING /var/tmp//cc112P7K.s 			page 45


 1831 08b8 2CF5      		brge .L132
 1832 08ba 3EE7      		ldi r19,lo8(382)
 1833 08bc C32E      		mov r12,r19
 1834 08be 31E0      		ldi r19,hi8(382)
 1835 08c0 D32E      		mov r13,r19
 1836 08c2 CC0E      		add r12,r28
 1837 08c4 DD1E      		adc r13,r29
 1838               	.L129:
 566:nmeap01.c     ****     }
 1839               		.stabn 68,0,566,.LM160-nmeap_gpgga
 1840               	.LM160:
 1841 08c6 F601      		movw r30,r12
 1842 08c8 8191      		ld r24,Z+
 1843 08ca 9191      		ld r25,Z+
 1844 08cc 6F01      		movw r12,r30
 1845 08ce 9F93      		push r25
 1846 08d0 8F93      		push r24
 1847 08d2 FF92      		push r15
 1848 08d4 EF92      		push r14
 1849 08d6 80E0      		ldi r24,lo8(.LC2)
 1850 08d8 90E0      		ldi r25,hi8(.LC2)
 1851 08da 9F93      		push r25
 1852 08dc 8F93      		push r24
 1853 08de 0E94 0000 		call printf
 1854               		.stabn 68,0,565,.LM161-nmeap_gpgga
 1855               	.LM161:
 1856 08e2 8DB7      		in r24,__SP_L__
 1857 08e4 9EB7      		in r25,__SP_H__
 1858 08e6 0696      		adiw r24,6
 1859 08e8 0FB6      		in __tmp_reg__,__SREG__
 1860 08ea F894      		cli
 1861 08ec 9EBF      		out __SP_H__,r25
 1862 08ee 0FBE      		out __SREG__,__tmp_reg__
 1863 08f0 8DBF      		out __SP_L__,r24
 1864 08f2 0894      		sec
 1865 08f4 E11C      		adc r14,__zero_reg__
 1866 08f6 F11C      		adc r15,__zero_reg__
 1867 08f8 F501      		movw r30,r10
 1868 08fa 8081      		ld r24,Z
 1869 08fc 9181      		ldd r25,Z+1
 1870 08fe E816      		cp r14,r24
 1871 0900 F906      		cpc r15,r25
 1872 0902 0CF3      		brlt .L129
 1873               	.L132:
 567:nmeap01.c     **** #endif   
 568:nmeap01.c     **** 
 569:nmeap01.c     ****     /* if the sentence has a callout, call it */
 570:nmeap01.c     ****     if (sentence->callout != 0) {
 571:nmeap01.c     ****         (*sentence->callout)(context,gga,context->user_data);
 1874               		.stabn 68,0,571,.LM162-nmeap_gpgga
 1875               	.LM162:
 1876 0904 F401      		movw r30,r8
 1877 0906 2285      		ldd r18,Z+10
 1878 0908 3385      		ldd r19,Z+11
 1879 090a 2115      		cp r18,__zero_reg__
 1880 090c 3105      		cpc r19,__zero_reg__
 1881 090e 49F0      		breq .L130
GAS LISTING /var/tmp//cc112P7K.s 			page 46


 572:nmeap01.c     ****     }
 1882               		.stabn 68,0,572,.LM163-nmeap_gpgga
 1883               	.LM163:
 1884 0910 FE01      		movw r30,r28
 1885 0912 E453      		subi r30,lo8(-(716))
 1886 0914 FD4F      		sbci r31,hi8(-(716))
 1887 0916 4081      		ld r20,Z
 1888 0918 5181      		ldd r21,Z+1
 1889 091a B801      		movw r22,r16
 1890 091c CE01      		movw r24,r28
 1891 091e F901      		movw r30,r18
 1892 0920 0995      		icall
 1893               	.L130:
 573:nmeap01.c     ****     
 574:nmeap01.c     ****     return NMEAP_GPGGA;
 575:nmeap01.c     **** }
 576:nmeap01.c     **** 
 1894               		.stabn 68,0,576,.LM164-nmeap_gpgga
 1895               	.LM164:
 1896 0922 81E0      		ldi r24,lo8(1)
 1897 0924 90E0      		ldi r25,hi8(1)
 1898               	/* epilogue: frame size=0 */
 1899 0926 DF91      		pop r29
 1900 0928 CF91      		pop r28
 1901 092a 1F91      		pop r17
 1902 092c 0F91      		pop r16
 1903 092e FF90      		pop r15
 1904 0930 EF90      		pop r14
 1905 0932 DF90      		pop r13
 1906 0934 CF90      		pop r12
 1907 0936 BF90      		pop r11
 1908 0938 AF90      		pop r10
 1909 093a 9F90      		pop r9
 1910 093c 8F90      		pop r8
 1911 093e 0895      		ret
 1912               	/* epilogue end (size=13) */
 1913               	/* function nmeap_gpgga size 273 (248) */
 1914               		.size	nmeap_gpgga, .-nmeap_gpgga
 1915               		.stabs	"i:r(0,1)",64,0,539,14
 1916               		.stabs	"gga:r(0,27)=*(12,8)",64,0,543,16
 1917               		.stabn	192,0,0,nmeap_gpgga-nmeap_gpgga
 1918               		.stabn	224,0,0,.Lscope9-nmeap_gpgga
 1919               	.Lscope9:
 1920               		.stabs	"",36,0,0,.Lscope9-nmeap_gpgga
 1921               		.stabs	"nmeap_gprmc:F(0,1)",36,0,582,nmeap_gprmc
 1922               		.stabs	"context:P(0,24)",64,0,581,28
 1923               		.stabs	"sentence:P(0,25)",64,0,581,8
 1924               	.global	nmeap_gprmc
 1925               		.type	nmeap_gprmc, @function
 1926               	nmeap_gprmc:
 577:nmeap01.c     **** /** 
 578:nmeap01.c     ****  * standard GPRMCntence parser 
 579:nmeap01.c     ****  */
 580:nmeap01.c     **** int nmeap_gprmc(nmeap_context_t *context,nmeap_sentence_t *sentence)
 581:nmeap01.c     **** {
 582:nmeap01.c     **** #ifndef NDEBUG	
 1927               		.stabn 68,0,582,.LM165-nmeap_gprmc
GAS LISTING /var/tmp//cc112P7K.s 			page 47


 1928               	.LM165:
 1929               	/* prologue: frame size=0 */
 1930 0940 8F92      		push r8
 1931 0942 9F92      		push r9
 1932 0944 AF92      		push r10
 1933 0946 BF92      		push r11
 1934 0948 CF92      		push r12
 1935 094a DF92      		push r13
 1936 094c EF92      		push r14
 1937 094e FF92      		push r15
 1938 0950 0F93      		push r16
 1939 0952 1F93      		push r17
 1940 0954 CF93      		push r28
 1941 0956 DF93      		push r29
 1942               	/* prologue end (size=12) */
 1943 0958 EC01      		movw r28,r24
 1944 095a 4B01      		movw r8,r22
 583:nmeap01.c     ****     int i;
 584:nmeap01.c     **** #endif
 585:nmeap01.c     **** 
 586:nmeap01.c     ****     /* get pointer to sentence data */
 587:nmeap01.c     ****     nmeap_rmc_t *rmc = (nmeap_rmc_t *)sentence->data;
 588:nmeap01.c     ****     
 1945               		.stabn 68,0,588,.LM166-nmeap_gprmc
 1946               	.LM166:
 1947 095c FB01      		movw r30,r22
 1948 095e 0485      		ldd r16,Z+12
 1949 0960 1585      		ldd r17,Z+13
 589:nmeap01.c     **** 	/* if there is a data element, use it */
 590:nmeap01.c     **** 	if (rmc != 0) {
 591:nmeap01.c     **** 		/* extract data from the tokens */
 1950               		.stabn 68,0,591,.LM167-nmeap_gprmc
 1951               	.LM167:
 1952 0962 0115      		cp r16,__zero_reg__
 1953 0964 1105      		cpc r17,__zero_reg__
 1954 0966 09F4      		brne .+2
 1955 0968 76C0      		rjmp .L134
 592:nmeap01.c     **** 		rmc->time       = atoi(context->token[1]);
 593:nmeap01.c     **** 		rmc->warn       = *context->token[2];
 1956               		.stabn 68,0,593,.LM168-nmeap_gprmc
 1957               	.LM168:
 1958 096a C058      		subi r28,lo8(-(384))
 1959 096c DE4F      		sbci r29,hi8(-(384))
 1960 096e 8991      		ld r24,Y+
 1961 0970 9991      		ld r25,Y+
 1962 0972 0E94 0000 		call atoi
 1963 0976 AA27      		clr r26
 1964 0978 97FD      		sbrc r25,7
 1965 097a A095      		com r26
 1966 097c BA2F      		mov r27,r26
 1967 097e F801      		movw r30,r16
 1968 0980 8083      		st Z,r24
 1969 0982 9183      		std Z+1,r25
 1970 0984 A283      		std Z+2,r26
 1971 0986 B383      		std Z+3,r27
 594:nmeap01.c     **** 		rmc->latitude  = nmeap_latitude(context->token[3],context->token[4]);
 1972               		.stabn 68,0,594,.LM169-nmeap_gprmc
GAS LISTING /var/tmp//cc112P7K.s 			page 48


 1973               	.LM169:
 1974 0988 E881      		ld r30,Y
 1975 098a F981      		ldd r31,Y+1
 1976 098c C258      		subi r28,lo8(-(-386))
 1977 098e D140      		sbci r29,hi8(-(-386))
 1978 0990 8081      		ld r24,Z
 1979 0992 F801      		movw r30,r16
 1980 0994 8483      		std Z+4,r24
 595:nmeap01.c     **** 		rmc->longitude = nmeap_longitude(context->token[5],context->token[6]);
 1981               		.stabn 68,0,595,.LM170-nmeap_gprmc
 1982               	.LM170:
 1983 0996 FE01      		movw r30,r28
 1984 0998 EA57      		subi r30,lo8(-(390))
 1985 099a FE4F      		sbci r31,hi8(-(390))
 1986 099c DE01      		movw r26,r28
 1987 099e AC57      		subi r26,lo8(-(388))
 1988 09a0 BE4F      		sbci r27,hi8(-(388))
 1989 09a2 6081      		ld r22,Z
 1990 09a4 7181      		ldd r23,Z+1
 1991 09a6 8D91      		ld r24,X+
 1992 09a8 9C91      		ld r25,X
 1993 09aa 0E94 0000 		call nmeap_latitude
 1994 09ae DC01      		movw r26,r24
 1995 09b0 CB01      		movw r24,r22
 1996 09b2 F801      		movw r30,r16
 1997 09b4 8583      		std Z+5,r24
 1998 09b6 9683      		std Z+6,r25
 1999 09b8 A783      		std Z+7,r26
 2000 09ba B087      		std Z+8,r27
 596:nmeap01.c     **** 		rmc->speed      = atof(context->token[7]);
 2001               		.stabn 68,0,596,.LM171-nmeap_gprmc
 2002               	.LM171:
 2003 09bc FE01      		movw r30,r28
 2004 09be E657      		subi r30,lo8(-(394))
 2005 09c0 FE4F      		sbci r31,hi8(-(394))
 2006 09c2 DE01      		movw r26,r28
 2007 09c4 A857      		subi r26,lo8(-(392))
 2008 09c6 BE4F      		sbci r27,hi8(-(392))
 2009 09c8 6081      		ld r22,Z
 2010 09ca 7181      		ldd r23,Z+1
 2011 09cc 8D91      		ld r24,X+
 2012 09ce 9C91      		ld r25,X
 2013 09d0 0E94 0000 		call nmeap_longitude
 2014 09d4 DC01      		movw r26,r24
 2015 09d6 CB01      		movw r24,r22
 2016 09d8 F801      		movw r30,r16
 2017 09da 8187      		std Z+9,r24
 2018 09dc 9287      		std Z+10,r25
 2019 09de A387      		std Z+11,r26
 2020 09e0 B487      		std Z+12,r27
 597:nmeap01.c     **** 		rmc->course     = atof(context->token[8]);
 2021               		.stabn 68,0,597,.LM172-nmeap_gprmc
 2022               	.LM172:
 2023 09e2 FE01      		movw r30,r28
 2024 09e4 E457      		subi r30,lo8(-(396))
 2025 09e6 FE4F      		sbci r31,hi8(-(396))
 2026 09e8 8081      		ld r24,Z
GAS LISTING /var/tmp//cc112P7K.s 			page 49


 2027 09ea 9181      		ldd r25,Z+1
 2028 09ec 0E94 0000 		call atof
 2029 09f0 DC01      		movw r26,r24
 2030 09f2 CB01      		movw r24,r22
 2031 09f4 F801      		movw r30,r16
 2032 09f6 8587      		std Z+13,r24
 2033 09f8 9687      		std Z+14,r25
 2034 09fa A787      		std Z+15,r26
 2035 09fc B08B      		std Z+16,r27
 598:nmeap01.c     **** 		rmc->date       = atoi(context->token[9]);
 2036               		.stabn 68,0,598,.LM173-nmeap_gprmc
 2037               	.LM173:
 2038 09fe FE01      		movw r30,r28
 2039 0a00 E257      		subi r30,lo8(-(398))
 2040 0a02 FE4F      		sbci r31,hi8(-(398))
 2041 0a04 8081      		ld r24,Z
 2042 0a06 9181      		ldd r25,Z+1
 2043 0a08 0E94 0000 		call atof
 2044 0a0c DC01      		movw r26,r24
 2045 0a0e CB01      		movw r24,r22
 2046 0a10 F801      		movw r30,r16
 2047 0a12 818B      		std Z+17,r24
 2048 0a14 928B      		std Z+18,r25
 2049 0a16 A38B      		std Z+19,r26
 2050 0a18 B48B      		std Z+20,r27
 599:nmeap01.c     **** 		rmc->magvar     = atof(context->token[10]);
 2051               		.stabn 68,0,599,.LM174-nmeap_gprmc
 2052               	.LM174:
 2053 0a1a FE01      		movw r30,r28
 2054 0a1c E057      		subi r30,lo8(-(400))
 2055 0a1e FE4F      		sbci r31,hi8(-(400))
 2056 0a20 8081      		ld r24,Z
 2057 0a22 9181      		ldd r25,Z+1
 2058 0a24 0E94 0000 		call atoi
 2059 0a28 AA27      		clr r26
 2060 0a2a 97FD      		sbrc r25,7
 2061 0a2c A095      		com r26
 2062 0a2e BA2F      		mov r27,r26
 2063 0a30 F801      		movw r30,r16
 2064 0a32 858B      		std Z+21,r24
 2065 0a34 968B      		std Z+22,r25
 2066 0a36 A78B      		std Z+23,r26
 2067 0a38 B08F      		std Z+24,r27
 600:nmeap01.c     **** 	}
 2068               		.stabn 68,0,600,.LM175-nmeap_gprmc
 2069               	.LM175:
 2070 0a3a FE01      		movw r30,r28
 2071 0a3c EE56      		subi r30,lo8(-(402))
 2072 0a3e FE4F      		sbci r31,hi8(-(402))
 2073 0a40 8081      		ld r24,Z
 2074 0a42 9181      		ldd r25,Z+1
 2075 0a44 0E94 0000 		call atof
 2076 0a48 DC01      		movw r26,r24
 2077 0a4a CB01      		movw r24,r22
 2078 0a4c F801      		movw r30,r16
 2079 0a4e 818F      		std Z+25,r24
 2080 0a50 928F      		std Z+26,r25
GAS LISTING /var/tmp//cc112P7K.s 			page 50


 2081 0a52 A38F      		std Z+27,r26
 2082 0a54 B48F      		std Z+28,r27
 2083               	.L134:
 601:nmeap01.c     **** 
 602:nmeap01.c     **** #ifndef NDEBUG    
 603:nmeap01.c     ****     /* print raw input string */
 604:nmeap01.c     ****     printf("%s",context->debug_input);
 605:nmeap01.c     ****     
 2084               		.stabn 68,0,605,.LM176-nmeap_gprmc
 2085               	.LM176:
 2086 0a56 C453      		subi r28,lo8(-(460))
 2087 0a58 DE4F      		sbci r29,hi8(-(460))
 2088 0a5a DF93      		push r29
 2089 0a5c CF93      		push r28
 2090 0a5e 80E0      		ldi r24,lo8(.LC0)
 2091 0a60 90E0      		ldi r25,hi8(.LC0)
 2092 0a62 9F93      		push r25
 2093 0a64 8F93      		push r24
 2094 0a66 0E94 0000 		call printf
 606:nmeap01.c     ****     /* print some validation data */
 607:nmeap01.c     ****     printf("%s==%s %02x==%02x\n",context->input_name,sentence->name,context->icks,context->ccks);
 608:nmeap01.c     ****     
 2095               		.stabn 68,0,608,.LM177-nmeap_gprmc
 2096               	.LM177:
 2097 0a6a CF54      		subi r28,lo8(-(-79))
 2098 0a6c D040      		sbci r29,hi8(-(-79))
 2099 0a6e 8881      		ld r24,Y
 2100 0a70 9927      		clr r25
 2101 0a72 87FD      		sbrc r24,7
 2102 0a74 9095      		com r25
 2103 0a76 9F93      		push r25
 2104 0a78 8F93      		push r24
 2105 0a7a 8A91      		ld r24,-Y
 2106 0a7c 9927      		clr r25
 2107 0a7e 87FD      		sbrc r24,7
 2108 0a80 9095      		com r25
 2109 0a82 9F93      		push r25
 2110 0a84 8F93      		push r24
 2111 0a86 9F92      		push r9
 2112 0a88 8F92      		push r8
 2113 0a8a 2697      		sbiw r28,6
 2114 0a8c DF93      		push r29
 2115 0a8e CF93      		push r28
 2116 0a90 C657      		subi r28,lo8(-(-374))
 2117 0a92 D140      		sbci r29,hi8(-(-374))
 2118 0a94 80E0      		ldi r24,lo8(.LC1)
 2119 0a96 90E0      		ldi r25,hi8(.LC1)
 2120 0a98 9F93      		push r25
 2121 0a9a 8F93      		push r24
 2122 0a9c 0E94 0000 		call printf
 609:nmeap01.c     ****     /* print the tokens */
 610:nmeap01.c     ****     for(i=0;i<context->tokens;i++) {
 611:nmeap01.c     ****         printf("%d:%s\n",i,context->token[i]);
 2123               		.stabn 68,0,611,.LM178-nmeap_gprmc
 2124               	.LM178:
 2125 0aa0 EE24      		clr r14
 2126 0aa2 FF24      		clr r15
GAS LISTING /var/tmp//cc112P7K.s 			page 51


 2127 0aa4 8DB7      		in r24,__SP_L__
 2128 0aa6 9EB7      		in r25,__SP_H__
 2129 0aa8 0E96      		adiw r24,14
 2130 0aaa 0FB6      		in __tmp_reg__,__SREG__
 2131 0aac F894      		cli
 2132 0aae 9EBF      		out __SP_H__,r25
 2133 0ab0 0FBE      		out __SREG__,__tmp_reg__
 2134 0ab2 8DBF      		out __SP_L__,r24
 2135 0ab4 6EEA      		ldi r22,lo8(430)
 2136 0ab6 A62E      		mov r10,r22
 2137 0ab8 61E0      		ldi r22,hi8(430)
 2138 0aba B62E      		mov r11,r22
 2139 0abc AC0E      		add r10,r28
 2140 0abe BD1E      		adc r11,r29
 2141 0ac0 F501      		movw r30,r10
 2142 0ac2 8081      		ld r24,Z
 2143 0ac4 9181      		ldd r25,Z+1
 2144 0ac6 E816      		cp r14,r24
 2145 0ac8 F906      		cpc r15,r25
 2146 0aca 2CF5      		brge .L141
 2147 0acc 5EE7      		ldi r21,lo8(382)
 2148 0ace C52E      		mov r12,r21
 2149 0ad0 51E0      		ldi r21,hi8(382)
 2150 0ad2 D52E      		mov r13,r21
 2151 0ad4 CC0E      		add r12,r28
 2152 0ad6 DD1E      		adc r13,r29
 2153               	.L138:
 612:nmeap01.c     ****     }
 2154               		.stabn 68,0,612,.LM179-nmeap_gprmc
 2155               	.LM179:
 2156 0ad8 F601      		movw r30,r12
 2157 0ada 8191      		ld r24,Z+
 2158 0adc 9191      		ld r25,Z+
 2159 0ade 6F01      		movw r12,r30
 2160 0ae0 9F93      		push r25
 2161 0ae2 8F93      		push r24
 2162 0ae4 FF92      		push r15
 2163 0ae6 EF92      		push r14
 2164 0ae8 80E0      		ldi r24,lo8(.LC2)
 2165 0aea 90E0      		ldi r25,hi8(.LC2)
 2166 0aec 9F93      		push r25
 2167 0aee 8F93      		push r24
 2168 0af0 0E94 0000 		call printf
 2169               		.stabn 68,0,611,.LM180-nmeap_gprmc
 2170               	.LM180:
 2171 0af4 8DB7      		in r24,__SP_L__
 2172 0af6 9EB7      		in r25,__SP_H__
 2173 0af8 0696      		adiw r24,6
 2174 0afa 0FB6      		in __tmp_reg__,__SREG__
 2175 0afc F894      		cli
 2176 0afe 9EBF      		out __SP_H__,r25
 2177 0b00 0FBE      		out __SREG__,__tmp_reg__
 2178 0b02 8DBF      		out __SP_L__,r24
 2179 0b04 0894      		sec
 2180 0b06 E11C      		adc r14,__zero_reg__
 2181 0b08 F11C      		adc r15,__zero_reg__
 2182 0b0a F501      		movw r30,r10
GAS LISTING /var/tmp//cc112P7K.s 			page 52


 2183 0b0c 8081      		ld r24,Z
 2184 0b0e 9181      		ldd r25,Z+1
 2185 0b10 E816      		cp r14,r24
 2186 0b12 F906      		cpc r15,r25
 2187 0b14 0CF3      		brlt .L138
 2188               	.L141:
 613:nmeap01.c     **** #endif   
 614:nmeap01.c     **** 
 615:nmeap01.c     ****     /* if the sentence has a callout, call it */
 616:nmeap01.c     ****     if (sentence->callout != 0) {
 617:nmeap01.c     ****         (*sentence->callout)(context,rmc,context->user_data);
 2189               		.stabn 68,0,617,.LM181-nmeap_gprmc
 2190               	.LM181:
 2191 0b16 F401      		movw r30,r8
 2192 0b18 2285      		ldd r18,Z+10
 2193 0b1a 3385      		ldd r19,Z+11
 2194 0b1c 2115      		cp r18,__zero_reg__
 2195 0b1e 3105      		cpc r19,__zero_reg__
 2196 0b20 49F0      		breq .L139
 618:nmeap01.c     ****     }
 2197               		.stabn 68,0,618,.LM182-nmeap_gprmc
 2198               	.LM182:
 2199 0b22 FE01      		movw r30,r28
 2200 0b24 E453      		subi r30,lo8(-(716))
 2201 0b26 FD4F      		sbci r31,hi8(-(716))
 2202 0b28 4081      		ld r20,Z
 2203 0b2a 5181      		ldd r21,Z+1
 2204 0b2c B801      		movw r22,r16
 2205 0b2e CE01      		movw r24,r28
 2206 0b30 F901      		movw r30,r18
 2207 0b32 0995      		icall
 2208               	.L139:
 619:nmeap01.c     ****     
 620:nmeap01.c     ****     return NMEAP_GPRMC;
 621:nmeap01.c     **** }
 622:nmeap01.c     **** 
 2209               		.stabn 68,0,622,.LM183-nmeap_gprmc
 2210               	.LM183:
 2211 0b34 82E0      		ldi r24,lo8(2)
 2212 0b36 90E0      		ldi r25,hi8(2)
 2213               	/* epilogue: frame size=0 */
 2214 0b38 DF91      		pop r29
 2215 0b3a CF91      		pop r28
 2216 0b3c 1F91      		pop r17
 2217 0b3e 0F91      		pop r16
 2218 0b40 FF90      		pop r15
 2219 0b42 EF90      		pop r14
 2220 0b44 DF90      		pop r13
 2221 0b46 CF90      		pop r12
 2222 0b48 BF90      		pop r11
 2223 0b4a AF90      		pop r10
 2224 0b4c 9F90      		pop r9
 2225 0b4e 8F90      		pop r8
 2226 0b50 0895      		ret
 2227               	/* epilogue end (size=13) */
 2228               	/* function nmeap_gprmc size 265 (240) */
 2229               		.size	nmeap_gprmc, .-nmeap_gprmc
GAS LISTING /var/tmp//cc112P7K.s 			page 53


 2230               		.stabs	"i:r(0,1)",64,0,584,14
 2231               		.stabs	"rmc:r(0,28)=*(12,10)",64,0,588,16
 2232               		.stabn	192,0,0,nmeap_gprmc-nmeap_gprmc
 2233               		.stabn	224,0,0,.Lscope10-nmeap_gprmc
 2234               	.Lscope10:
 2235               		.stabs	"",36,0,0,.Lscope10-nmeap_gprmc
 2236               		.stabs	"dist:F(0,13)",36,0,4,dist
 2237               		.stabs	"from:p(20,1)",160,0,4,1
 2238               		.stabs	"to:p(20,1)",160,0,4,9
 2239               	.global	dist
 2240               		.type	dist, @function
 2241               	dist:
 2242               		.stabs	"gpsmath.c",132,0,0,.Ltext16
 2243               	.Ltext16:
   1:gpsmath.c     **** #include <gpsmath.h>
   2:gpsmath.c     **** 
   3:gpsmath.c     **** 
   4:gpsmath.c     **** double dist(struct waypoint from, struct waypoint to){
 2244               		.stabn 68,0,4,.LM184-dist
 2245               	.LM184:
 2246               	/* prologue: frame size=24 */
 2247 0b52 2F92      		push r2
 2248 0b54 3F92      		push r3
 2249 0b56 4F92      		push r4
 2250 0b58 5F92      		push r5
 2251 0b5a 6F92      		push r6
 2252 0b5c 7F92      		push r7
 2253 0b5e 8F92      		push r8
 2254 0b60 9F92      		push r9
 2255 0b62 AF92      		push r10
 2256 0b64 BF92      		push r11
 2257 0b66 CF92      		push r12
 2258 0b68 DF92      		push r13
 2259 0b6a EF92      		push r14
 2260 0b6c FF92      		push r15
 2261 0b6e 0F93      		push r16
 2262 0b70 1F93      		push r17
 2263 0b72 CF93      		push r28
 2264 0b74 DF93      		push r29
 2265 0b76 CDB7      		in r28,__SP_L__
 2266 0b78 DEB7      		in r29,__SP_H__
 2267 0b7a 6897      		sbiw r28,24
 2268 0b7c 0FB6      		in __tmp_reg__,__SREG__
 2269 0b7e F894      		cli
 2270 0b80 DEBF      		out __SP_H__,r29
 2271 0b82 0FBE      		out __SREG__,__tmp_reg__
 2272 0b84 CDBF      		out __SP_L__,r28
 2273               	/* prologue end (size=26) */
 2274 0b86 2983      		std Y+1,r18
 2275 0b88 3A83      		std Y+2,r19
 2276 0b8a 4B83      		std Y+3,r20
 2277 0b8c 5C83      		std Y+4,r21
 2278 0b8e 6D83      		std Y+5,r22
 2279 0b90 7E83      		std Y+6,r23
 2280 0b92 8F83      		std Y+7,r24
 2281 0b94 9887      		std Y+8,r25
 2282 0b96 A986      		std Y+9,r10
GAS LISTING /var/tmp//cc112P7K.s 			page 54


 2283 0b98 BA86      		std Y+10,r11
 2284 0b9a CB86      		std Y+11,r12
 2285 0b9c DC86      		std Y+12,r13
 2286 0b9e ED86      		std Y+13,r14
 2287 0ba0 FE86      		std Y+14,r15
 2288 0ba2 0F87      		std Y+15,r16
 2289 0ba4 188B      		std Y+16,r17
   5:gpsmath.c     ****     double a, delta_lat, delta_lon;
   6:gpsmath.c     **** 
   7:gpsmath.c     ****     from.lat = from.lat* M_PI / 180;
 2290               		.stabn 68,0,7,.LM185-dist
 2291               	.LM185:
 2292 0ba6 8981      		ldd r24,Y+1
 2293 0ba8 9A81      		ldd r25,Y+2
 2294 0baa AB81      		ldd r26,Y+3
 2295 0bac BC81      		ldd r27,Y+4
 2296 0bae 2BED      		ldi r18,lo8(0x40490fdb)
 2297 0bb0 3FE0      		ldi r19,hi8(0x40490fdb)
 2298 0bb2 49E4      		ldi r20,hlo8(0x40490fdb)
 2299 0bb4 50E4      		ldi r21,hhi8(0x40490fdb)
 2300 0bb6 BC01      		movw r22,r24
 2301 0bb8 CD01      		movw r24,r26
 2302 0bba 0E94 0000 		call __mulsf3
 2303 0bbe DC01      		movw r26,r24
 2304 0bc0 CB01      		movw r24,r22
 2305 0bc2 20E0      		ldi r18,lo8(0x43340000)
 2306 0bc4 30E0      		ldi r19,hi8(0x43340000)
 2307 0bc6 44E3      		ldi r20,hlo8(0x43340000)
 2308 0bc8 53E4      		ldi r21,hhi8(0x43340000)
 2309 0bca BC01      		movw r22,r24
 2310 0bcc CD01      		movw r24,r26
 2311 0bce 0E94 0000 		call __divsf3
 2312 0bd2 698B      		std Y+17,r22
 2313 0bd4 7A8B      		std Y+18,r23
 2314 0bd6 8B8B      		std Y+19,r24
 2315 0bd8 9C8B      		std Y+20,r25
 2316 0bda 6983      		std Y+1,r22
 2317 0bdc 7A83      		std Y+2,r23
 2318 0bde 8B83      		std Y+3,r24
 2319 0be0 9C83      		std Y+4,r25
   8:gpsmath.c     ****     to.lat = to.lat*M_PI/180;
 2320               		.stabn 68,0,8,.LM186-dist
 2321               	.LM186:
 2322 0be2 8985      		ldd r24,Y+9
 2323 0be4 9A85      		ldd r25,Y+10
 2324 0be6 AB85      		ldd r26,Y+11
 2325 0be8 BC85      		ldd r27,Y+12
 2326 0bea 2BED      		ldi r18,lo8(0x40490fdb)
 2327 0bec 3FE0      		ldi r19,hi8(0x40490fdb)
 2328 0bee 49E4      		ldi r20,hlo8(0x40490fdb)
 2329 0bf0 50E4      		ldi r21,hhi8(0x40490fdb)
 2330 0bf2 BC01      		movw r22,r24
 2331 0bf4 CD01      		movw r24,r26
 2332 0bf6 0E94 0000 		call __mulsf3
 2333 0bfa DC01      		movw r26,r24
 2334 0bfc CB01      		movw r24,r22
 2335 0bfe 20E0      		ldi r18,lo8(0x43340000)
GAS LISTING /var/tmp//cc112P7K.s 			page 55


 2336 0c00 30E0      		ldi r19,hi8(0x43340000)
 2337 0c02 44E3      		ldi r20,hlo8(0x43340000)
 2338 0c04 53E4      		ldi r21,hhi8(0x43340000)
 2339 0c06 BC01      		movw r22,r24
 2340 0c08 CD01      		movw r24,r26
 2341 0c0a 0E94 0000 		call __divsf3
 2342 0c0e 1B01      		movw r2,r22
 2343 0c10 2C01      		movw r4,r24
 2344 0c12 6987      		std Y+9,r22
 2345 0c14 7A87      		std Y+10,r23
 2346 0c16 8B87      		std Y+11,r24
 2347 0c18 9C87      		std Y+12,r25
   9:gpsmath.c     ****     from.lon = from.lon*M_PI/180;
 2348               		.stabn 68,0,9,.LM187-dist
 2349               	.LM187:
 2350 0c1a 8D81      		ldd r24,Y+5
 2351 0c1c 9E81      		ldd r25,Y+6
 2352 0c1e AF81      		ldd r26,Y+7
 2353 0c20 B885      		ldd r27,Y+8
 2354 0c22 2BED      		ldi r18,lo8(0x40490fdb)
 2355 0c24 3FE0      		ldi r19,hi8(0x40490fdb)
 2356 0c26 49E4      		ldi r20,hlo8(0x40490fdb)
 2357 0c28 50E4      		ldi r21,hhi8(0x40490fdb)
 2358 0c2a BC01      		movw r22,r24
 2359 0c2c CD01      		movw r24,r26
 2360 0c2e 0E94 0000 		call __mulsf3
 2361 0c32 DC01      		movw r26,r24
 2362 0c34 CB01      		movw r24,r22
 2363 0c36 20E0      		ldi r18,lo8(0x43340000)
 2364 0c38 30E0      		ldi r19,hi8(0x43340000)
 2365 0c3a 44E3      		ldi r20,hlo8(0x43340000)
 2366 0c3c 53E4      		ldi r21,hhi8(0x43340000)
 2367 0c3e BC01      		movw r22,r24
 2368 0c40 CD01      		movw r24,r26
 2369 0c42 0E94 0000 		call __divsf3
 2370 0c46 3B01      		movw r6,r22
 2371 0c48 4C01      		movw r8,r24
 2372 0c4a 6D83      		std Y+5,r22
 2373 0c4c 7E83      		std Y+6,r23
 2374 0c4e 8F83      		std Y+7,r24
 2375 0c50 9887      		std Y+8,r25
  10:gpsmath.c     ****     to.lon = to.lon*M_PI/180;
 2376               		.stabn 68,0,10,.LM188-dist
 2377               	.LM188:
 2378 0c52 8D85      		ldd r24,Y+13
 2379 0c54 9E85      		ldd r25,Y+14
 2380 0c56 AF85      		ldd r26,Y+15
 2381 0c58 B889      		ldd r27,Y+16
 2382 0c5a 2BED      		ldi r18,lo8(0x40490fdb)
 2383 0c5c 3FE0      		ldi r19,hi8(0x40490fdb)
 2384 0c5e 49E4      		ldi r20,hlo8(0x40490fdb)
 2385 0c60 50E4      		ldi r21,hhi8(0x40490fdb)
 2386 0c62 BC01      		movw r22,r24
 2387 0c64 CD01      		movw r24,r26
 2388 0c66 0E94 0000 		call __mulsf3
 2389 0c6a DC01      		movw r26,r24
 2390 0c6c CB01      		movw r24,r22
GAS LISTING /var/tmp//cc112P7K.s 			page 56


 2391 0c6e 20E0      		ldi r18,lo8(0x43340000)
 2392 0c70 30E0      		ldi r19,hi8(0x43340000)
 2393 0c72 44E3      		ldi r20,hlo8(0x43340000)
 2394 0c74 53E4      		ldi r21,hhi8(0x43340000)
 2395 0c76 BC01      		movw r22,r24
 2396 0c78 CD01      		movw r24,r26
 2397 0c7a 0E94 0000 		call __divsf3
 2398 0c7e 7B01      		movw r14,r22
 2399 0c80 8C01      		movw r16,r24
 2400 0c82 6D87      		std Y+13,r22
 2401 0c84 7E87      		std Y+14,r23
 2402 0c86 8F87      		std Y+15,r24
 2403 0c88 988B      		std Y+16,r25
  11:gpsmath.c     ****     
  12:gpsmath.c     ****     delta_lat = to.lat - from.lat;
 2404               		.stabn 68,0,12,.LM189-dist
 2405               	.LM189:
 2406 0c8a 2989      		ldd r18,Y+17
 2407 0c8c 3A89      		ldd r19,Y+18
 2408 0c8e 4B89      		ldd r20,Y+19
 2409 0c90 5C89      		ldd r21,Y+20
 2410 0c92 C201      		movw r24,r4
 2411 0c94 B101      		movw r22,r2
 2412 0c96 0E94 0000 		call __subsf3
 2413 0c9a 5B01      		movw r10,r22
 2414 0c9c 6C01      		movw r12,r24
  13:gpsmath.c     ****     delta_lon = to.lon - from.lon;
 2415               		.stabn 68,0,13,.LM190-dist
 2416               	.LM190:
 2417 0c9e A401      		movw r20,r8
 2418 0ca0 9301      		movw r18,r6
 2419 0ca2 C801      		movw r24,r16
 2420 0ca4 B701      		movw r22,r14
 2421 0ca6 0E94 0000 		call __subsf3
 2422 0caa 3B01      		movw r6,r22
 2423 0cac 4C01      		movw r8,r24
  14:gpsmath.c     ****     
  15:gpsmath.c     ****     a = sin(delta_lat/2) * sin(delta_lat/2) + cos(from.lat) * cos(to.lat) * sin(delta_lon/2) * sin(
 2424               		.stabn 68,0,15,.LM191-dist
 2425               	.LM191:
 2426 0cae 20E0      		ldi r18,lo8(0x3f000000)
 2427 0cb0 30E0      		ldi r19,hi8(0x3f000000)
 2428 0cb2 40E0      		ldi r20,hlo8(0x3f000000)
 2429 0cb4 5FE3      		ldi r21,hhi8(0x3f000000)
 2430 0cb6 C601      		movw r24,r12
 2431 0cb8 B501      		movw r22,r10
 2432 0cba 0E94 0000 		call __mulsf3
 2433 0cbe DC01      		movw r26,r24
 2434 0cc0 CB01      		movw r24,r22
 2435 0cc2 BC01      		movw r22,r24
 2436 0cc4 CD01      		movw r24,r26
 2437 0cc6 0E94 0000 		call sin
 2438 0cca DC01      		movw r26,r24
 2439 0ccc CB01      		movw r24,r22
 2440 0cce 9C01      		movw r18,r24
 2441 0cd0 AD01      		movw r20,r26
 2442 0cd2 BC01      		movw r22,r24
GAS LISTING /var/tmp//cc112P7K.s 			page 57


 2443 0cd4 CD01      		movw r24,r26
 2444 0cd6 0E94 0000 		call __mulsf3
 2445 0cda 6D8B      		std Y+21,r22
 2446 0cdc 7E8B      		std Y+22,r23
 2447 0cde 8F8B      		std Y+23,r24
 2448 0ce0 988F      		std Y+24,r25
 2449 0ce2 6989      		ldd r22,Y+17
 2450 0ce4 7A89      		ldd r23,Y+18
 2451 0ce6 8B89      		ldd r24,Y+19
 2452 0ce8 9C89      		ldd r25,Y+20
 2453 0cea 0E94 0000 		call cos
 2454 0cee 7B01      		movw r14,r22
 2455 0cf0 8C01      		movw r16,r24
 2456 0cf2 C201      		movw r24,r4
 2457 0cf4 B101      		movw r22,r2
 2458 0cf6 0E94 0000 		call cos
 2459 0cfa DC01      		movw r26,r24
 2460 0cfc CB01      		movw r24,r22
 2461 0cfe 9C01      		movw r18,r24
 2462 0d00 AD01      		movw r20,r26
 2463 0d02 C801      		movw r24,r16
 2464 0d04 B701      		movw r22,r14
 2465 0d06 0E94 0000 		call __mulsf3
 2466 0d0a 5B01      		movw r10,r22
 2467 0d0c 6C01      		movw r12,r24
 2468 0d0e 20E0      		ldi r18,lo8(0x3f000000)
 2469 0d10 30E0      		ldi r19,hi8(0x3f000000)
 2470 0d12 40E0      		ldi r20,hlo8(0x3f000000)
 2471 0d14 5FE3      		ldi r21,hhi8(0x3f000000)
 2472 0d16 C401      		movw r24,r8
 2473 0d18 B301      		movw r22,r6
 2474 0d1a 0E94 0000 		call __mulsf3
 2475 0d1e DC01      		movw r26,r24
 2476 0d20 CB01      		movw r24,r22
 2477 0d22 BC01      		movw r22,r24
 2478 0d24 CD01      		movw r24,r26
 2479 0d26 0E94 0000 		call sin
 2480 0d2a 7B01      		movw r14,r22
 2481 0d2c 8C01      		movw r16,r24
 2482 0d2e 9B01      		movw r18,r22
 2483 0d30 AC01      		movw r20,r24
 2484 0d32 C601      		movw r24,r12
 2485 0d34 B501      		movw r22,r10
 2486 0d36 0E94 0000 		call __mulsf3
 2487 0d3a DC01      		movw r26,r24
 2488 0d3c CB01      		movw r24,r22
 2489 0d3e A801      		movw r20,r16
 2490 0d40 9701      		movw r18,r14
 2491 0d42 BC01      		movw r22,r24
 2492 0d44 CD01      		movw r24,r26
 2493 0d46 0E94 0000 		call __mulsf3
 2494 0d4a DC01      		movw r26,r24
 2495 0d4c CB01      		movw r24,r22
 2496 0d4e 9C01      		movw r18,r24
 2497 0d50 AD01      		movw r20,r26
 2498 0d52 6D89      		ldd r22,Y+21
 2499 0d54 7E89      		ldd r23,Y+22
GAS LISTING /var/tmp//cc112P7K.s 			page 58


 2500 0d56 8F89      		ldd r24,Y+23
 2501 0d58 988D      		ldd r25,Y+24
 2502 0d5a 0E94 0000 		call __addsf3
 2503 0d5e 5B01      		movw r10,r22
 2504 0d60 6C01      		movw r12,r24
  16:gpsmath.c     ****     a = 2 * atan2(sqrt(a), sqrt(1-a));
 2505               		.stabn 68,0,16,.LM192-dist
 2506               	.LM192:
 2507 0d62 9B01      		movw r18,r22
 2508 0d64 AC01      		movw r20,r24
 2509 0d66 60E0      		ldi r22,lo8(0x3f800000)
 2510 0d68 70E0      		ldi r23,hi8(0x3f800000)
 2511 0d6a 80E8      		ldi r24,hlo8(0x3f800000)
 2512 0d6c 9FE3      		ldi r25,hhi8(0x3f800000)
 2513 0d6e 0E94 0000 		call __subsf3
 2514 0d72 DC01      		movw r26,r24
 2515 0d74 CB01      		movw r24,r22
 2516 0d76 BC01      		movw r22,r24
 2517 0d78 CD01      		movw r24,r26
 2518 0d7a 0E94 0000 		call sqrt
 2519 0d7e 7B01      		movw r14,r22
 2520 0d80 8C01      		movw r16,r24
 2521 0d82 C601      		movw r24,r12
 2522 0d84 B501      		movw r22,r10
 2523 0d86 0E94 0000 		call sqrt
 2524 0d8a DC01      		movw r26,r24
 2525 0d8c CB01      		movw r24,r22
 2526 0d8e A801      		movw r20,r16
 2527 0d90 9701      		movw r18,r14
 2528 0d92 BC01      		movw r22,r24
 2529 0d94 CD01      		movw r24,r26
 2530 0d96 0E94 0000 		call atan2
 2531 0d9a DC01      		movw r26,r24
 2532 0d9c CB01      		movw r24,r22
 2533 0d9e 9C01      		movw r18,r24
 2534 0da0 AD01      		movw r20,r26
 2535 0da2 BC01      		movw r22,r24
 2536 0da4 CD01      		movw r24,r26
 2537 0da6 0E94 0000 		call __addsf3
 2538 0daa DC01      		movw r26,r24
 2539 0dac CB01      		movw r24,r22
  17:gpsmath.c     ****     a = R * a;
 2540               		.stabn 68,0,17,.LM193-dist
 2541               	.LM193:
 2542 0dae 20E0      		ldi r18,lo8(0x45c71800)
 2543 0db0 38E1      		ldi r19,hi8(0x45c71800)
 2544 0db2 47EC      		ldi r20,hlo8(0x45c71800)
 2545 0db4 55E4      		ldi r21,hhi8(0x45c71800)
 2546 0db6 BC01      		movw r22,r24
 2547 0db8 CD01      		movw r24,r26
 2548 0dba 0E94 0000 		call __mulsf3
 2549 0dbe DC01      		movw r26,r24
 2550 0dc0 CB01      		movw r24,r22
  18:gpsmath.c     ****     
  19:gpsmath.c     ****     return a; //in km
  20:gpsmath.c     **** }
 2551               		.stabn 68,0,20,.LM194-dist
GAS LISTING /var/tmp//cc112P7K.s 			page 59


 2552               	.LM194:
 2553 0dc2 BC01      		movw r22,r24
 2554 0dc4 CD01      		movw r24,r26
 2555               	/* epilogue: frame size=24 */
 2556 0dc6 6896      		adiw r28,24
 2557 0dc8 0FB6      		in __tmp_reg__,__SREG__
 2558 0dca F894      		cli
 2559 0dcc DEBF      		out __SP_H__,r29
 2560 0dce 0FBE      		out __SREG__,__tmp_reg__
 2561 0dd0 CDBF      		out __SP_L__,r28
 2562 0dd2 DF91      		pop r29
 2563 0dd4 CF91      		pop r28
 2564 0dd6 1F91      		pop r17
 2565 0dd8 0F91      		pop r16
 2566 0dda FF90      		pop r15
 2567 0ddc EF90      		pop r14
 2568 0dde DF90      		pop r13
 2569 0de0 CF90      		pop r12
 2570 0de2 BF90      		pop r11
 2571 0de4 AF90      		pop r10
 2572 0de6 9F90      		pop r9
 2573 0de8 8F90      		pop r8
 2574 0dea 7F90      		pop r7
 2575 0dec 6F90      		pop r6
 2576 0dee 5F90      		pop r5
 2577 0df0 4F90      		pop r4
 2578 0df2 3F90      		pop r3
 2579 0df4 2F90      		pop r2
 2580 0df6 0895      		ret
 2581               	/* epilogue end (size=25) */
 2582               	/* function dist size 339 (288) */
 2583               		.size	dist, .-dist
 2584               	.Lscope11:
 2585               		.stabs	"",36,0,0,.Lscope11-dist
 2586               		.stabs	"bearing:F(0,13)",36,0,22,bearing
 2587               		.stabs	"from:p(20,1)",160,0,22,1
 2588               		.stabs	"to:p(20,1)",160,0,22,9
 2589               	.global	bearing
 2590               		.type	bearing, @function
 2591               	bearing:
  21:gpsmath.c     **** 
  22:gpsmath.c     **** double bearing(struct waypoint from, struct waypoint to){
 2592               		.stabn 68,0,22,.LM195-bearing
 2593               	.LM195:
 2594               	/* prologue: frame size=24 */
 2595 0df8 2F92      		push r2
 2596 0dfa 3F92      		push r3
 2597 0dfc 4F92      		push r4
 2598 0dfe 5F92      		push r5
 2599 0e00 6F92      		push r6
 2600 0e02 7F92      		push r7
 2601 0e04 8F92      		push r8
 2602 0e06 9F92      		push r9
 2603 0e08 AF92      		push r10
 2604 0e0a BF92      		push r11
 2605 0e0c CF92      		push r12
 2606 0e0e DF92      		push r13
GAS LISTING /var/tmp//cc112P7K.s 			page 60


 2607 0e10 EF92      		push r14
 2608 0e12 FF92      		push r15
 2609 0e14 0F93      		push r16
 2610 0e16 1F93      		push r17
 2611 0e18 CF93      		push r28
 2612 0e1a DF93      		push r29
 2613 0e1c CDB7      		in r28,__SP_L__
 2614 0e1e DEB7      		in r29,__SP_H__
 2615 0e20 6897      		sbiw r28,24
 2616 0e22 0FB6      		in __tmp_reg__,__SREG__
 2617 0e24 F894      		cli
 2618 0e26 DEBF      		out __SP_H__,r29
 2619 0e28 0FBE      		out __SREG__,__tmp_reg__
 2620 0e2a CDBF      		out __SP_L__,r28
 2621               	/* prologue end (size=26) */
 2622 0e2c 2983      		std Y+1,r18
 2623 0e2e 3A83      		std Y+2,r19
 2624 0e30 4B83      		std Y+3,r20
 2625 0e32 5C83      		std Y+4,r21
 2626 0e34 6D83      		std Y+5,r22
 2627 0e36 7E83      		std Y+6,r23
 2628 0e38 8F83      		std Y+7,r24
 2629 0e3a 9887      		std Y+8,r25
 2630 0e3c A986      		std Y+9,r10
 2631 0e3e BA86      		std Y+10,r11
 2632 0e40 CB86      		std Y+11,r12
 2633 0e42 DC86      		std Y+12,r13
 2634 0e44 ED86      		std Y+13,r14
 2635 0e46 FE86      		std Y+14,r15
 2636 0e48 0F87      		std Y+15,r16
 2637 0e4a 188B      		std Y+16,r17
  23:gpsmath.c     ****     double a,b;
  24:gpsmath.c     ****     
  25:gpsmath.c     ****     from.lat = from.lat* M_PI / 180;
 2638               		.stabn 68,0,25,.LM196-bearing
 2639               	.LM196:
 2640 0e4c 8981      		ldd r24,Y+1
 2641 0e4e 9A81      		ldd r25,Y+2
 2642 0e50 AB81      		ldd r26,Y+3
 2643 0e52 BC81      		ldd r27,Y+4
 2644 0e54 2BED      		ldi r18,lo8(0x40490fdb)
 2645 0e56 3FE0      		ldi r19,hi8(0x40490fdb)
 2646 0e58 49E4      		ldi r20,hlo8(0x40490fdb)
 2647 0e5a 50E4      		ldi r21,hhi8(0x40490fdb)
 2648 0e5c BC01      		movw r22,r24
 2649 0e5e CD01      		movw r24,r26
 2650 0e60 0E94 0000 		call __mulsf3
 2651 0e64 DC01      		movw r26,r24
 2652 0e66 CB01      		movw r24,r22
 2653 0e68 20E0      		ldi r18,lo8(0x43340000)
 2654 0e6a 30E0      		ldi r19,hi8(0x43340000)
 2655 0e6c 44E3      		ldi r20,hlo8(0x43340000)
 2656 0e6e 53E4      		ldi r21,hhi8(0x43340000)
 2657 0e70 BC01      		movw r22,r24
 2658 0e72 CD01      		movw r24,r26
 2659 0e74 0E94 0000 		call __divsf3
 2660 0e78 1B01      		movw r2,r22
GAS LISTING /var/tmp//cc112P7K.s 			page 61


 2661 0e7a 2C01      		movw r4,r24
 2662 0e7c 6983      		std Y+1,r22
 2663 0e7e 7A83      		std Y+2,r23
 2664 0e80 8B83      		std Y+3,r24
 2665 0e82 9C83      		std Y+4,r25
  26:gpsmath.c     ****     to.lat = to.lat*M_PI/180;
 2666               		.stabn 68,0,26,.LM197-bearing
 2667               	.LM197:
 2668 0e84 8985      		ldd r24,Y+9
 2669 0e86 9A85      		ldd r25,Y+10
 2670 0e88 AB85      		ldd r26,Y+11
 2671 0e8a BC85      		ldd r27,Y+12
 2672 0e8c 2BED      		ldi r18,lo8(0x40490fdb)
 2673 0e8e 3FE0      		ldi r19,hi8(0x40490fdb)
 2674 0e90 49E4      		ldi r20,hlo8(0x40490fdb)
 2675 0e92 50E4      		ldi r21,hhi8(0x40490fdb)
 2676 0e94 BC01      		movw r22,r24
 2677 0e96 CD01      		movw r24,r26
 2678 0e98 0E94 0000 		call __mulsf3
 2679 0e9c DC01      		movw r26,r24
 2680 0e9e CB01      		movw r24,r22
 2681 0ea0 20E0      		ldi r18,lo8(0x43340000)
 2682 0ea2 30E0      		ldi r19,hi8(0x43340000)
 2683 0ea4 44E3      		ldi r20,hlo8(0x43340000)
 2684 0ea6 53E4      		ldi r21,hhi8(0x43340000)
 2685 0ea8 BC01      		movw r22,r24
 2686 0eaa CD01      		movw r24,r26
 2687 0eac 0E94 0000 		call __divsf3
 2688 0eb0 5B01      		movw r10,r22
 2689 0eb2 6C01      		movw r12,r24
 2690 0eb4 6987      		std Y+9,r22
 2691 0eb6 7A87      		std Y+10,r23
 2692 0eb8 8B87      		std Y+11,r24
 2693 0eba 9C87      		std Y+12,r25
  27:gpsmath.c     ****     from.lon = from.lon*M_PI/180;
 2694               		.stabn 68,0,27,.LM198-bearing
 2695               	.LM198:
 2696 0ebc 8D81      		ldd r24,Y+5
 2697 0ebe 9E81      		ldd r25,Y+6
 2698 0ec0 AF81      		ldd r26,Y+7
 2699 0ec2 B885      		ldd r27,Y+8
 2700 0ec4 2BED      		ldi r18,lo8(0x40490fdb)
 2701 0ec6 3FE0      		ldi r19,hi8(0x40490fdb)
 2702 0ec8 49E4      		ldi r20,hlo8(0x40490fdb)
 2703 0eca 50E4      		ldi r21,hhi8(0x40490fdb)
 2704 0ecc BC01      		movw r22,r24
 2705 0ece CD01      		movw r24,r26
 2706 0ed0 0E94 0000 		call __mulsf3
 2707 0ed4 DC01      		movw r26,r24
 2708 0ed6 CB01      		movw r24,r22
 2709 0ed8 20E0      		ldi r18,lo8(0x43340000)
 2710 0eda 30E0      		ldi r19,hi8(0x43340000)
 2711 0edc 44E3      		ldi r20,hlo8(0x43340000)
 2712 0ede 53E4      		ldi r21,hhi8(0x43340000)
 2713 0ee0 BC01      		movw r22,r24
 2714 0ee2 CD01      		movw r24,r26
 2715 0ee4 0E94 0000 		call __divsf3
GAS LISTING /var/tmp//cc112P7K.s 			page 62


 2716 0ee8 7B01      		movw r14,r22
 2717 0eea 8C01      		movw r16,r24
 2718 0eec 6D83      		std Y+5,r22
 2719 0eee 7E83      		std Y+6,r23
 2720 0ef0 8F83      		std Y+7,r24
 2721 0ef2 9887      		std Y+8,r25
  28:gpsmath.c     ****     to.lon = to.lon*M_PI/180;
 2722               		.stabn 68,0,28,.LM199-bearing
 2723               	.LM199:
 2724 0ef4 8D85      		ldd r24,Y+13
 2725 0ef6 9E85      		ldd r25,Y+14
 2726 0ef8 AF85      		ldd r26,Y+15
 2727 0efa B889      		ldd r27,Y+16
 2728 0efc 2BED      		ldi r18,lo8(0x40490fdb)
 2729 0efe 3FE0      		ldi r19,hi8(0x40490fdb)
 2730 0f00 49E4      		ldi r20,hlo8(0x40490fdb)
 2731 0f02 50E4      		ldi r21,hhi8(0x40490fdb)
 2732 0f04 BC01      		movw r22,r24
 2733 0f06 CD01      		movw r24,r26
 2734 0f08 0E94 0000 		call __mulsf3
 2735 0f0c DC01      		movw r26,r24
 2736 0f0e CB01      		movw r24,r22
 2737 0f10 20E0      		ldi r18,lo8(0x43340000)
 2738 0f12 30E0      		ldi r19,hi8(0x43340000)
 2739 0f14 44E3      		ldi r20,hlo8(0x43340000)
 2740 0f16 53E4      		ldi r21,hhi8(0x43340000)
 2741 0f18 BC01      		movw r22,r24
 2742 0f1a CD01      		movw r24,r26
 2743 0f1c 0E94 0000 		call __divsf3
 2744 0f20 DC01      		movw r26,r24
 2745 0f22 CB01      		movw r24,r22
 2746 0f24 8D87      		std Y+13,r24
 2747 0f26 9E87      		std Y+14,r25
 2748 0f28 AF87      		std Y+15,r26
 2749 0f2a B88B      		std Y+16,r27
  29:gpsmath.c     ****     
  30:gpsmath.c     ****     a = sin(to.lon - from.lon)*cos(to.lat);
 2750               		.stabn 68,0,30,.LM200-bearing
 2751               	.LM200:
 2752 0f2c A801      		movw r20,r16
 2753 0f2e 9701      		movw r18,r14
 2754 0f30 BC01      		movw r22,r24
 2755 0f32 CD01      		movw r24,r26
 2756 0f34 0E94 0000 		call __subsf3
 2757 0f38 698B      		std Y+17,r22
 2758 0f3a 7A8B      		std Y+18,r23
 2759 0f3c 8B8B      		std Y+19,r24
 2760 0f3e 9C8B      		std Y+20,r25
 2761 0f40 0E94 0000 		call sin
 2762 0f44 7B01      		movw r14,r22
 2763 0f46 8C01      		movw r16,r24
 2764 0f48 C601      		movw r24,r12
 2765 0f4a B501      		movw r22,r10
 2766 0f4c 0E94 0000 		call cos
 2767 0f50 3B01      		movw r6,r22
 2768 0f52 4C01      		movw r8,r24
 2769 0f54 9B01      		movw r18,r22
GAS LISTING /var/tmp//cc112P7K.s 			page 63


 2770 0f56 AC01      		movw r20,r24
 2771 0f58 C801      		movw r24,r16
 2772 0f5a B701      		movw r22,r14
 2773 0f5c 0E94 0000 		call __mulsf3
 2774 0f60 6D8B      		std Y+21,r22
 2775 0f62 7E8B      		std Y+22,r23
 2776 0f64 8F8B      		std Y+23,r24
 2777 0f66 988F      		std Y+24,r25
  31:gpsmath.c     ****     b = cos(from.lat)*sin(to.lat) - sin(from.lat)*cos(to.lat)*cos(to.lon-from.lon);
 2778               		.stabn 68,0,31,.LM201-bearing
 2779               	.LM201:
 2780 0f68 C201      		movw r24,r4
 2781 0f6a B101      		movw r22,r2
 2782 0f6c 0E94 0000 		call cos
 2783 0f70 7B01      		movw r14,r22
 2784 0f72 8C01      		movw r16,r24
 2785 0f74 C601      		movw r24,r12
 2786 0f76 B501      		movw r22,r10
 2787 0f78 0E94 0000 		call sin
 2788 0f7c DC01      		movw r26,r24
 2789 0f7e CB01      		movw r24,r22
 2790 0f80 9C01      		movw r18,r24
 2791 0f82 AD01      		movw r20,r26
 2792 0f84 C801      		movw r24,r16
 2793 0f86 B701      		movw r22,r14
 2794 0f88 0E94 0000 		call __mulsf3
 2795 0f8c 5B01      		movw r10,r22
 2796 0f8e 6C01      		movw r12,r24
 2797 0f90 C201      		movw r24,r4
 2798 0f92 B101      		movw r22,r2
 2799 0f94 0E94 0000 		call sin
 2800 0f98 DC01      		movw r26,r24
 2801 0f9a CB01      		movw r24,r22
 2802 0f9c A401      		movw r20,r8
 2803 0f9e 9301      		movw r18,r6
 2804 0fa0 BC01      		movw r22,r24
 2805 0fa2 CD01      		movw r24,r26
 2806 0fa4 0E94 0000 		call __mulsf3
 2807 0fa8 7B01      		movw r14,r22
 2808 0faa 8C01      		movw r16,r24
 2809 0fac 6989      		ldd r22,Y+17
 2810 0fae 7A89      		ldd r23,Y+18
 2811 0fb0 8B89      		ldd r24,Y+19
 2812 0fb2 9C89      		ldd r25,Y+20
 2813 0fb4 0E94 0000 		call cos
 2814 0fb8 DC01      		movw r26,r24
 2815 0fba CB01      		movw r24,r22
 2816 0fbc 9C01      		movw r18,r24
 2817 0fbe AD01      		movw r20,r26
 2818 0fc0 C801      		movw r24,r16
 2819 0fc2 B701      		movw r22,r14
 2820 0fc4 0E94 0000 		call __mulsf3
 2821 0fc8 DC01      		movw r26,r24
 2822 0fca CB01      		movw r24,r22
 2823 0fcc 9C01      		movw r18,r24
 2824 0fce AD01      		movw r20,r26
 2825 0fd0 C601      		movw r24,r12
GAS LISTING /var/tmp//cc112P7K.s 			page 64


 2826 0fd2 B501      		movw r22,r10
 2827 0fd4 0E94 0000 		call __subsf3
 2828 0fd8 DC01      		movw r26,r24
 2829 0fda CB01      		movw r24,r22
  32:gpsmath.c     ****     a = atan2(a,b)*180/M_PI;
 2830               		.stabn 68,0,32,.LM202-bearing
 2831               	.LM202:
 2832 0fdc 9C01      		movw r18,r24
 2833 0fde AD01      		movw r20,r26
 2834 0fe0 6D89      		ldd r22,Y+21
 2835 0fe2 7E89      		ldd r23,Y+22
 2836 0fe4 8F89      		ldd r24,Y+23
 2837 0fe6 988D      		ldd r25,Y+24
 2838 0fe8 0E94 0000 		call atan2
 2839 0fec DC01      		movw r26,r24
 2840 0fee CB01      		movw r24,r22
 2841 0ff0 20E0      		ldi r18,lo8(0x43340000)
 2842 0ff2 30E0      		ldi r19,hi8(0x43340000)
 2843 0ff4 44E3      		ldi r20,hlo8(0x43340000)
 2844 0ff6 53E4      		ldi r21,hhi8(0x43340000)
 2845 0ff8 BC01      		movw r22,r24
 2846 0ffa CD01      		movw r24,r26
 2847 0ffc 0E94 0000 		call __mulsf3
 2848 1000 DC01      		movw r26,r24
 2849 1002 CB01      		movw r24,r22
 2850 1004 2BED      		ldi r18,lo8(0x40490fdb)
 2851 1006 3FE0      		ldi r19,hi8(0x40490fdb)
 2852 1008 49E4      		ldi r20,hlo8(0x40490fdb)
 2853 100a 50E4      		ldi r21,hhi8(0x40490fdb)
 2854 100c BC01      		movw r22,r24
 2855 100e CD01      		movw r24,r26
 2856 1010 0E94 0000 		call __divsf3
 2857 1014 DC01      		movw r26,r24
 2858 1016 CB01      		movw r24,r22
  33:gpsmath.c     ****     
  34:gpsmath.c     ****     return a; //in degrees
  35:gpsmath.c     **** }
 2859               		.stabn 68,0,35,.LM203-bearing
 2860               	.LM203:
 2861 1018 BC01      		movw r22,r24
 2862 101a CD01      		movw r24,r26
 2863               	/* epilogue: frame size=24 */
 2864 101c 6896      		adiw r28,24
 2865 101e 0FB6      		in __tmp_reg__,__SREG__
 2866 1020 F894      		cli
 2867 1022 DEBF      		out __SP_H__,r29
 2868 1024 0FBE      		out __SREG__,__tmp_reg__
 2869 1026 CDBF      		out __SP_L__,r28
 2870 1028 DF91      		pop r29
 2871 102a CF91      		pop r28
 2872 102c 1F91      		pop r17
 2873 102e 0F91      		pop r16
 2874 1030 FF90      		pop r15
 2875 1032 EF90      		pop r14
 2876 1034 DF90      		pop r13
 2877 1036 CF90      		pop r12
 2878 1038 BF90      		pop r11
GAS LISTING /var/tmp//cc112P7K.s 			page 65


 2879 103a AF90      		pop r10
 2880 103c 9F90      		pop r9
 2881 103e 8F90      		pop r8
 2882 1040 7F90      		pop r7
 2883 1042 6F90      		pop r6
 2884 1044 5F90      		pop r5
 2885 1046 4F90      		pop r4
 2886 1048 3F90      		pop r3
 2887 104a 2F90      		pop r2
 2888 104c 0895      		ret
 2889               	/* epilogue end (size=25) */
 2890               	/* function bearing size 299 (248) */
 2891               		.size	bearing, .-bearing
 2892               	.Lscope12:
 2893               		.stabs	"",36,0,0,.Lscope12-bearing
 2894               		.section	.progmem.data,"a",@progbits
 2895               		.type	__c.0, @object
 2896               		.size	__c.0, 13
 2897               	__c.0:
 2898 0000 0D0A 4750 		.string	"\r\nGPS TEST\r\n"
 2898      5320 5445 
 2898      5354 0D0A 
 2898      00
 2899               		.type	__c.1, @object
 2900               		.size	__c.1, 14
 2901               	__c.1:
 2902 000d 7365 7420 		.string	"set handler\r\n"
 2902      6861 6E64 
 2902      6C65 720D 
 2902      0A00 
 2903               		.type	__c.2, @object
 2904               		.size	__c.2, 15
 2905               	__c.2:
 2906 001b 6E6D 6561 		.string	"nmeap_init %d\n"
 2906      705F 696E 
 2906      6974 2025 
 2906      640A 00
 2907               		.type	__c.3, @object
 2908               		.size	__c.3, 18
 2909               	__c.3:
 2910 002a 6E6D 6561 		.string	"nmeap_add GGA %d\n"
 2910      705F 6164 
 2910      6420 4747 
 2910      4120 2564 
 2910      0A00 
 2911               		.type	__c.4, @object
 2912               		.size	__c.4, 18
 2913               	__c.4:
 2914 003c 6E6D 6561 		.string	"nmeap_add RMC %d\n"
 2914      705F 6164 
 2914      6420 524D 
 2914      4320 2564 
 2914      0A00 
 2915               		.type	__c.5, @object
 2916               		.size	__c.5, 4
 2917               	__c.5:
 2918 004e 4747 4100 		.string	"GGA"
GAS LISTING /var/tmp//cc112P7K.s 			page 66


 2919               		.type	__c.6, @object
 2920               		.size	__c.6, 7
 2921               	__c.6:
 2922 0052 094C 6174 		.string	"\tLat: "
 2922      3A20 00
 2923               		.type	__c.7, @object
 2924               		.size	__c.7, 7
 2925               	__c.7:
 2926 0059 204C 6F6E 		.string	" Lon: "
 2926      3A20 00
 2927               		.type	__c.8, @object
 2928               		.size	__c.8, 7
 2929               	__c.8:
 2930 0060 2041 6C74 		.string	" Alt: "
 2930      3A20 00
 2931               		.type	__c.9, @object
 2932               		.size	__c.9, 3
 2933               	__c.9:
 2934 0067 0D0A 00   		.string	"\r\n"
 2935               		.type	__c.10, @object
 2936               		.size	__c.10, 18
 2937               	__c.10:
 2938 006a 4469 7374 		.string	"Dist to 77 (km): "
 2938      2074 6F20 
 2938      3737 2028 
 2938      6B6D 293A 
 2938      2000 
 2939               		.type	__c.11, @object
 2940               		.size	__c.11, 3
 2941               	__c.11:
 2942 007c 0D0A 00   		.string	"\r\n"
 2943               		.type	__c.12, @object
 2944               		.size	__c.12, 22
 2945               	__c.12:
 2946 007f 4265 6172 		.string	"Bearing to 77 (deg): "
 2946      696E 6720 
 2946      746F 2037 
 2946      3720 2864 
 2946      6567 293A 
 2947               		.type	__c.13, @object
 2948               		.size	__c.13, 5
 2949               	__c.13:
 2950 0095 0D0A 0D0A 		.string	"\r\n\r\n"
 2950      00
 2951               		.type	__c.14, @object
 2952               		.size	__c.14, 4
 2953               	__c.14:
 2954 009a 524D 4300 		.string	"RMC"
 2955               		.type	__c.15, @object
 2956               		.size	__c.15, 12
 2957               	__c.15:
 2958 009e 2056 656C 		.string	" Vel (kt): "
 2958      2028 6B74 
 2958      293A 2000 
 2959               		.type	__c.16, @object
 2960               		.size	__c.16, 3
 2961               	__c.16:
GAS LISTING /var/tmp//cc112P7K.s 			page 67


 2962 00aa 0D0A 00   		.string	"\r\n"
 2963               		.data
 2964               	.LC3:
 2965 001d 4750 4747 		.string	"GPGGA"
 2965      4100 
 2966               	.LC4:
 2967 0023 4750 524D 		.string	"GPRMC"
 2967      4300 
 2968               		.text
 2969               		.stabs	"main:F(0,1)",36,0,30,main
 2970               	.global	main
 2971               		.type	main, @function
 2972               	main:
 2973               		.stabs	"gpstest.c",132,0,0,.Ltext17
 2974               	.Ltext17:
   1:gpstest.c     **** //Integration test of GPs nmea parse code with No.6
   2:gpstest.c     **** //Last Modified 19Sep06 jlev
   3:gpstest.c     ****  
   4:gpstest.c     **** //----- Include Files ---------------------------------------------------------
   5:gpstest.c     **** #include <avr/io.h>		// include I/O definitions (port names, pin names, etc)
   6:gpstest.c     **** #include <avr/signal.h>	// include "signal" names (interrupt names)
   7:gpstest.c     **** #include <avr/interrupt.h>	// include interrupt support
   8:gpstest.c     **** #include "uart.h"		// include uart function library
   9:gpstest.c     **** #include "rprintf.h"	// include printf function library
  10:gpstest.c     **** #include "timer.h"		// include timer function library
  11:gpstest.c     **** #include "global.h"		// include our global settings
  12:gpstest.c     **** 
  13:gpstest.c     **** //our nmea includes
  14:gpstest.c     **** #include "nmeap.h"
  15:gpstest.c     **** #include "nmeap_def.h"
  16:gpstest.c     **** #include "nmeap01.c"
  17:gpstest.c     **** #include "gpsmath.c"
  18:gpstest.c     **** 
  19:gpstest.c     **** static nmeap_context_t nmea;	//parser context
  20:gpstest.c     **** static int user_data;			//not sure what this is for...
  21:gpstest.c     **** static nmeap_gga_t     gga;     //data buffer for GGA sentences
  22:gpstest.c     **** static nmeap_rmc_t     rmc;     //data buffer for RMC sentences
  23:gpstest.c     **** 
  24:gpstest.c     **** static cBuffer gpsBuffer; //serial receive buffer
  25:gpstest.c     **** static char gpsBufferData[UART_RX_BUFFER_SIZE]; //allocate space in ram for buffer
  26:gpstest.c     **** void addToBuffer(unsigned char ch); //the interrupt handler
  27:gpstest.c     **** 
  28:gpstest.c     **** //----- Begin Code ------------------------------------------------------------
  29:gpstest.c     **** int main(void)
  30:gpstest.c     **** {
 2975               		.stabn 68,0,30,.LM204-main
 2976               	.LM204:
 2977               	/* prologue: frame size=16 */
 2978 104e C0E0      		ldi r28,lo8(__stack - 16)
 2979 1050 D0E0      		ldi r29,hi8(__stack - 16)
 2980 1052 DEBF      		out __SP_H__,r29
 2981 1054 CDBF      		out __SP_L__,r28
 2982               	/* prologue end (size=4) */
  31:gpstest.c     **** 	int status;
  32:gpstest.c     ****     // Test of csik's gps math code
  33:gpstest.c     ****     struct waypoint from,to;
  34:gpstest.c     ****     //from.lat = 50.0912;
GAS LISTING /var/tmp//cc112P7K.s 			page 68


  35:gpstest.c     ****     //from.lon = -001.50;
  36:gpstest.c     ****     // set when we get valid GPS
  37:gpstest.c     **** 	to.lat = 42.359051;
 2983               		.stabn 68,0,37,.LM205-main
 2984               	.LM205:
 2985 1056 8BEA      		ldi r24,lo8(0x42296fab)
 2986 1058 9FE6      		ldi r25,hi8(0x42296fab)
 2987 105a A9E2      		ldi r26,hlo8(0x42296fab)
 2988 105c B2E4      		ldi r27,hhi8(0x42296fab)
 2989 105e 8987      		std Y+9,r24
 2990 1060 9A87      		std Y+10,r25
 2991 1062 AB87      		std Y+11,r26
 2992 1064 BC87      		std Y+12,r27
  38:gpstest.c     ****     to.lon = -71.093355;
 2993               		.stabn 68,0,38,.LM206-main
 2994               	.LM206:
 2995 1066 8CEC      		ldi r24,lo8(0xc28e2fcc)
 2996 1068 9FE2      		ldi r25,hi8(0xc28e2fcc)
 2997 106a AEE8      		ldi r26,hlo8(0xc28e2fcc)
 2998 106c B2EC      		ldi r27,hhi8(0xc28e2fcc)
 2999 106e 8D87      		std Y+13,r24
 3000 1070 9E87      		std Y+14,r25
 3001 1072 AF87      		std Y+15,r26
 3002 1074 B88B      		std Y+16,r27
  39:gpstest.c     **** 	// 77 Mass Ave, taken off Google Maps
  40:gpstest.c     ****     
  41:gpstest.c     ****  	// initialize the timer system
  42:gpstest.c     **** 	timerInit();
 3003               		.stabn 68,0,42,.LM207-main
 3004               	.LM207:
 3005 1076 0E94 0000 		call timerInit
  43:gpstest.c     ****    
  44:gpstest.c     ****     //set uart receive rate to output from GPS
  45:gpstest.c     ****     uartInit();
 3006               		.stabn 68,0,45,.LM208-main
 3007               	.LM208:
 3008 107a 0E94 0000 		call uartInit
  46:gpstest.c     ****     uartSetBaudRate(4800); //gps is 4800
 3009               		.stabn 68,0,46,.LM209-main
 3010               	.LM209:
 3011 107e 60EC      		ldi r22,lo8(4800)
 3012 1080 72E1      		ldi r23,hi8(4800)
 3013 1082 80E0      		ldi r24,hlo8(4800)
 3014 1084 90E0      		ldi r25,hhi8(4800)
 3015 1086 0E94 0000 		call uartSetBaudRate
  47:gpstest.c     ****    	rprintfInit(uartSendByte); //direct print output to serial
 3016               		.stabn 68,0,47,.LM210-main
 3017               	.LM210:
 3018 108a 80E0      		ldi r24,lo8(pm(uartSendByte))
 3019 108c 90E0      		ldi r25,hi8(pm(uartSendByte))
 3020 108e 0E94 0000 		call rprintfInit
  48:gpstest.c     ****  
  49:gpstest.c     **** 	// print an intro message
  50:gpstest.c     **** 	rprintf("\r\nGPS TEST\r\n");
 3021               		.stabn 68,0,50,.LM211-main
 3022               	.LM211:
 3023 1092 80E0      		ldi r24,lo8(__c.0)
GAS LISTING /var/tmp//cc112P7K.s 			page 69


 3024 1094 90E0      		ldi r25,hi8(__c.0)
 3025 1096 9F93      		push r25
 3026 1098 8F93      		push r24
 3027 109a E1E0      		ldi r30,lo8(1)
 3028 109c FE2E      		mov r15,r30
 3029 109e FF92      		push r15
 3030 10a0 0E94 0000 		call rprintf1RamRom
  51:gpstest.c     **** 	
  52:gpstest.c     ****    	//initialize the gps receive buffer
  53:gpstest.c     ****    	bufferInit(&gpsBuffer,gpsBufferData,UART_RX_BUFFER_SIZE);
 3031               		.stabn 68,0,53,.LM212-main
 3032               	.LM212:
 3033 10a4 40E0      		ldi r20,lo8(256)
 3034 10a6 51E0      		ldi r21,hi8(256)
 3035 10a8 60E0      		ldi r22,lo8(gpsBufferData)
 3036 10aa 70E0      		ldi r23,hi8(gpsBufferData)
 3037 10ac 80E0      		ldi r24,lo8(gpsBuffer)
 3038 10ae 90E0      		ldi r25,hi8(gpsBuffer)
 3039 10b0 0E94 0000 		call bufferInit
  54:gpstest.c     **** 
  55:gpstest.c     **** 	uartSetRxHandler(addToBuffer); //custom handler	
 3040               		.stabn 68,0,55,.LM213-main
 3041               	.LM213:
 3042 10b4 80E0      		ldi r24,lo8(pm(addToBuffer))
 3043 10b6 90E0      		ldi r25,hi8(pm(addToBuffer))
 3044 10b8 0E94 0000 		call uartSetRxHandler
  56:gpstest.c     **** 	rprintf("set handler\r\n");
 3045               		.stabn 68,0,56,.LM214-main
 3046               	.LM214:
 3047 10bc 0F90      		pop __tmp_reg__
 3048 10be 0F90      		pop __tmp_reg__
 3049 10c0 0F90      	 	pop __tmp_reg__
 3050 10c2 80E0      		ldi r24,lo8(__c.1)
 3051 10c4 90E0      		ldi r25,hi8(__c.1)
 3052 10c6 9F93      		push r25
 3053 10c8 8F93      		push r24
 3054 10ca FF92      		push r15
 3055 10cc 0E94 0000 		call rprintf1RamRom
  57:gpstest.c     **** 	
  58:gpstest.c     **** 	//initialize gps library
  59:gpstest.c     **** 	status = nmeap_init(&nmea,&user_data);
 3056               		.stabn 68,0,59,.LM215-main
 3057               	.LM215:
 3058 10d0 60E0      		ldi r22,lo8(user_data)
 3059 10d2 70E0      		ldi r23,hi8(user_data)
 3060 10d4 80E0      		ldi r24,lo8(nmea)
 3061 10d6 90E0      		ldi r25,hi8(nmea)
 3062 10d8 0E94 0000 		call nmeap_init
  60:gpstest.c     **** 	if (status != 0) {
 3063               		.stabn 68,0,60,.LM216-main
 3064               	.LM216:
 3065 10dc 0F90      		pop __tmp_reg__
 3066 10de 0F90      		pop __tmp_reg__
 3067 10e0 0F90      	 	pop __tmp_reg__
 3068 10e2 0097      		sbiw r24,0
 3069 10e4 71F0      		breq .L145
  61:gpstest.c     ****         rprintf("nmeap_init %d\n",status);
GAS LISTING /var/tmp//cc112P7K.s 			page 70


 3070               		.stabn 68,0,61,.LM217-main
 3071               	.LM217:
 3072 10e6 9F93      		push r25
 3073 10e8 8F93      		push r24
 3074 10ea 80E0      		ldi r24,lo8(__c.2)
 3075 10ec 90E0      		ldi r25,hi8(__c.2)
 3076 10ee 9F93      		push r25
 3077 10f0 8F93      		push r24
 3078 10f2 FF92      		push r15
 3079 10f4 0E94 0000 		call rprintf1RamRom
 3080 10f8 0F90      		pop __tmp_reg__
 3081 10fa 0F90      		pop __tmp_reg__
 3082 10fc 0F90      		pop __tmp_reg__
 3083 10fe 0F90      		pop __tmp_reg__
 3084 1100 0F90      		pop __tmp_reg__
 3085               	.L145:
  62:gpstest.c     ****     }
  63:gpstest.c     ****    	// initialize gps parsers 
  64:gpstest.c     **** 	status = nmeap_addParser(&nmea,"GPGGA",nmeap_gpgga,0,&gga);
 3086               		.stabn 68,0,64,.LM218-main
 3087               	.LM218:
 3088 1102 00E0      		ldi r16,lo8(gga)
 3089 1104 10E0      		ldi r17,hi8(gga)
 3090 1106 20E0      		ldi r18,lo8(0)
 3091 1108 30E0      		ldi r19,hi8(0)
 3092 110a 40E0      		ldi r20,lo8(pm(nmeap_gpgga))
 3093 110c 50E0      		ldi r21,hi8(pm(nmeap_gpgga))
 3094 110e 60E0      		ldi r22,lo8(.LC3)
 3095 1110 70E0      		ldi r23,hi8(.LC3)
 3096 1112 80E0      		ldi r24,lo8(nmea)
 3097 1114 90E0      		ldi r25,hi8(nmea)
 3098 1116 0E94 0000 		call nmeap_addParser
  65:gpstest.c     **** 	if (status != 0) {
 3099               		.stabn 68,0,65,.LM219-main
 3100               	.LM219:
 3101 111a 0097      		sbiw r24,0
 3102 111c 71F0      		breq .L146
  66:gpstest.c     ****         rprintf("nmeap_add GGA %d\n",status);
 3103               		.stabn 68,0,66,.LM220-main
 3104               	.LM220:
 3105 111e 9F93      		push r25
 3106 1120 8F93      		push r24
 3107 1122 80E0      		ldi r24,lo8(__c.3)
 3108 1124 90E0      		ldi r25,hi8(__c.3)
 3109 1126 9F93      		push r25
 3110 1128 8F93      		push r24
 3111 112a FF92      		push r15
 3112 112c 0E94 0000 		call rprintf1RamRom
 3113 1130 0F90      		pop __tmp_reg__
 3114 1132 0F90      		pop __tmp_reg__
 3115 1134 0F90      		pop __tmp_reg__
 3116 1136 0F90      		pop __tmp_reg__
 3117 1138 0F90      		pop __tmp_reg__
 3118               	.L146:
  67:gpstest.c     ****     }
  68:gpstest.c     ****     status = nmeap_addParser(&nmea,"GPRMC",nmeap_gprmc,0,&rmc);
 3119               		.stabn 68,0,68,.LM221-main
GAS LISTING /var/tmp//cc112P7K.s 			page 71


 3120               	.LM221:
 3121 113a 00E0      		ldi r16,lo8(rmc)
 3122 113c 10E0      		ldi r17,hi8(rmc)
 3123 113e 20E0      		ldi r18,lo8(0)
 3124 1140 30E0      		ldi r19,hi8(0)
 3125 1142 40E0      		ldi r20,lo8(pm(nmeap_gprmc))
 3126 1144 50E0      		ldi r21,hi8(pm(nmeap_gprmc))
 3127 1146 60E0      		ldi r22,lo8(.LC4)
 3128 1148 70E0      		ldi r23,hi8(.LC4)
 3129 114a 80E0      		ldi r24,lo8(nmea)
 3130 114c 90E0      		ldi r25,hi8(nmea)
 3131 114e 0E94 0000 		call nmeap_addParser
  69:gpstest.c     ****     if (status != 0) {
 3132               		.stabn 68,0,69,.LM222-main
 3133               	.LM222:
 3134 1152 0097      		sbiw r24,0
 3135 1154 71F0      		breq .L159
  70:gpstest.c     ****         rprintf("nmeap_add RMC %d\n",status);
 3136               		.stabn 68,0,70,.LM223-main
 3137               	.LM223:
 3138 1156 9F93      		push r25
 3139 1158 8F93      		push r24
 3140 115a 80E0      		ldi r24,lo8(__c.4)
 3141 115c 90E0      		ldi r25,hi8(__c.4)
 3142 115e 9F93      		push r25
 3143 1160 8F93      		push r24
 3144 1162 FF92      		push r15
 3145 1164 0E94 0000 		call rprintf1RamRom
 3146 1168 0F90      		pop __tmp_reg__
 3147 116a 0F90      		pop __tmp_reg__
 3148 116c 0F90      		pop __tmp_reg__
 3149 116e 0F90      		pop __tmp_reg__
 3150 1170 0F90      		pop __tmp_reg__
 3151               	.L159:
 3152               	.LBB16:
  71:gpstest.c     ****     }
  72:gpstest.c     **** 
  73:gpstest.c     **** 	for(;;) {
  74:gpstest.c     **** 		//make sure we have data
  75:gpstest.c     **** 		char ch = bufferGetFromFront(&gpsBuffer);
 3153               		.stabn 68,0,75,.LM224-main
 3154               	.LM224:
 3155 1172 80E0      		ldi r24,lo8(gpsBuffer)
 3156 1174 90E0      		ldi r25,hi8(gpsBuffer)
 3157 1176 0E94 0000 		call bufferGetFromFront
 3158 117a 682F      		mov r22,r24
  76:gpstest.c     **** 		if(ch != 0) {
 3159               		.stabn 68,0,76,.LM225-main
 3160               	.LM225:
 3161 117c 8823      		tst r24
 3162 117e C9F3      		breq .L159
  77:gpstest.c     **** 				//rprintf("%c",ch); //debug
  78:gpstest.c     **** 				status = nmeap_parse(&nmea,ch);
 3163               		.stabn 68,0,78,.LM226-main
 3164               	.LM226:
 3165 1180 80E0      		ldi r24,lo8(nmea)
 3166 1182 90E0      		ldi r25,hi8(nmea)
GAS LISTING /var/tmp//cc112P7K.s 			page 72


 3167 1184 0E94 0000 		call nmeap_parse
  79:gpstest.c     **** 				switch(status) {
 3168               		.stabn 68,0,79,.LM227-main
 3169               	.LM227:
 3170 1188 8130      		cpi r24,1
 3171 118a 9105      		cpc r25,__zero_reg__
 3172 118c 21F0      		breq .L152
 3173 118e 0297      		sbiw r24,2
 3174 1190 09F4      		brne .+2
 3175 1192 C4C0      		rjmp .L153
 3176 1194 EECF      		rjmp .L159
 3177               	.L152:
  80:gpstest.c     **** 					case NMEAP_GPGGA:
  81:gpstest.c     **** 						rprintf("GGA");
 3178               		.stabn 68,0,81,.LM228-main
 3179               	.LM228:
 3180 1196 80E0      		ldi r24,lo8(__c.5)
 3181 1198 90E0      		ldi r25,hi8(__c.5)
 3182 119a 9F93      		push r25
 3183 119c 8F93      		push r24
 3184 119e 71E0      		ldi r23,lo8(1)
 3185 11a0 972E      		mov r9,r23
 3186 11a2 9F92      		push r9
 3187 11a4 0E94 0000 		call rprintf1RamRom
  82:gpstest.c     **** 						rprintf("\tLat: ");
 3188               		.stabn 68,0,82,.LM229-main
 3189               	.LM229:
 3190 11a8 0F90      		pop __tmp_reg__
 3191 11aa 0F90      		pop __tmp_reg__
 3192 11ac 0F90      	 	pop __tmp_reg__
 3193 11ae 80E0      		ldi r24,lo8(__c.6)
 3194 11b0 90E0      		ldi r25,hi8(__c.6)
 3195 11b2 9F93      		push r25
 3196 11b4 8F93      		push r24
 3197 11b6 9F92      		push r9
 3198 11b8 0E94 0000 		call rprintf1RamRom
  83:gpstest.c     **** 						rprintfFloat(8,gga.latitude);
 3199               		.stabn 68,0,83,.LM230-main
 3200               	.LM230:
 3201 11bc 4091 0000 		lds r20,gga
 3202 11c0 5091 0000 		lds r21,(gga)+1
 3203 11c4 6091 0000 		lds r22,(gga)+2
 3204 11c8 7091 0000 		lds r23,(gga)+3
 3205 11cc 88E0      		ldi r24,lo8(8)
 3206 11ce 0E94 0000 		call rprintfFloat
  84:gpstest.c     **** 						rprintf(" Lon: ");
 3207               		.stabn 68,0,84,.LM231-main
 3208               	.LM231:
 3209 11d2 0F90      		pop __tmp_reg__
 3210 11d4 0F90      		pop __tmp_reg__
 3211 11d6 0F90      	 	pop __tmp_reg__
 3212 11d8 80E0      		ldi r24,lo8(__c.7)
 3213 11da 90E0      		ldi r25,hi8(__c.7)
 3214 11dc 9F93      		push r25
 3215 11de 8F93      		push r24
 3216 11e0 9F92      		push r9
 3217 11e2 0E94 0000 		call rprintf1RamRom
GAS LISTING /var/tmp//cc112P7K.s 			page 73


  85:gpstest.c     **** 						rprintfFloat(8,gga.longitude);
 3218               		.stabn 68,0,85,.LM232-main
 3219               	.LM232:
 3220 11e6 4091 0000 		lds r20,gga+4
 3221 11ea 5091 0000 		lds r21,(gga+4)+1
 3222 11ee 6091 0000 		lds r22,(gga+4)+2
 3223 11f2 7091 0000 		lds r23,(gga+4)+3
 3224 11f6 88E0      		ldi r24,lo8(8)
 3225 11f8 0E94 0000 		call rprintfFloat
  86:gpstest.c     **** 						rprintf(" Alt: ");
 3226               		.stabn 68,0,86,.LM233-main
 3227               	.LM233:
 3228 11fc 0F90      		pop __tmp_reg__
 3229 11fe 0F90      		pop __tmp_reg__
 3230 1200 0F90      	 	pop __tmp_reg__
 3231 1202 80E0      		ldi r24,lo8(__c.8)
 3232 1204 90E0      		ldi r25,hi8(__c.8)
 3233 1206 9F93      		push r25
 3234 1208 8F93      		push r24
 3235 120a 9F92      		push r9
 3236 120c 0E94 0000 		call rprintf1RamRom
  87:gpstest.c     **** 						rprintfFloat(8,gga.altitude);
 3237               		.stabn 68,0,87,.LM234-main
 3238               	.LM234:
 3239 1210 4091 0000 		lds r20,gga+8
 3240 1214 5091 0000 		lds r21,(gga+8)+1
 3241 1218 6091 0000 		lds r22,(gga+8)+2
 3242 121c 7091 0000 		lds r23,(gga+8)+3
 3243 1220 88E0      		ldi r24,lo8(8)
 3244 1222 0E94 0000 		call rprintfFloat
  88:gpstest.c     **** 						rprintf("\r\n");
 3245               		.stabn 68,0,88,.LM235-main
 3246               	.LM235:
 3247 1226 0F90      		pop __tmp_reg__
 3248 1228 0F90      		pop __tmp_reg__
 3249 122a 0F90      	 	pop __tmp_reg__
 3250 122c 80E0      		ldi r24,lo8(__c.9)
 3251 122e 90E0      		ldi r25,hi8(__c.9)
 3252 1230 9F93      		push r25
 3253 1232 8F93      		push r24
 3254 1234 9F92      		push r9
 3255 1236 0E94 0000 		call rprintf1RamRom
  89:gpstest.c     **** 						
  90:gpstest.c     **** 						//print distance to 77 Mass Ave
  91:gpstest.c     **** 						from.lat = gga.latitude;
 3256               		.stabn 68,0,91,.LM236-main
 3257               	.LM236:
 3258 123a 8091 0000 		lds r24,gga
 3259 123e 9091 0000 		lds r25,(gga)+1
 3260 1242 A091 0000 		lds r26,(gga)+2
 3261 1246 B091 0000 		lds r27,(gga)+3
 3262 124a 8983      		std Y+1,r24
 3263 124c 9A83      		std Y+2,r25
 3264 124e AB83      		std Y+3,r26
 3265 1250 BC83      		std Y+4,r27
  92:gpstest.c     **** 						from.lon = gga.longitude;
 3266               		.stabn 68,0,92,.LM237-main
GAS LISTING /var/tmp//cc112P7K.s 			page 74


 3267               	.LM237:
 3268 1252 8091 0000 		lds r24,gga+4
 3269 1256 9091 0000 		lds r25,(gga+4)+1
 3270 125a A091 0000 		lds r26,(gga+4)+2
 3271 125e B091 0000 		lds r27,(gga+4)+3
 3272 1262 8D83      		std Y+5,r24
 3273 1264 9E83      		std Y+6,r25
 3274 1266 AF83      		std Y+7,r26
 3275 1268 B887      		std Y+8,r27
  93:gpstest.c     **** 						rprintf("Dist to 77 (km): ");
 3276               		.stabn 68,0,93,.LM238-main
 3277               	.LM238:
 3278 126a 0F90      		pop __tmp_reg__
 3279 126c 0F90      		pop __tmp_reg__
 3280 126e 0F90      	 	pop __tmp_reg__
 3281 1270 80E0      		ldi r24,lo8(__c.10)
 3282 1272 90E0      		ldi r25,hi8(__c.10)
 3283 1274 9F93      		push r25
 3284 1276 8F93      		push r24
 3285 1278 9F92      		push r9
 3286 127a 0E94 0000 		call rprintf1RamRom
  94:gpstest.c     **** 						rprintfFloat(8,dist(from,to));
 3287               		.stabn 68,0,94,.LM239-main
 3288               	.LM239:
 3289 127e A984      		ldd r10,Y+9
 3290 1280 BA84      		ldd r11,Y+10
 3291 1282 CB84      		ldd r12,Y+11
 3292 1284 DC84      		ldd r13,Y+12
 3293 1286 ED84      		ldd r14,Y+13
 3294 1288 FE84      		ldd r15,Y+14
 3295 128a 0F85      		ldd r16,Y+15
 3296 128c 1889      		ldd r17,Y+16
 3297 128e 2981      		ldd r18,Y+1
 3298 1290 3A81      		ldd r19,Y+2
 3299 1292 4B81      		ldd r20,Y+3
 3300 1294 5C81      		ldd r21,Y+4
 3301 1296 6D81      		ldd r22,Y+5
 3302 1298 7E81      		ldd r23,Y+6
 3303 129a 8F81      		ldd r24,Y+7
 3304 129c 9885      		ldd r25,Y+8
 3305 129e 0E94 0000 		call dist
 3306 12a2 DC01      		movw r26,r24
 3307 12a4 CB01      		movw r24,r22
 3308 12a6 AC01      		movw r20,r24
 3309 12a8 BD01      		movw r22,r26
 3310 12aa 88E0      		ldi r24,lo8(8)
 3311 12ac 0E94 0000 		call rprintfFloat
  95:gpstest.c     **** 						rprintf("\r\n");
 3312               		.stabn 68,0,95,.LM240-main
 3313               	.LM240:
 3314 12b0 0F90      		pop __tmp_reg__
 3315 12b2 0F90      		pop __tmp_reg__
 3316 12b4 0F90      	 	pop __tmp_reg__
 3317 12b6 80E0      		ldi r24,lo8(__c.11)
 3318 12b8 90E0      		ldi r25,hi8(__c.11)
 3319 12ba 9F93      		push r25
 3320 12bc 8F93      		push r24
GAS LISTING /var/tmp//cc112P7K.s 			page 75


 3321 12be 9F92      		push r9
 3322 12c0 0E94 0000 		call rprintf1RamRom
  96:gpstest.c     **** 						rprintf("Bearing to 77 (deg): ");
 3323               		.stabn 68,0,96,.LM241-main
 3324               	.LM241:
 3325 12c4 0F90      		pop __tmp_reg__
 3326 12c6 0F90      		pop __tmp_reg__
 3327 12c8 0F90      	 	pop __tmp_reg__
 3328 12ca 80E0      		ldi r24,lo8(__c.12)
 3329 12cc 90E0      		ldi r25,hi8(__c.12)
 3330 12ce 9F93      		push r25
 3331 12d0 8F93      		push r24
 3332 12d2 9F92      		push r9
 3333 12d4 0E94 0000 		call rprintf1RamRom
  97:gpstest.c     **** 						rprintfFloat(8,bearing(from,to));
 3334               		.stabn 68,0,97,.LM242-main
 3335               	.LM242:
 3336 12d8 A984      		ldd r10,Y+9
 3337 12da BA84      		ldd r11,Y+10
 3338 12dc CB84      		ldd r12,Y+11
 3339 12de DC84      		ldd r13,Y+12
 3340 12e0 ED84      		ldd r14,Y+13
 3341 12e2 FE84      		ldd r15,Y+14
 3342 12e4 0F85      		ldd r16,Y+15
 3343 12e6 1889      		ldd r17,Y+16
 3344 12e8 2981      		ldd r18,Y+1
 3345 12ea 3A81      		ldd r19,Y+2
 3346 12ec 4B81      		ldd r20,Y+3
 3347 12ee 5C81      		ldd r21,Y+4
 3348 12f0 6D81      		ldd r22,Y+5
 3349 12f2 7E81      		ldd r23,Y+6
 3350 12f4 8F81      		ldd r24,Y+7
 3351 12f6 9885      		ldd r25,Y+8
 3352 12f8 0E94 0000 		call bearing
 3353 12fc DC01      		movw r26,r24
 3354 12fe CB01      		movw r24,r22
 3355 1300 AC01      		movw r20,r24
 3356 1302 BD01      		movw r22,r26
 3357 1304 88E0      		ldi r24,lo8(8)
 3358 1306 0E94 0000 		call rprintfFloat
  98:gpstest.c     **** 						rprintf("\r\n\r\n");
 3359               		.stabn 68,0,98,.LM243-main
 3360               	.LM243:
 3361 130a 0F90      		pop __tmp_reg__
 3362 130c 0F90      		pop __tmp_reg__
 3363 130e 0F90      	 	pop __tmp_reg__
 3364 1310 80E0      		ldi r24,lo8(__c.13)
 3365 1312 90E0      		ldi r25,hi8(__c.13)
 3366 1314 9F93      		push r25
 3367 1316 8F93      		push r24
 3368 1318 9F92      		push r9
 3369 131a 25C0      		rjmp .L158
 3370               	.L153:
  99:gpstest.c     **** 						
 100:gpstest.c     **** 						break;
 101:gpstest.c     **** 					case NMEAP_GPRMC:
 102:gpstest.c     **** 						rprintf("RMC");
GAS LISTING /var/tmp//cc112P7K.s 			page 76


 3371               		.stabn 68,0,102,.LM244-main
 3372               	.LM244:
 3373 131c 80E0      		ldi r24,lo8(__c.14)
 3374 131e 90E0      		ldi r25,hi8(__c.14)
 3375 1320 9F93      		push r25
 3376 1322 8F93      		push r24
 3377 1324 11E0      		ldi r17,lo8(1)
 3378 1326 1F93      		push r17
 3379 1328 0E94 0000 		call rprintf1RamRom
 103:gpstest.c     **** 						//rprintf("\tLat: ");
 104:gpstest.c     **** 						//rprintfFloat(8,rmc.latitude);
 105:gpstest.c     **** 						//rprintf(" Lon: ");
 106:gpstest.c     **** 						//rprintfFloat(8,rmc.longitude);
 107:gpstest.c     **** 						rprintf(" Vel (kt): ");
 3380               		.stabn 68,0,107,.LM245-main
 3381               	.LM245:
 3382 132c 0F90      		pop __tmp_reg__
 3383 132e 0F90      		pop __tmp_reg__
 3384 1330 0F90      	 	pop __tmp_reg__
 3385 1332 80E0      		ldi r24,lo8(__c.15)
 3386 1334 90E0      		ldi r25,hi8(__c.15)
 3387 1336 9F93      		push r25
 3388 1338 8F93      		push r24
 3389 133a 1F93      		push r17
 3390 133c 0E94 0000 		call rprintf1RamRom
 108:gpstest.c     **** 						rprintfFloat(8,rmc.speed);
 3391               		.stabn 68,0,108,.LM246-main
 3392               	.LM246:
 3393 1340 4091 0000 		lds r20,rmc+13
 3394 1344 5091 0000 		lds r21,(rmc+13)+1
 3395 1348 6091 0000 		lds r22,(rmc+13)+2
 3396 134c 7091 0000 		lds r23,(rmc+13)+3
 3397 1350 88E0      		ldi r24,lo8(8)
 3398 1352 0E94 0000 		call rprintfFloat
 109:gpstest.c     **** 						rprintf("\r\n");
 3399               		.stabn 68,0,109,.LM247-main
 3400               	.LM247:
 3401 1356 0F90      		pop __tmp_reg__
 3402 1358 0F90      		pop __tmp_reg__
 3403 135a 0F90      	 	pop __tmp_reg__
 3404 135c 80E0      		ldi r24,lo8(__c.16)
 3405 135e 90E0      		ldi r25,hi8(__c.16)
 3406 1360 9F93      		push r25
 3407 1362 8F93      		push r24
 3408 1364 1F93      		push r17
 3409               	.L158:
 3410 1366 0E94 0000 		call rprintf1RamRom
 110:gpstest.c     **** 						break;
 3411               		.stabn 68,0,110,.LM248-main
 3412               	.LM248:
 3413 136a 0F90      		pop __tmp_reg__
 3414 136c 0F90      		pop __tmp_reg__
 3415 136e 0F90      	 	pop __tmp_reg__
 3416 1370 00CF      		rjmp .L159
 3417               	.LBE16:
 3418               	/* epilogue: frame size=16 */
 3419               	/* epilogue: noreturn */
GAS LISTING /var/tmp//cc112P7K.s 			page 77


 3420               	/* epilogue end (size=0) */
 3421               	/* function main size 403 (399) */
 3422               		.size	main, .-main
 3423               		.stabs	"status:r(0,1)",64,0,31,24
 3424               		.stabs	"from:(20,1)",128,0,33,1
 3425               		.stabs	"to:(20,1)",128,0,33,9
 3426               		.stabn	192,0,0,main-main
 3427               		.stabs	"ch:r(0,2)",64,0,75,22
 3428               		.stabn	192,0,0,.LBB16-main
 3429               		.stabn	224,0,0,.LBE16-main
 3430               		.stabn	224,0,0,.Lscope13-main
 3431               	.Lscope13:
 3432               		.stabs	"",36,0,0,.Lscope13-main
 3433               		.stabs	"addToBuffer:F(0,19)",36,0,121,addToBuffer
 3434               		.stabs	"ch:P(0,11)",64,0,121,24
 3435               	.global	addToBuffer
 3436               		.type	addToBuffer, @function
 3437               	addToBuffer:
 111:gpstest.c     **** 					default:
 112:gpstest.c     **** 						break;
 113:gpstest.c     **** 			        } //end switch	
 114:gpstest.c     **** 			
 115:gpstest.c     **** 			}
 116:gpstest.c     **** 	} //end for
 117:gpstest.c     **** 	
 118:gpstest.c     **** 	return 0;
 119:gpstest.c     **** }
 120:gpstest.c     **** 
 121:gpstest.c     **** void addToBuffer(unsigned char ch) {
 3438               		.stabn 68,0,121,.LM249-addToBuffer
 3439               	.LM249:
 3440               	/* prologue: frame size=0 */
 3441               	/* prologue end (size=0) */
 122:gpstest.c     **** 	bufferAddToEnd(&gpsBuffer,ch);
 3442               		.stabn 68,0,122,.LM250-addToBuffer
 3443               	.LM250:
 3444 1372 682F      		mov r22,r24
 3445 1374 80E0      		ldi r24,lo8(gpsBuffer)
 3446 1376 90E0      		ldi r25,hi8(gpsBuffer)
 3447 1378 0E94 0000 		call bufferAddToEnd
 3448               	/* epilogue: frame size=0 */
 3449 137c 0895      		ret
 3450               	/* epilogue end (size=1) */
 3451               	/* function addToBuffer size 6 (5) */
 3452               		.size	addToBuffer, .-addToBuffer
 3453               	.Lscope14:
 3454               		.stabs	"",36,0,0,.Lscope14-addToBuffer
 3455               		.lcomm nmea,718
 3456               		.lcomm user_data,2
 3457               		.lcomm gga,28
 3458               		.lcomm rmc,29
 3459               		.lcomm gpsBuffer,8
 3460               		.lcomm gpsBufferData,256
 3461               		.stabs	"nmea:S(13,11)",40,0,19,nmea
 3462               		.stabs	"user_data:S(0,1)",40,0,20,user_data
 3463               		.stabs	"gga:S(12,8)",40,0,21,gga
 3464               		.stabs	"rmc:S(12,10)",40,0,22,rmc
GAS LISTING /var/tmp//cc112P7K.s 			page 78


 3465               		.stabs	"gpsBuffer:S(8,3)",40,0,24,gpsBuffer
 3466               		.stabs	"gpsBufferData:S(13,8)",40,0,25,gpsBufferData
 3467               		.text
 3468               		.stabs "",100,0,0,Letext
 3469               	Letext:
 3470               	/* File "gpstest.c": code 2498 = 0x09c2 (2206), prologues 143, epilogues 149 */
GAS LISTING /var/tmp//cc112P7K.s 			page 79


DEFINED SYMBOLS
                            *ABS*:00000000 gpstest.c
                            *ABS*:0000003f __SREG__
                            *ABS*:0000003e __SP_H__
                            *ABS*:0000003d __SP_L__
                            *ABS*:00000000 __tmp_reg__
                            *ABS*:00000001 __zero_reg__
/var/tmp//cc112P7K.s:141    .text:00000000 nmeap_latitude
/var/tmp//cc112P7K.s:340    .text:00000106 nmeap_longitude
/var/tmp//cc112P7K.s:537    .text:0000020c nmeap_altitude
/var/tmp//cc112P7K.s:597    .text:00000246 nmeap_init
/var/tmp//cc112P7K.s:653    .text:00000268 nmeap_addParser
/var/tmp//cc112P7K.s:776    .text:000002f4 nmeap_tokenize
/var/tmp//cc112P7K.s:887    .text:0000035e nmeap_process
/var/tmp//cc112P7K.s:1032   .text:00000418 nmeap_parse
/var/tmp//cc112P7K.s:1500   .text:000006b0 nmeap_parseBuffer
/var/tmp//cc112P7K.s:1604   .text:0000071e nmeap_gpgga
/var/tmp//cc112P7K.s:1926   .text:00000940 nmeap_gprmc
/var/tmp//cc112P7K.s:2241   .text:00000b52 dist
/var/tmp//cc112P7K.s:2591   .text:00000df8 bearing
/var/tmp//cc112P7K.s:2897   .progmem.data:00000000 __c.0
/var/tmp//cc112P7K.s:2901   .progmem.data:0000000d __c.1
/var/tmp//cc112P7K.s:2905   .progmem.data:0000001b __c.2
/var/tmp//cc112P7K.s:2909   .progmem.data:0000002a __c.3
/var/tmp//cc112P7K.s:2913   .progmem.data:0000003c __c.4
/var/tmp//cc112P7K.s:2917   .progmem.data:0000004e __c.5
/var/tmp//cc112P7K.s:2921   .progmem.data:00000052 __c.6
/var/tmp//cc112P7K.s:2925   .progmem.data:00000059 __c.7
/var/tmp//cc112P7K.s:2929   .progmem.data:00000060 __c.8
/var/tmp//cc112P7K.s:2933   .progmem.data:00000067 __c.9
/var/tmp//cc112P7K.s:2937   .progmem.data:0000006a __c.10
/var/tmp//cc112P7K.s:2941   .progmem.data:0000007c __c.11
/var/tmp//cc112P7K.s:2945   .progmem.data:0000007f __c.12
/var/tmp//cc112P7K.s:2949   .progmem.data:00000095 __c.13
/var/tmp//cc112P7K.s:2953   .progmem.data:0000009a __c.14
/var/tmp//cc112P7K.s:2957   .progmem.data:0000009e __c.15
/var/tmp//cc112P7K.s:2961   .progmem.data:000000aa __c.16
/var/tmp//cc112P7K.s:2972   .text:0000104e main
/var/tmp//cc112P7K.s:3459   .bss:00000311 gpsBufferData
/var/tmp//cc112P7K.s:3458   .bss:00000309 gpsBuffer
/var/tmp//cc112P7K.s:3437   .text:00001372 addToBuffer
/var/tmp//cc112P7K.s:3455   .bss:000002ce user_data
                             .bss:00000000 nmea
/var/tmp//cc112P7K.s:3456   .bss:000002d0 gga
/var/tmp//cc112P7K.s:3457   .bss:000002ec rmc
/var/tmp//cc112P7K.s:3469   .text:0000137e Letext

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
atof
__divsf3
__fixsfsi
__floatsisf
__mulsf3
__subsf3
__addsf3
GAS LISTING /var/tmp//cc112P7K.s 			page 80


strncpy
strncmp
isalnum
isxdigit
atoi
printf
sin
cos
sqrt
atan2
__stack
timerInit
uartInit
uartSetBaudRate
uartSendByte
rprintfInit
rprintf1RamRom
bufferInit
uartSetRxHandler
bufferGetFromFront
rprintfFloat
bufferAddToEnd
